(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function jS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ng={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function HI(){if(Mb)return pc;Mb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return pc.Fragment=e,pc.jsx=t,pc.jsxs=t,pc}var Pb;function GI(){return Pb||(Pb=1,Ng.exports=HI()),Ng.exports}var N=GI(),xg={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function $I(){if(Vb)return ot;Vb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,V={};function z(j,le,_e){this.props=j,this.context=le,this.refs=V,this.updater=_e||A}z.prototype.isReactComponent={},z.prototype.setState=function(j,le){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,le,"setState")},z.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=z.prototype;function Z(j,le,_e){this.props=j,this.context=le,this.refs=V,this.updater=_e||A}var H=Z.prototype=new U;H.constructor=Z,D(H,z.prototype),H.isPureReactComponent=!0;var ne=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function C(j,le,_e,me,ke,Je){return _e=Je.ref,{$$typeof:n,type:j,key:le,ref:_e!==void 0?_e:null,props:Je}}function R(j,le){return C(j.type,le,void 0,void 0,void 0,j.props)}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function B(j){var le={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(_e){return le[_e]})}var L=/\/+/g;function P(j,le){return typeof j=="object"&&j!==null&&j.key!=null?B(""+j.key):le.toString(36)}function I(){}function xe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(I,I):(j.status="pending",j.then(function(le){j.status==="pending"&&(j.status="fulfilled",j.value=le)},function(le){j.status==="pending"&&(j.status="rejected",j.reason=le)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Fe(j,le,_e,me,ke){var Je=typeof j;(Je==="undefined"||Je==="boolean")&&(j=null);var He=!1;if(j===null)He=!0;else switch(Je){case"bigint":case"string":case"number":He=!0;break;case"object":switch(j.$$typeof){case n:case e:He=!0;break;case y:return He=j._init,Fe(He(j._payload),le,_e,me,ke)}}if(He)return ke=ke(j),He=me===""?"."+P(j,0):me,ne(ke)?(_e="",He!=null&&(_e=He.replace(L,"$&/")+"/"),Fe(ke,le,_e,"",function(qn){return qn})):ke!=null&&(x(ke)&&(ke=R(ke,_e+(ke.key==null||j&&j.key===ke.key?"":(""+ke.key).replace(L,"$&/")+"/")+He)),le.push(ke)),1;He=0;var $t=me===""?".":me+":";if(ne(j))for(var Rt=0;Rt<j.length;Rt++)me=j[Rt],Je=$t+P(me,Rt),He+=Fe(me,le,_e,Je,ke);else if(Rt=b(j),typeof Rt=="function")for(j=Rt.call(j),Rt=0;!(me=j.next()).done;)me=me.value,Je=$t+P(me,Rt++),He+=Fe(me,le,_e,Je,ke);else if(Je==="object"){if(typeof j.then=="function")return Fe(xe(j),le,_e,me,ke);throw le=String(j),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return He}function Q(j,le,_e){if(j==null)return j;var me=[],ke=0;return Fe(j,me,"","",function(Je){return le.call(_e,Je,ke++)}),me}function pe(j){if(j._status===-1){var le=j._result;le=le(),le.then(function(_e){(j._status===0||j._status===-1)&&(j._status=1,j._result=_e)},function(_e){(j._status===0||j._status===-1)&&(j._status=2,j._result=_e)}),j._status===-1&&(j._status=0,j._result=le)}if(j._status===1)return j._result.default;throw j._result}var Se=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Ke(){}return ot.Children={map:Q,forEach:function(j,le,_e){Q(j,function(){le.apply(this,arguments)},_e)},count:function(j){var le=0;return Q(j,function(){le++}),le},toArray:function(j){return Q(j,function(le){return le})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ot.Component=z,ot.Fragment=t,ot.Profiler=a,ot.PureComponent=Z,ot.StrictMode=i,ot.Suspense=m,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,ot.__COMPILER_RUNTIME={__proto__:null,c:function(j){return K.H.useMemoCache(j)}},ot.cache=function(j){return function(){return j.apply(null,arguments)}},ot.cloneElement=function(j,le,_e){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var me=D({},j.props),ke=j.key,Je=void 0;if(le!=null)for(He in le.ref!==void 0&&(Je=void 0),le.key!==void 0&&(ke=""+le.key),le)!M.call(le,He)||He==="key"||He==="__self"||He==="__source"||He==="ref"&&le.ref===void 0||(me[He]=le[He]);var He=arguments.length-2;if(He===1)me.children=_e;else if(1<He){for(var $t=Array(He),Rt=0;Rt<He;Rt++)$t[Rt]=arguments[Rt+2];me.children=$t}return C(j.type,ke,void 0,void 0,Je,me)},ot.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},ot.createElement=function(j,le,_e){var me,ke={},Je=null;if(le!=null)for(me in le.key!==void 0&&(Je=""+le.key),le)M.call(le,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ke[me]=le[me]);var He=arguments.length-2;if(He===1)ke.children=_e;else if(1<He){for(var $t=Array(He),Rt=0;Rt<He;Rt++)$t[Rt]=arguments[Rt+2];ke.children=$t}if(j&&j.defaultProps)for(me in He=j.defaultProps,He)ke[me]===void 0&&(ke[me]=He[me]);return C(j,Je,void 0,void 0,null,ke)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(j){return{$$typeof:h,render:j}},ot.isValidElement=x,ot.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:pe}},ot.memo=function(j,le){return{$$typeof:p,type:j,compare:le===void 0?null:le}},ot.startTransition=function(j){var le=K.T,_e={};K.T=_e;try{var me=j(),ke=K.S;ke!==null&&ke(_e,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(Ke,Se)}catch(Je){Se(Je)}finally{K.T=le}},ot.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},ot.use=function(j){return K.H.use(j)},ot.useActionState=function(j,le,_e){return K.H.useActionState(j,le,_e)},ot.useCallback=function(j,le){return K.H.useCallback(j,le)},ot.useContext=function(j){return K.H.useContext(j)},ot.useDebugValue=function(){},ot.useDeferredValue=function(j,le){return K.H.useDeferredValue(j,le)},ot.useEffect=function(j,le,_e){var me=K.H;if(typeof _e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(j,le)},ot.useId=function(){return K.H.useId()},ot.useImperativeHandle=function(j,le,_e){return K.H.useImperativeHandle(j,le,_e)},ot.useInsertionEffect=function(j,le){return K.H.useInsertionEffect(j,le)},ot.useLayoutEffect=function(j,le){return K.H.useLayoutEffect(j,le)},ot.useMemo=function(j,le){return K.H.useMemo(j,le)},ot.useOptimistic=function(j,le){return K.H.useOptimistic(j,le)},ot.useReducer=function(j,le,_e){return K.H.useReducer(j,le,_e)},ot.useRef=function(j){return K.H.useRef(j)},ot.useState=function(j){return K.H.useState(j)},ot.useSyncExternalStore=function(j,le,_e){return K.H.useSyncExternalStore(j,le,_e)},ot.useTransition=function(){return K.H.useTransition()},ot.version="19.1.1",ot}var Lb;function Hd(){return Lb||(Lb=1,xg.exports=$I()),xg.exports}var k=Hd();const hr=jS(k);var Dg={exports:{}},gc={},Og={exports:{}},kg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function KI(){return Ub||(Ub=1,(function(n){function e(Q,pe){var Se=Q.length;Q.push(pe);e:for(;0<Se;){var Ke=Se-1>>>1,j=Q[Ke];if(0<a(j,pe))Q[Ke]=pe,Q[Se]=j,Se=Ke;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var pe=Q[0],Se=Q.pop();if(Se!==pe){Q[0]=Se;e:for(var Ke=0,j=Q.length,le=j>>>1;Ke<le;){var _e=2*(Ke+1)-1,me=Q[_e],ke=_e+1,Je=Q[ke];if(0>a(me,Se))ke<j&&0>a(Je,me)?(Q[Ke]=Je,Q[ke]=Se,Ke=ke):(Q[Ke]=me,Q[_e]=Se,Ke=_e);else if(ke<j&&0>a(Je,Se))Q[Ke]=Je,Q[ke]=Se,Ke=ke;else break e}}return pe}function a(Q,pe){var Se=Q.sortIndex-pe.sortIndex;return Se!==0?Se:Q.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],p=[],y=1,T=null,b=3,A=!1,D=!1,V=!1,z=!1,U=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function ne(Q){for(var pe=t(p);pe!==null;){if(pe.callback===null)i(p);else if(pe.startTime<=Q)i(p),pe.sortIndex=pe.expirationTime,e(m,pe);else break;pe=t(p)}}function K(Q){if(V=!1,ne(Q),!D)if(t(m)!==null)D=!0,M||(M=!0,P());else{var pe=t(p);pe!==null&&Fe(K,pe.startTime-Q)}}var M=!1,C=-1,R=5,x=-1;function B(){return z?!0:!(n.unstable_now()-x<R)}function L(){if(z=!1,M){var Q=n.unstable_now();x=Q;var pe=!0;try{e:{D=!1,V&&(V=!1,Z(C),C=-1),A=!0;var Se=b;try{t:{for(ne(Q),T=t(m);T!==null&&!(T.expirationTime>Q&&B());){var Ke=T.callback;if(typeof Ke=="function"){T.callback=null,b=T.priorityLevel;var j=Ke(T.expirationTime<=Q);if(Q=n.unstable_now(),typeof j=="function"){T.callback=j,ne(Q),pe=!0;break t}T===t(m)&&i(m),ne(Q)}else i(m);T=t(m)}if(T!==null)pe=!0;else{var le=t(p);le!==null&&Fe(K,le.startTime-Q),pe=!1}}break e}finally{T=null,b=Se,A=!1}pe=void 0}}finally{pe?P():M=!1}}}var P;if(typeof H=="function")P=function(){H(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,xe=I.port2;I.port1.onmessage=L,P=function(){xe.postMessage(null)}}else P=function(){U(L,0)};function Fe(Q,pe){C=U(function(){Q(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var pe=3;break;default:pe=b}var Se=b;b=pe;try{return Q()}finally{b=Se}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(Q,pe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Se=b;b=Q;try{return pe()}finally{b=Se}},n.unstable_scheduleCallback=function(Q,pe,Se){var Ke=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ke+Se:Ke):Se=Ke,Q){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Se+j,Q={id:y++,callback:pe,priorityLevel:Q,startTime:Se,expirationTime:j,sortIndex:-1},Se>Ke?(Q.sortIndex=Se,e(p,Q),t(m)===null&&Q===t(p)&&(V?(Z(C),C=-1):V=!0,Fe(K,Se-Ke))):(Q.sortIndex=j,e(m,Q),D||A||(D=!0,M||(M=!0,P()))),Q},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(Q){var pe=b;return function(){var Se=b;b=pe;try{return Q.apply(this,arguments)}finally{b=Se}}}})(kg)),kg}var jb;function YI(){return jb||(jb=1,Og.exports=KI()),Og.exports}var Mg={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function QI(){if(zb)return Gn;zb=1;var n=Hd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},Gn.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},Gn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Gn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Gn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,T=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:A}):y==="script"&&i.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Gn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,T=h(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Gn.requestFormReset=function(m){i.d.r(m)},Gn.unstable_batchedUpdates=function(m,p){return m(p)},Gn.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},Gn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Gn.version="19.1.1",Gn}var Bb;function zS(){if(Bb)return Mg.exports;Bb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mg.exports=QI(),Mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function XI(){if(Fb)return gc;Fb=1;var n=YI(),e=Hd(),t=zS();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return h(d),r;if(g===u)return h(d),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=g;else{for(var E=!1,w=d.child;w;){if(w===o){E=!0,o=d,u=g;break}if(w===u){E=!0,u=d,o=g;break}w=w.sibling}if(!E){for(w=g.child;w;){if(w===o){E=!0,o=g,u=d;break}if(w===u){E=!0,u=g,o=d;break}w=w.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),H=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var I=Symbol.for("react.client.reference");function xe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===I?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case K:return"Suspense";case M:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case H:return(r.displayName||"Context")+".Provider";case Z:return(r._context.displayName||"Context")+".Consumer";case ne:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return s=r.displayName||null,s!==null?s:xe(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return xe(r(s))}catch{}}return null}var Fe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ke=[],j=-1;function le(r){return{current:r}}function _e(r){0>j||(r.current=Ke[j],Ke[j]=null,j--)}function me(r,s){j++,Ke[j]=r.current,r.current=s}var ke=le(null),Je=le(null),He=le(null),$t=le(null);function Rt(r,s){switch(me(He,s),me(Je,r),me(ke,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?lb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=lb(s),r=ub(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}_e(ke),me(ke,r)}function qn(){_e(ke),_e(Je),_e(He)}function Ot(r){r.memoizedState!==null&&me($t,r);var s=ke.current,o=ub(s,r.type);s!==o&&(me(Je,r),me(ke,o))}function wn(r){Je.current===r&&(_e(ke),_e(Je)),$t.current===r&&(_e($t),cc._currentValue=Se)}var vr=Object.prototype.hasOwnProperty,ai=n.unstable_scheduleCallback,Sn=n.unstable_cancelCallback,Ai=n.unstable_shouldYield,qs=n.unstable_requestPaint,kn=n.unstable_now,Xo=n.unstable_getCurrentPriorityLevel,Ri=n.unstable_ImmediatePriority,q=n.unstable_UserBlockingPriority,J=n.unstable_NormalPriority,ae=n.unstable_LowPriority,we=n.unstable_IdlePriority,Te=n.log,ye=n.unstable_setDisableYieldValue,Ee=null,Ce=null;function st(r){if(typeof Te=="function"&&ye(r),Ce&&typeof Ce.setStrictMode=="function")try{Ce.setStrictMode(Ee,r)}catch{}}var Tt=Math.clz32?Math.clz32:Vr,oi=Math.log,en=Math.LN2;function Vr(r){return r>>>=0,r===0?32:31-(oi(r)/en|0)|0}var sr=256,ar=4194304;function Xn(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Lr(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var w=u&134217727;return w!==0?(u=w&~g,u!==0?d=Xn(u):(E&=w,E!==0?d=Xn(E):o||(o=w&~r,o!==0&&(d=Xn(o))))):(w=u&~g,w!==0?d=Xn(w):E!==0?d=Xn(E):o||(o=u&~r,o!==0&&(d=Xn(o)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:d}function or(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function li(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(){var r=sr;return sr<<=1,(sr&4194048)===0&&(sr=256),r}function Xa(){var r=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),r}function Ur(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ui(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Hs(r,s,o,u,d,g){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,O=r.expirationTimes,ee=r.hiddenUpdates;for(o=E&~o;0<o;){var oe=31-Tt(o),fe=1<<oe;w[oe]=0,O[oe]=-1;var re=ee[oe];if(re!==null)for(ee[oe]=null,oe=0;oe<re.length;oe++){var ie=re[oe];ie!==null&&(ie.lane&=-536870913)}o&=~fe}u!==0&&Zn(r,u,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~s))}function Zn(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Tt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Ci(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Tt(o),d=1<<u;d&s|r[u]&s&&(r[u]|=s),o&=~d}}function Ii(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Gs(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function F(){var r=pe.p;return r!==0?r:(r=window.event,r===void 0?32:Ib(r.type))}function Y(r,s){var o=pe.p;try{return pe.p=r,s()}finally{pe.p=o}}var te=Math.random().toString(36).slice(2),he="__reactFiber$"+te,ge="__reactProps$"+te,Ie="__reactContainer$"+te,je="__reactEvents$"+te,Me="__reactListeners$"+te,Pe="__reactHandles$"+te,Ge="__reactResources$"+te,Ve="__reactMarker$"+te;function Le(r){delete r[he],delete r[ge],delete r[je],delete r[Me],delete r[Pe]}function at(r){var s=r[he];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ie]||o[he]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=db(r);r!==null;){if(o=r[he])return o;r=db(r)}return s}r=o,o=r.parentNode}return null}function bt(r){if(r=r[he]||r[Ie]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function jt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ct(r){var s=r[Ge];return s||(s=r[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function et(r){r[Ve]=!0}var It=new Set,lr={};function Mn(r,s){An(r,s),An(r+"Capture",s)}function An(r,s){for(lr[r]=s,r=0;r<s.length;r++)It.add(s[r])}var Wn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$s={},Er={};function jr(r){return vr.call(Er,r)?!0:vr.call($s,r)?!1:Wn.test(r)?Er[r]=!0:($s[r]=!0,!1)}function Tr(r,s,o){if(jr(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Jn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Ze(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Kt,is;function er(r){if(Kt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Kt=s&&s[1]||"",is=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kt+r+is}var Ft=!1;function ci(r,s){if(!r||Ft)return"";Ft=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var re=ie}Reflect.construct(r,[],fe)}else{try{fe.call()}catch(ie){re=ie}r.call(fe.prototype)}}else{try{throw Error()}catch(ie){re=ie}(fe=r())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&re&&typeof ie.stack=="string")return[ie.stack,re.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],w=g[1];if(E&&w){var O=E.split(`
`),ee=w.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<ee.length&&!ee[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===ee.length)for(u=O.length-1,d=ee.length-1;1<=u&&0<=d&&O[u]!==ee[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==ee[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==ee[d]){var oe=`
`+O[u].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=u&&0<=d);break}}}finally{Ft=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?er(o):""}function Ks(r){switch(r.tag){case 26:case 27:case 5:return er(r.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 15:return ci(r.type,!1);case 11:return ci(r.type.render,!1);case 1:return ci(r.type,!0);case 31:return er("Activity");default:return""}}function Ys(r){try{var s="";do s+=Ks(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function tr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _u(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function km(r){var s=_u(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Zo(r){r._valueTracker||(r._valueTracker=km(r))}function vu(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=_u(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Za(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Mm=/[\n"\\]/g;function ln(r){return r.replace(Mm,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function br(r,s,o,u,d,g,E,w){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+tr(s)):r.value!==""+tr(s)&&(r.value=""+tr(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?Qs(r,E,tr(s)):o!=null?Qs(r,E,tr(o)):u!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+tr(w):r.removeAttribute("name")}function Wa(r,s,o,u,d,g,E,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+tr(o):"",s=s!=null?""+tr(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=w?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function Qs(r,s,o){s==="number"&&Za(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ss(r,s,o,u){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&u&&(r[o].defaultSelected=!0)}else{for(o=""+tr(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Pt(r,s,o){if(s!=null&&(s=""+tr(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+tr(o):""}function Ja(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Fe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=tr(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function zr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var eo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _f(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||eo.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Eu(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&_f(r,d,u)}else for(var g in s)s.hasOwnProperty(g)&&_f(r,g,s[g])}function Tu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(r){return Vm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var as=null;function Br(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var os=null,ls=null;function bu(r){var s=bt(r);if(s&&(r=s.stateNode)){var o=r[ge]||null;e:switch(r=s.stateNode,s.type){case"input":if(br(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ln(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var d=u[ge]||null;if(!d)throw Error(i(90));br(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&vu(u)}break e;case"textarea":Pt(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ss(r,!!o.multiple,s,!1)}}}var Ni=!1;function vf(r,s,o){if(Ni)return r(s,o);Ni=!0;try{var u=r(s);return u}finally{if(Ni=!1,(os!==null||ls!==null)&&(hh(),os&&(s=os,r=ls,ls=os=null,bu(s),r)))for(s=0;s<r.length;s++)bu(r[s])}}function to(r,s){var o=r.stateNode;if(o===null)return null;var u=o[ge]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fr=!1;if(fi)try{var no={};Object.defineProperty(no,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Fr=!1}var xi=null,Xs=null,us=null;function wu(){if(us)return us;var r,s=Xs,o=s.length,u,d="value"in xi?xi.value:xi.textContent,g=d.length;for(r=0;r<o&&s[r]===d[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===d[g-u];u++);return us=d.slice(r,1<u?1-u:void 0)}function Di(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Oi(){return!0}function Su(){return!1}function Rn(r){function s(o,u,d,g,E){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Oi:Su,this.isPropagationStopped=Su,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),s}var xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jo=Rn(xt),ro=y({},xt,{view:0,detail:0}),Ef=Rn(ro),el,tl,ki,io=y({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ki&&(ki&&r.type==="mousemove"?(el=r.screenX-ki.screenX,tl=r.screenY-ki.screenY):tl=el=0,ki=r),el)},movementY:function(r){return"movementY"in r?r.movementY:tl}}),qr=Rn(io),Tf=y({},io,{dataTransfer:0}),Lm=Rn(Tf),so=y({},ro,{relatedTarget:0}),nl=Rn(so),Au=y({},xt,{animationName:0,elapsedTime:0,pseudoElement:0}),rl=Rn(Au),bf=y({},xt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),il=Rn(bf),Um=y({},xt,{data:0}),Ru=Rn(Um),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Sf[r])?!!s[r]:!1}function oo(){return Cu}var Af=y({},ro,{key:function(r){if(r.key){var s=ao[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Di(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?wf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(r){return r.type==="keypress"?Di(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Di(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),sl=Rn(Af),Rf=y({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iu=Rn(Rf),cs=y({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),Cf=Rn(cs),If=y({},xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nf=Rn(If),xf=y({},io,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),al=Rn(xf),nr=y({},xt,{newState:0,oldState:0}),Df=Rn(nr),Of=[9,13,27,32],Mi=fi&&"CompositionEvent"in window,f=null;fi&&"documentMode"in document&&(f=document.documentMode);var _=fi&&"TextEvent"in window&&!f,v=fi&&(!Mi||f&&8<f&&11>=f),S=" ",X=!1;function se(r,s){switch(r){case"keyup":return Of.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var yt=!1;function yn(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(X=!0,S);case"textInput":return r=s.data,r===S&&X?null:r;default:return null}}function _t(r,s){if(yt)return r==="compositionend"||!Mi&&se(r,s)?(r=wu(),us=Xs=xi=null,yt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Cn[r.type]:s==="textarea"}function fs(r,s,o,u){os?ls?ls.push(u):ls=[u]:os=u,s=_h(s,"onChange"),0<s.length&&(o=new Jo("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Pn=null,Pi=null;function Nu(r){rb(r,0)}function kf(r){var s=jt(r);if(vu(s))return r}function Sv(r,s){if(r==="change")return s}var Av=!1;if(fi){var jm;if(fi){var zm="oninput"in document;if(!zm){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),zm=typeof Rv.oninput=="function"}jm=zm}else jm=!1;Av=jm&&(!document.documentMode||9<document.documentMode)}function Cv(){Pn&&(Pn.detachEvent("onpropertychange",Iv),Pi=Pn=null)}function Iv(r){if(r.propertyName==="value"&&kf(Pi)){var s=[];fs(s,Pi,r,Br(r)),vf(Nu,s)}}function EC(r,s,o){r==="focusin"?(Cv(),Pn=s,Pi=o,Pn.attachEvent("onpropertychange",Iv)):r==="focusout"&&Cv()}function TC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return kf(Pi)}function bC(r,s){if(r==="click")return kf(s)}function wC(r,s){if(r==="input"||r==="change")return kf(s)}function SC(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var wr=typeof Object.is=="function"?Object.is:SC;function xu(r,s){if(wr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!vr.call(s,d)||!wr(r[d],s[d]))return!1}return!0}function Nv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xv(r,s){var o=Nv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Nv(o)}}function Dv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Dv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Ov(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Za(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Za(r.document)}return s}function Bm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var AC=fi&&"documentMode"in document&&11>=document.documentMode,ol=null,Fm=null,Du=null,qm=!1;function kv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qm||ol==null||ol!==Za(u)||(u=ol,"selectionStart"in u&&Bm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Du&&xu(Du,u)||(Du=u,u=_h(Fm,"onSelect"),0<u.length&&(s=new Jo("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=ol)))}function lo(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var ll={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},Hm={},Mv={};fi&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function uo(r){if(Hm[r])return Hm[r];if(!ll[r])return r;var s=ll[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Mv)return Hm[r]=s[o];return r}var Pv=uo("animationend"),Vv=uo("animationiteration"),Lv=uo("animationstart"),RC=uo("transitionrun"),CC=uo("transitionstart"),IC=uo("transitioncancel"),Uv=uo("transitionend"),jv=new Map,Gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gm.push("scrollEnd");function hi(r,s){jv.set(r,s),Mn(s,[r])}var zv=new WeakMap;function Hr(r,s){if(typeof r=="object"&&r!==null){var o=zv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Ys(s)},zv.set(r,s),s)}return{value:r,source:s,stack:Ys(s)}}var Gr=[],ul=0,$m=0;function Mf(){for(var r=ul,s=$m=ul=0;s<r;){var o=Gr[s];Gr[s++]=null;var u=Gr[s];Gr[s++]=null;var d=Gr[s];Gr[s++]=null;var g=Gr[s];if(Gr[s++]=null,u!==null&&d!==null){var E=u.pending;E===null?d.next=d:(d.next=E.next,E.next=d),u.pending=d}g!==0&&Bv(o,d,g)}}function Pf(r,s,o,u){Gr[ul++]=r,Gr[ul++]=s,Gr[ul++]=o,Gr[ul++]=u,$m|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Km(r,s,o,u){return Pf(r,s,o,u),Vf(r)}function cl(r,s){return Pf(r,null,null,s),Vf(r)}function Bv(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var d=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-Tt(o),r=g.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=o|536870912),g):null}function Vf(r){if(50<nc)throw nc=0,Jp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var fl={};function NC(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(r,s,o,u){return new NC(r,s,o,u)}function Ym(r){return r=r.prototype,!(!r||!r.isReactComponent)}function hs(r,s){var o=r.alternate;return o===null?(o=Sr(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Fv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Lf(r,s,o,u,d,g){var E=0;if(u=r,typeof r=="function")Ym(r)&&(E=1);else if(typeof r=="string")E=DI(r,o,ke.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=Sr(31,o,s,d),r.elementType=x,r.lanes=g,r;case D:return co(o.children,d,g,s);case V:E=8,d|=24;break;case z:return r=Sr(12,o,s,d|2),r.elementType=z,r.lanes=g,r;case K:return r=Sr(13,o,s,d),r.elementType=K,r.lanes=g,r;case M:return r=Sr(19,o,s,d),r.elementType=M,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case U:case H:E=10;break e;case Z:E=9;break e;case ne:E=11;break e;case C:E=14;break e;case R:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Sr(E,o,s,d),s.elementType=r,s.type=u,s.lanes=g,s}function co(r,s,o,u){return r=Sr(7,r,u,s),r.lanes=o,r}function Qm(r,s,o){return r=Sr(6,r,null,s),r.lanes=o,r}function Xm(r,s,o){return s=Sr(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var hl=[],dl=0,Uf=null,jf=0,$r=[],Kr=0,fo=null,ds=1,ms="";function ho(r,s){hl[dl++]=jf,hl[dl++]=Uf,Uf=r,jf=s}function qv(r,s,o){$r[Kr++]=ds,$r[Kr++]=ms,$r[Kr++]=fo,fo=r;var u=ds;r=ms;var d=32-Tt(u)-1;u&=~(1<<d),o+=1;var g=32-Tt(s)+d;if(30<g){var E=d-d%5;g=(u&(1<<E)-1).toString(32),u>>=E,d-=E,ds=1<<32-Tt(s)+d|o<<d|u,ms=g+r}else ds=1<<g|o<<d|u,ms=r}function Zm(r){r.return!==null&&(ho(r,1),qv(r,1,0))}function Wm(r){for(;r===Uf;)Uf=hl[--dl],hl[dl]=null,jf=hl[--dl],hl[dl]=null;for(;r===fo;)fo=$r[--Kr],$r[Kr]=null,ms=$r[--Kr],$r[Kr]=null,ds=$r[--Kr],$r[Kr]=null}var rr=null,Zt=null,Nt=!1,mo=null,Vi=!1,Jm=Error(i(519));function po(r){var s=Error(i(418,""));throw Mu(Hr(s,r)),Jm}function Hv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[he]=r,s[ge]=u,o){case"dialog":dt("cancel",s),dt("close",s);break;case"iframe":case"object":case"embed":dt("load",s);break;case"video":case"audio":for(o=0;o<ic.length;o++)dt(ic[o],s);break;case"source":dt("error",s);break;case"img":case"image":case"link":dt("error",s),dt("load",s);break;case"details":dt("toggle",s);break;case"input":dt("invalid",s),Wa(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Zo(s);break;case"select":dt("invalid",s);break;case"textarea":dt("invalid",s),Ja(s,u.value,u.defaultValue,u.children),Zo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||ob(s.textContent,o)?(u.popover!=null&&(dt("beforetoggle",s),dt("toggle",s)),u.onScroll!=null&&dt("scroll",s),u.onScrollEnd!=null&&dt("scrollend",s),u.onClick!=null&&(s.onclick=vh),s=!0):s=!1,s||po(r)}function Gv(r){for(rr=r.return;rr;)switch(rr.tag){case 5:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:rr=rr.return}}function Ou(r){if(r!==rr)return!1;if(!Nt)return Gv(r),Nt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||pg(r.type,r.memoizedProps)),o=!o),o&&Zt&&po(r),Gv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Zt=mi(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Zt=null}}else s===27?(s=Zt,ha(r.type)?(r=vg,vg=null,Zt=r):Zt=s):Zt=rr?mi(r.stateNode.nextSibling):null;return!0}function ku(){Zt=rr=null,Nt=!1}function $v(){var r=mo;return r!==null&&(fr===null?fr=r:fr.push.apply(fr,r),mo=null),r}function Mu(r){mo===null?mo=[r]:mo.push(r)}var ep=le(null),go=null,ps=null;function Zs(r,s,o){me(ep,s._currentValue),s._currentValue=o}function gs(r){r._currentValue=ep.current,_e(ep)}function tp(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function np(r,s,o,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var E=d.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=d;for(var O=0;O<s.length;O++)if(w.context===s[O]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),tp(g.return,o,r),u||(E=null);break e}g=w.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),tp(E,o,r),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===r){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Pu(r,s,o,u){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var w=d.type;wr(d.pendingProps.value,E.value)||(r!==null?r.push(w):r=[w])}}else if(d===$t.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(cc):r=[cc])}d=d.return}r!==null&&np(s,r,o,u),s.flags|=262144}function zf(r){for(r=r.firstContext;r!==null;){if(!wr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function yo(r){go=r,ps=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Hn(r){return Kv(go,r)}function Bf(r,s){return go===null&&yo(r),Kv(r,s)}function Kv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ps===null){if(r===null)throw Error(i(308));ps=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ps=ps.next=s;return o}var xC=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},DC=n.unstable_scheduleCallback,OC=n.unstable_NormalPriority,vn={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rp(){return{controller:new xC,data:new Map,refCount:0}}function Vu(r){r.refCount--,r.refCount===0&&DC(OC,function(){r.controller.abort()})}var Lu=null,ip=0,ml=0,pl=null;function kC(r,s){if(Lu===null){var o=Lu=[];ip=0,ml=ag(),pl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ip++,s.then(Yv,Yv),s}function Yv(){if(--ip===0&&Lu!==null){pl!==null&&(pl.status="fulfilled");var r=Lu;Lu=null,ml=0,pl=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function MC(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Qv=Q.S;Q.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&kC(r,s),Qv!==null&&Qv(r,s)};var _o=le(null);function sp(){var r=_o.current;return r!==null?r:qt.pooledCache}function Ff(r,s){s===null?me(_o,_o.current):me(_o,s.pool)}function Xv(){var r=sp();return r===null?null:{parent:vn._currentValue,pool:r}}var Uu=Error(i(460)),Zv=Error(i(474)),qf=Error(i(542)),ap={then:function(){}};function Wv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Hf(){}function Jv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Hf,Hf),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,tE(r),r;default:if(typeof s.status=="string")s.then(Hf,Hf);else{if(r=qt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,tE(r),r}throw ju=s,Uu}}var ju=null;function eE(){if(ju===null)throw Error(i(459));var r=ju;return ju=null,r}function tE(r){if(r===Uu||r===qf)throw Error(i(483))}var Ws=!1;function op(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Js(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ea(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(kt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Vf(r),Bv(r,null,o),s}return Pf(r,u,s,o),Vf(r)}function zu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Ci(r,o)}}function up(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?d=g=s:g=g.next=s}else d=g=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var cp=!1;function Bu(){if(cp){var r=pl;if(r!==null)throw r}}function Fu(r,s,o,u){cp=!1;var d=r.updateQueue;Ws=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var O=w,ee=O.next;O.next=null,E===null?g=ee:E.next=ee,E=O;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,w=oe.lastBaseUpdate,w!==E&&(w===null?oe.firstBaseUpdate=ee:w.next=ee,oe.lastBaseUpdate=O))}if(g!==null){var fe=d.baseState;E=0,oe=ee=O=null,w=g;do{var re=w.lane&-536870913,ie=re!==w.lane;if(ie?(vt&re)===re:(u&re)===re){re!==0&&re===ml&&(cp=!0),oe!==null&&(oe=oe.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var We=r,$e=w;re=s;var Ut=o;switch($e.tag){case 1:if(We=$e.payload,typeof We=="function"){fe=We.call(Ut,fe,re);break e}fe=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=$e.payload,re=typeof We=="function"?We.call(Ut,fe,re):We,re==null)break e;fe=y({},fe,re);break e;case 2:Ws=!0}}re=w.callback,re!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=d.callbacks,ie===null?d.callbacks=[re]:ie.push(re))}else ie={lane:re,tag:w.tag,payload:w.payload,callback:w.callback,next:null},oe===null?(ee=oe=ie,O=fe):oe=oe.next=ie,E|=re;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;ie=w,w=ie.next,ie.next=null,d.lastBaseUpdate=ie,d.shared.pending=null}}while(!0);oe===null&&(O=fe),d.baseState=O,d.firstBaseUpdate=ee,d.lastBaseUpdate=oe,g===null&&(d.shared.lanes=0),la|=E,r.lanes=E,r.memoizedState=fe}}function nE(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function rE(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)nE(o[r],s)}var gl=le(null),Gf=le(0);function iE(r,s){r=ws,me(Gf,r),me(gl,s),ws=r|s.baseLanes}function fp(){me(Gf,ws),me(gl,gl.current)}function hp(){ws=Gf.current,_e(gl),_e(Gf)}var ta=0,lt=null,Vt=null,un=null,$f=!1,yl=!1,vo=!1,Kf=0,qu=0,_l=null,PC=0;function tn(){throw Error(i(321))}function dp(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!wr(r[o],s[o]))return!1;return!0}function mp(r,s,o,u,d,g){return ta=g,lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=r===null||r.memoizedState===null?BE:FE,vo=!1,g=o(u,d),vo=!1,yl&&(g=aE(s,o,u,d)),sE(r),g}function sE(r){Q.H=Jf;var s=Vt!==null&&Vt.next!==null;if(ta=0,un=Vt=lt=null,$f=!1,qu=0,_l=null,s)throw Error(i(300));r===null||In||(r=r.dependencies,r!==null&&zf(r)&&(In=!0))}function aE(r,s,o,u){lt=r;var d=0;do{if(yl&&(_l=null),qu=0,yl=!1,25<=d)throw Error(i(301));if(d+=1,un=Vt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Q.H=FC,g=s(o,u)}while(yl);return g}function VC(){var r=Q.H,s=r.useState()[0];return s=typeof s.then=="function"?Hu(s):s,r=r.useState()[0],(Vt!==null?Vt.memoizedState:null)!==r&&(lt.flags|=1024),s}function pp(){var r=Kf!==0;return Kf=0,r}function gp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function yp(r){if($f){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$f=!1}ta=0,un=Vt=lt=null,yl=!1,qu=Kf=0,_l=null}function ur(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?lt.memoizedState=un=r:un=un.next=r,un}function cn(){if(Vt===null){var r=lt.alternate;r=r!==null?r.memoizedState:null}else r=Vt.next;var s=un===null?lt.memoizedState:un.next;if(s!==null)un=s,Vt=r;else{if(r===null)throw lt.alternate===null?Error(i(467)):Error(i(310));Vt=r,r={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},un===null?lt.memoizedState=un=r:un=un.next=r}return un}function _p(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hu(r){var s=qu;return qu+=1,_l===null&&(_l=[]),r=Jv(_l,r,s),s=lt,(un===null?s.memoizedState:un.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?BE:FE),r}function Yf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Hu(r);if(r.$$typeof===H)return Hn(r)}throw Error(i(438,String(r)))}function vp(r){var s=null,o=lt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=_p(),lt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=B;return s.index++,o}function ys(r,s){return typeof s=="function"?s(r):s}function Qf(r){var s=cn();return Ep(s,Vt,r)}function Ep(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=r.baseQueue,g=u.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}s.baseQueue=d=g,u.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var w=E=null,O=null,ee=s,oe=!1;do{var fe=ee.lane&-536870913;if(fe!==ee.lane?(vt&fe)===fe:(ta&fe)===fe){var re=ee.revertLane;if(re===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),fe===ml&&(oe=!0);else if((ta&re)===re){ee=ee.next,re===ml&&(oe=!0);continue}else fe={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(w=O=fe,E=g):O=O.next=fe,lt.lanes|=re,la|=re;fe=ee.action,vo&&o(g,fe),g=ee.hasEagerState?ee.eagerState:o(g,fe)}else re={lane:fe,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(w=O=re,E=g):O=O.next=re,lt.lanes|=fe,la|=fe;ee=ee.next}while(ee!==null&&ee!==s);if(O===null?E=g:O.next=w,!wr(g,r.memoizedState)&&(In=!0,oe&&(o=pl,o!==null)))throw o;r.memoizedState=g,r.baseState=E,r.baseQueue=O,u.lastRenderedState=g}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Tp(r){var s=cn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,d=o.pending,g=s.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);wr(g,s.memoizedState)||(In=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function oE(r,s,o){var u=lt,d=cn(),g=Nt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!wr((Vt||d).memoizedState,o);E&&(d.memoizedState=o,In=!0),d=d.queue;var w=cE.bind(null,u,d,r);if(Gu(2048,8,w,[r]),d.getSnapshot!==s||E||un!==null&&un.memoizedState.tag&1){if(u.flags|=2048,vl(9,Xf(),uE.bind(null,u,d,o,s),null),qt===null)throw Error(i(349));g||(ta&124)!==0||lE(u,s,o)}return o}function lE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=lt.updateQueue,s===null?(s=_p(),lt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function uE(r,s,o,u){s.value=o,s.getSnapshot=u,fE(s)&&hE(r)}function cE(r,s,o){return o(function(){fE(s)&&hE(r)})}function fE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!wr(r,o)}catch{return!0}}function hE(r){var s=cl(r,2);s!==null&&Nr(s,r,2)}function bp(r){var s=ur();if(typeof r=="function"){var o=r;if(r=o(),vo){st(!0);try{o()}finally{st(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:r},s}function dE(r,s,o,u){return r.baseState=o,Ep(r,Vt,typeof u=="function"?u:ys)}function LC(r,s,o,u,d){if(Wf(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};Q.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,mE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function mE(r,s){var o=s.action,u=s.payload,d=r.state;if(s.isTransition){var g=Q.T,E={};Q.T=E;try{var w=o(d,u),O=Q.S;O!==null&&O(E,w),pE(r,s,w)}catch(ee){wp(r,s,ee)}finally{Q.T=g}}else try{g=o(d,u),pE(r,s,g)}catch(ee){wp(r,s,ee)}}function pE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){gE(r,s,u)},function(u){return wp(r,s,u)}):gE(r,s,o)}function gE(r,s,o){s.status="fulfilled",s.value=o,yE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,mE(r,o)))}function wp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,yE(s),s=s.next;while(s!==u)}r.action=null}function yE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function _E(r,s){return s}function vE(r,s){if(Nt){var o=qt.formState;if(o!==null){e:{var u=lt;if(Nt){if(Zt){t:{for(var d=Zt,g=Vi;d.nodeType!==8;){if(!g){d=null;break t}if(d=mi(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Zt=mi(d.nextSibling),u=d.data==="F!";break e}}po(u)}u=!1}u&&(s=o[0])}}return o=ur(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_E,lastRenderedState:s},o.queue=u,o=UE.bind(null,lt,u),u.dispatch=o,u=bp(!1),g=Ip.bind(null,lt,!1,u.queue),u=ur(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,o=LC.bind(null,lt,d,g,o),d.dispatch=o,u.memoizedState=r,[s,o,!1]}function EE(r){var s=cn();return TE(s,Vt,r)}function TE(r,s,o){if(s=Ep(r,s,_E)[0],r=Qf(ys)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Hu(s)}catch(E){throw E===Uu?qf:E}else u=s;s=cn();var d=s.queue,g=d.dispatch;return o!==s.memoizedState&&(lt.flags|=2048,vl(9,Xf(),UC.bind(null,d,o),null)),[u,g,r]}function UC(r,s){r.action=s}function bE(r){var s=cn(),o=Vt;if(o!==null)return TE(s,o,r);cn(),s=s.memoizedState,o=cn();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function vl(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=lt.updateQueue,s===null&&(s=_p(),lt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Xf(){return{destroy:void 0,resource:void 0}}function wE(){return cn().memoizedState}function Zf(r,s,o,u){var d=ur();u=u===void 0?null:u,lt.flags|=r,d.memoizedState=vl(1|s,Xf(),o,u)}function Gu(r,s,o,u){var d=cn();u=u===void 0?null:u;var g=d.memoizedState.inst;Vt!==null&&u!==null&&dp(u,Vt.memoizedState.deps)?d.memoizedState=vl(s,g,o,u):(lt.flags|=r,d.memoizedState=vl(1|s,g,o,u))}function SE(r,s){Zf(8390656,8,r,s)}function AE(r,s){Gu(2048,8,r,s)}function RE(r,s){return Gu(4,2,r,s)}function CE(r,s){return Gu(4,4,r,s)}function IE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function NE(r,s,o){o=o!=null?o.concat([r]):null,Gu(4,4,IE.bind(null,s,r),o)}function Sp(){}function xE(r,s){var o=cn();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&dp(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function DE(r,s){var o=cn();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&dp(s,u[1]))return u[0];if(u=r(),vo){st(!0);try{r()}finally{st(!1)}}return o.memoizedState=[u,s],u}function Ap(r,s,o){return o===void 0||(ta&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=MT(),lt.lanes|=r,la|=r,o)}function OE(r,s,o,u){return wr(o,s)?o:gl.current!==null?(r=Ap(r,o,u),wr(r,s)||(In=!0),r):(ta&42)===0?(In=!0,r.memoizedState=o):(r=MT(),lt.lanes|=r,la|=r,s)}function kE(r,s,o,u,d){var g=pe.p;pe.p=g!==0&&8>g?g:8;var E=Q.T,w={};Q.T=w,Ip(r,!1,s,o);try{var O=d(),ee=Q.S;if(ee!==null&&ee(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var oe=MC(O,u);$u(r,s,oe,Ir(r))}else $u(r,s,u,Ir(r))}catch(fe){$u(r,s,{then:function(){},status:"rejected",reason:fe},Ir())}finally{pe.p=g,Q.T=E}}function jC(){}function Rp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var d=ME(r).queue;kE(r,d,s,Se,o===null?jC:function(){return PE(r),o(u)})}function ME(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:Se},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function PE(r){var s=ME(r).next.queue;$u(r,s,{},Ir())}function Cp(){return Hn(cc)}function VE(){return cn().memoizedState}function LE(){return cn().memoizedState}function zC(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ir();r=Js(o);var u=ea(s,r,o);u!==null&&(Nr(u,s,o),zu(u,s,o)),s={cache:rp()},r.payload=s;return}s=s.return}}function BC(r,s,o){var u=Ir();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Wf(r)?jE(s,o):(o=Km(r,s,o,u),o!==null&&(Nr(o,r,u),zE(o,s,u)))}function UE(r,s,o){var u=Ir();$u(r,s,o,u)}function $u(r,s,o,u){var d={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Wf(r))jE(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,w=g(E,o);if(d.hasEagerState=!0,d.eagerState=w,wr(w,E))return Pf(r,s,d,0),qt===null&&Mf(),!1}catch{}finally{}if(o=Km(r,s,d,u),o!==null)return Nr(o,r,u),zE(o,s,u),!0}return!1}function Ip(r,s,o,u){if(u={lane:2,revertLane:ag(),action:u,hasEagerState:!1,eagerState:null,next:null},Wf(r)){if(s)throw Error(i(479))}else s=Km(r,o,u,2),s!==null&&Nr(s,r,2)}function Wf(r){var s=r.alternate;return r===lt||s!==null&&s===lt}function jE(r,s){yl=$f=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function zE(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Ci(r,o)}}var Jf={readContext:Hn,use:Yf,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},BE={readContext:Hn,use:Yf,useCallback:function(r,s){return ur().memoizedState=[r,s===void 0?null:s],r},useContext:Hn,useEffect:SE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Zf(4194308,4,IE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Zf(4194308,4,r,s)},useInsertionEffect:function(r,s){Zf(4,2,r,s)},useMemo:function(r,s){var o=ur();s=s===void 0?null:s;var u=r();if(vo){st(!0);try{r()}finally{st(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=ur();if(o!==void 0){var d=o(s);if(vo){st(!0);try{o(s)}finally{st(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=BC.bind(null,lt,r),[u.memoizedState,r]},useRef:function(r){var s=ur();return r={current:r},s.memoizedState=r},useState:function(r){r=bp(r);var s=r.queue,o=UE.bind(null,lt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Sp,useDeferredValue:function(r,s){var o=ur();return Ap(o,r,s)},useTransition:function(){var r=bp(!1);return r=kE.bind(null,lt,r.queue,!0,!1),ur().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=lt,d=ur();if(Nt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),qt===null)throw Error(i(349));(vt&124)!==0||lE(u,s,o)}d.memoizedState=o;var g={value:o,getSnapshot:s};return d.queue=g,SE(cE.bind(null,u,g,r),[r]),u.flags|=2048,vl(9,Xf(),uE.bind(null,u,g,o,s),null),o},useId:function(){var r=ur(),s=qt.identifierPrefix;if(Nt){var o=ms,u=ds;o=(u&~(1<<32-Tt(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Kf++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=PC++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:Cp,useFormState:vE,useActionState:vE,useOptimistic:function(r){var s=ur();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Ip.bind(null,lt,!0,o),o.dispatch=s,[r,s]},useMemoCache:vp,useCacheRefresh:function(){return ur().memoizedState=zC.bind(null,lt)}},FE={readContext:Hn,use:Yf,useCallback:xE,useContext:Hn,useEffect:AE,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:CE,useMemo:DE,useReducer:Qf,useRef:wE,useState:function(){return Qf(ys)},useDebugValue:Sp,useDeferredValue:function(r,s){var o=cn();return OE(o,Vt.memoizedState,r,s)},useTransition:function(){var r=Qf(ys)[0],s=cn().memoizedState;return[typeof r=="boolean"?r:Hu(r),s]},useSyncExternalStore:oE,useId:VE,useHostTransitionStatus:Cp,useFormState:EE,useActionState:EE,useOptimistic:function(r,s){var o=cn();return dE(o,Vt,r,s)},useMemoCache:vp,useCacheRefresh:LE},FC={readContext:Hn,use:Yf,useCallback:xE,useContext:Hn,useEffect:AE,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:CE,useMemo:DE,useReducer:Tp,useRef:wE,useState:function(){return Tp(ys)},useDebugValue:Sp,useDeferredValue:function(r,s){var o=cn();return Vt===null?Ap(o,r,s):OE(o,Vt.memoizedState,r,s)},useTransition:function(){var r=Tp(ys)[0],s=cn().memoizedState;return[typeof r=="boolean"?r:Hu(r),s]},useSyncExternalStore:oE,useId:VE,useHostTransitionStatus:Cp,useFormState:bE,useActionState:bE,useOptimistic:function(r,s){var o=cn();return Vt!==null?dE(o,Vt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:vp,useCacheRefresh:LE},El=null,Ku=0;function eh(r){var s=Ku;return Ku+=1,El===null&&(El=[]),Jv(El,r,s)}function Yu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function th(r,s){throw s.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function qE(r){var s=r._init;return s(r._payload)}function HE(r){function s($,G){if(r){var W=$.deletions;W===null?($.deletions=[G],$.flags|=16):W.push(G)}}function o($,G){if(!r)return null;for(;G!==null;)s($,G),G=G.sibling;return null}function u($){for(var G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function d($,G){return $=hs($,G),$.index=0,$.sibling=null,$}function g($,G,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<G?($.flags|=67108866,G):W):($.flags|=67108866,G)):($.flags|=1048576,G)}function E($){return r&&$.alternate===null&&($.flags|=67108866),$}function w($,G,W,ce){return G===null||G.tag!==6?(G=Qm(W,$.mode,ce),G.return=$,G):(G=d(G,W),G.return=$,G)}function O($,G,W,ce){var De=W.type;return De===D?oe($,G,W.props.children,ce,W.key):G!==null&&(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===R&&qE(De)===G.type)?(G=d(G,W.props),Yu(G,W),G.return=$,G):(G=Lf(W.type,W.key,W.props,null,$.mode,ce),Yu(G,W),G.return=$,G)}function ee($,G,W,ce){return G===null||G.tag!==4||G.stateNode.containerInfo!==W.containerInfo||G.stateNode.implementation!==W.implementation?(G=Xm(W,$.mode,ce),G.return=$,G):(G=d(G,W.children||[]),G.return=$,G)}function oe($,G,W,ce,De){return G===null||G.tag!==7?(G=co(W,$.mode,ce,De),G.return=$,G):(G=d(G,W),G.return=$,G)}function fe($,G,W){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Qm(""+G,$.mode,W),G.return=$,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return W=Lf(G.type,G.key,G.props,null,$.mode,W),Yu(W,G),W.return=$,W;case A:return G=Xm(G,$.mode,W),G.return=$,G;case R:var ce=G._init;return G=ce(G._payload),fe($,G,W)}if(Fe(G)||P(G))return G=co(G,$.mode,W,null),G.return=$,G;if(typeof G.then=="function")return fe($,eh(G),W);if(G.$$typeof===H)return fe($,Bf($,G),W);th($,G)}return null}function re($,G,W,ce){var De=G!==null?G.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return De!==null?null:w($,G,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return W.key===De?O($,G,W,ce):null;case A:return W.key===De?ee($,G,W,ce):null;case R:return De=W._init,W=De(W._payload),re($,G,W,ce)}if(Fe(W)||P(W))return De!==null?null:oe($,G,W,ce,null);if(typeof W.then=="function")return re($,G,eh(W),ce);if(W.$$typeof===H)return re($,G,Bf($,W),ce);th($,W)}return null}function ie($,G,W,ce,De){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $=$.get(W)||null,w(G,$,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return $=$.get(ce.key===null?W:ce.key)||null,O(G,$,ce,De);case A:return $=$.get(ce.key===null?W:ce.key)||null,ee(G,$,ce,De);case R:var ut=ce._init;return ce=ut(ce._payload),ie($,G,W,ce,De)}if(Fe(ce)||P(ce))return $=$.get(W)||null,oe(G,$,ce,De,null);if(typeof ce.then=="function")return ie($,G,W,eh(ce),De);if(ce.$$typeof===H)return ie($,G,W,Bf(G,ce),De);th(G,ce)}return null}function We($,G,W,ce){for(var De=null,ut=null,Be=G,Ye=G=0,xn=null;Be!==null&&Ye<W.length;Ye++){Be.index>Ye?(xn=Be,Be=null):xn=Be.sibling;var St=re($,Be,W[Ye],ce);if(St===null){Be===null&&(Be=xn);break}r&&Be&&St.alternate===null&&s($,Be),G=g(St,G,Ye),ut===null?De=St:ut.sibling=St,ut=St,Be=xn}if(Ye===W.length)return o($,Be),Nt&&ho($,Ye),De;if(Be===null){for(;Ye<W.length;Ye++)Be=fe($,W[Ye],ce),Be!==null&&(G=g(Be,G,Ye),ut===null?De=Be:ut.sibling=Be,ut=Be);return Nt&&ho($,Ye),De}for(Be=u(Be);Ye<W.length;Ye++)xn=ie(Be,$,Ye,W[Ye],ce),xn!==null&&(r&&xn.alternate!==null&&Be.delete(xn.key===null?Ye:xn.key),G=g(xn,G,Ye),ut===null?De=xn:ut.sibling=xn,ut=xn);return r&&Be.forEach(function(ya){return s($,ya)}),Nt&&ho($,Ye),De}function $e($,G,W,ce){if(W==null)throw Error(i(151));for(var De=null,ut=null,Be=G,Ye=G=0,xn=null,St=W.next();Be!==null&&!St.done;Ye++,St=W.next()){Be.index>Ye?(xn=Be,Be=null):xn=Be.sibling;var ya=re($,Be,St.value,ce);if(ya===null){Be===null&&(Be=xn);break}r&&Be&&ya.alternate===null&&s($,Be),G=g(ya,G,Ye),ut===null?De=ya:ut.sibling=ya,ut=ya,Be=xn}if(St.done)return o($,Be),Nt&&ho($,Ye),De;if(Be===null){for(;!St.done;Ye++,St=W.next())St=fe($,St.value,ce),St!==null&&(G=g(St,G,Ye),ut===null?De=St:ut.sibling=St,ut=St);return Nt&&ho($,Ye),De}for(Be=u(Be);!St.done;Ye++,St=W.next())St=ie(Be,$,Ye,St.value,ce),St!==null&&(r&&St.alternate!==null&&Be.delete(St.key===null?Ye:St.key),G=g(St,G,Ye),ut===null?De=St:ut.sibling=St,ut=St);return r&&Be.forEach(function(qI){return s($,qI)}),Nt&&ho($,Ye),De}function Ut($,G,W,ce){if(typeof W=="object"&&W!==null&&W.type===D&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case b:e:{for(var De=W.key;G!==null;){if(G.key===De){if(De=W.type,De===D){if(G.tag===7){o($,G.sibling),ce=d(G,W.props.children),ce.return=$,$=ce;break e}}else if(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===R&&qE(De)===G.type){o($,G.sibling),ce=d(G,W.props),Yu(ce,W),ce.return=$,$=ce;break e}o($,G);break}else s($,G);G=G.sibling}W.type===D?(ce=co(W.props.children,$.mode,ce,W.key),ce.return=$,$=ce):(ce=Lf(W.type,W.key,W.props,null,$.mode,ce),Yu(ce,W),ce.return=$,$=ce)}return E($);case A:e:{for(De=W.key;G!==null;){if(G.key===De)if(G.tag===4&&G.stateNode.containerInfo===W.containerInfo&&G.stateNode.implementation===W.implementation){o($,G.sibling),ce=d(G,W.children||[]),ce.return=$,$=ce;break e}else{o($,G);break}else s($,G);G=G.sibling}ce=Xm(W,$.mode,ce),ce.return=$,$=ce}return E($);case R:return De=W._init,W=De(W._payload),Ut($,G,W,ce)}if(Fe(W))return We($,G,W,ce);if(P(W)){if(De=P(W),typeof De!="function")throw Error(i(150));return W=De.call(W),$e($,G,W,ce)}if(typeof W.then=="function")return Ut($,G,eh(W),ce);if(W.$$typeof===H)return Ut($,G,Bf($,W),ce);th($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,G!==null&&G.tag===6?(o($,G.sibling),ce=d(G,W),ce.return=$,$=ce):(o($,G),ce=Qm(W,$.mode,ce),ce.return=$,$=ce),E($)):o($,G)}return function($,G,W,ce){try{Ku=0;var De=Ut($,G,W,ce);return El=null,De}catch(Be){if(Be===Uu||Be===qf)throw Be;var ut=Sr(29,Be,null,$.mode);return ut.lanes=ce,ut.return=$,ut}finally{}}}var Tl=HE(!0),GE=HE(!1),Yr=le(null),Li=null;function na(r){var s=r.alternate;me(En,En.current&1),me(Yr,r),Li===null&&(s===null||gl.current!==null||s.memoizedState!==null)&&(Li=r)}function $E(r){if(r.tag===22){if(me(En,En.current),me(Yr,r),Li===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Li=r)}}else ra()}function ra(){me(En,En.current),me(Yr,Yr.current)}function _s(r){_e(Yr),Li===r&&(Li=null),_e(En)}var En=le(0);function nh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||_g(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Np(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var xp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Ir(),d=Js(u);d.payload=s,o!=null&&(d.callback=o),s=ea(r,d,u),s!==null&&(Nr(s,r,u),zu(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Ir(),d=Js(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=ea(r,d,u),s!==null&&(Nr(s,r,u),zu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Ir(),u=Js(o);u.tag=2,s!=null&&(u.callback=s),s=ea(r,u,o),s!==null&&(Nr(s,r,o),zu(s,r,o))}};function KE(r,s,o,u,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!xu(o,u)||!xu(d,g):!0}function YE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&xp.enqueueReplaceState(s,s.state,null)}function Eo(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}var rh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function QE(r){rh(r)}function XE(r){console.error(r)}function ZE(r){rh(r)}function ih(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function WE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Dp(r,s,o){return o=Js(o),o.tag=3,o.payload={element:null},o.callback=function(){ih(r,s)},o}function JE(r){return r=Js(r),r.tag=3,r}function eT(r,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;r.payload=function(){return d(g)},r.callback=function(){WE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){WE(s,o,u),typeof d!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function qC(r,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Pu(s,o,d,!0),o=Yr.current,o!==null){switch(o.tag){case 13:return Li===null?tg():o.alternate===null&&Wt===0&&(Wt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===ap?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),rg(r,u,d)),!1;case 22:return o.flags|=65536,u===ap?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),rg(r,u,d)),!1}throw Error(i(435,o.tag))}return rg(r,u,d),tg(),!1}if(Nt)return s=Yr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Jm&&(r=Error(i(422),{cause:u}),Mu(Hr(r,o)))):(u!==Jm&&(s=Error(i(423),{cause:u}),Mu(Hr(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=Hr(u,o),d=Dp(r.stateNode,u,d),up(r,d),Wt!==4&&(Wt=2)),!1;var g=Error(i(520),{cause:u});if(g=Hr(g,o),tc===null?tc=[g]:tc.push(g),Wt!==4&&(Wt=2),s===null)return!0;u=Hr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Dp(o.stateNode,u,r),up(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ua===null||!ua.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=JE(d),eT(d,r,o,u),up(o,d),!1}o=o.return}while(o!==null);return!1}var tT=Error(i(461)),In=!1;function Vn(r,s,o,u){s.child=r===null?GE(s,null,o,u):Tl(s,r.child,o,u)}function nT(r,s,o,u,d){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var w in u)w!=="ref"&&(E[w]=u[w])}else E=u;return yo(s),u=mp(r,s,o,E,g,d),w=pp(),r!==null&&!In?(gp(r,s,d),vs(r,s,d)):(Nt&&w&&Zm(s),s.flags|=1,Vn(r,s,u,d),s.child)}function rT(r,s,o,u,d){if(r===null){var g=o.type;return typeof g=="function"&&!Ym(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,iT(r,s,g,u,d)):(r=Lf(o.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!jp(r,d)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:xu,o(E,u)&&r.ref===s.ref)return vs(r,s,d)}return s.flags|=1,r=hs(g,u),r.ref=s.ref,r.return=s,s.child=r}function iT(r,s,o,u,d){if(r!==null){var g=r.memoizedProps;if(xu(g,u)&&r.ref===s.ref)if(In=!1,s.pendingProps=u=g,jp(r,d))(r.flags&131072)!==0&&(In=!0);else return s.lanes=r.lanes,vs(r,s,d)}return Op(r,s,o,u,d)}function sT(r,s,o){var u=s.pendingProps,d=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,r!==null){for(d=s.child=r.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;s.childLanes=g&~u}else s.childLanes=0,s.child=null;return aT(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ff(s,g!==null?g.cachePool:null),g!==null?iE(s,g):fp(),$E(s);else return s.lanes=s.childLanes=536870912,aT(r,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(Ff(s,g.cachePool),iE(s,g),ra(),s.memoizedState=null):(r!==null&&Ff(s,null),fp(),ra());return Vn(r,s,d,o),s.child}function aT(r,s,o,u){var d=sp();return d=d===null?null:{parent:vn._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},r!==null&&Ff(s,null),fp(),$E(s),r!==null&&Pu(r,s,u,!0),null}function sh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Op(r,s,o,u,d){return yo(s),o=mp(r,s,o,u,void 0,d),u=pp(),r!==null&&!In?(gp(r,s,d),vs(r,s,d)):(Nt&&u&&Zm(s),s.flags|=1,Vn(r,s,o,d),s.child)}function oT(r,s,o,u,d,g){return yo(s),s.updateQueue=null,o=aE(s,u,o,d),sE(r),u=pp(),r!==null&&!In?(gp(r,s,g),vs(r,s,g)):(Nt&&u&&Zm(s),s.flags|=1,Vn(r,s,o,g),s.child)}function lT(r,s,o,u,d){if(yo(s),s.stateNode===null){var g=fl,E=o.contextType;typeof E=="object"&&E!==null&&(g=Hn(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=xp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},op(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?Hn(E):fl,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Np(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&xp.enqueueReplaceState(g,g.state,null),Fu(s,u,g,d),Bu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){g=s.stateNode;var w=s.memoizedProps,O=Eo(o,w);g.props=O;var ee=g.context,oe=o.contextType;E=fl,typeof oe=="object"&&oe!==null&&(E=Hn(oe));var fe=o.getDerivedStateFromProps;oe=typeof fe=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||ee!==E)&&YE(s,g,u,E),Ws=!1;var re=s.memoizedState;g.state=re,Fu(s,u,g,d),Bu(),ee=s.memoizedState,w||re!==ee||Ws?(typeof fe=="function"&&(Np(s,o,fe,u),ee=s.memoizedState),(O=Ws||KE(s,o,O,u,re,ee,E))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ee),g.props=u,g.state=ee,g.context=E,u=O):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,lp(r,s),E=s.memoizedProps,oe=Eo(o,E),g.props=oe,fe=s.pendingProps,re=g.context,ee=o.contextType,O=fl,typeof ee=="object"&&ee!==null&&(O=Hn(ee)),w=o.getDerivedStateFromProps,(ee=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==fe||re!==O)&&YE(s,g,u,O),Ws=!1,re=s.memoizedState,g.state=re,Fu(s,u,g,d),Bu();var ie=s.memoizedState;E!==fe||re!==ie||Ws||r!==null&&r.dependencies!==null&&zf(r.dependencies)?(typeof w=="function"&&(Np(s,o,w,u),ie=s.memoizedState),(oe=Ws||KE(s,o,oe,u,re,ie,O)||r!==null&&r.dependencies!==null&&zf(r.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ie,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ie,O)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ie),g.props=u,g.state=ie,g.context=O,u=oe):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),u=!1)}return g=u,sh(r,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&u?(s.child=Tl(s,r.child,null,d),s.child=Tl(s,null,o,d)):Vn(r,s,o,d),s.memoizedState=g.state,r=s.child):r=vs(r,s,d),r}function uT(r,s,o,u){return ku(),s.flags|=256,Vn(r,s,o,u),s.child}var kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mp(r){return{baseLanes:r,cachePool:Xv()}}function Pp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Qr),r}function cT(r,s,o){var u=s.pendingProps,d=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(En.current&2)!==0),E&&(d=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(Nt){if(d?na(s):ra(),Nt){var w=Zt,O;if(O=w){e:{for(O=w,w=Vi;O.nodeType!==8;){if(!w){w=null;break e}if(O=mi(O.nextSibling),O===null){w=null;break e}}w=O}w!==null?(s.memoizedState={dehydrated:w,treeContext:fo!==null?{id:ds,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},O=Sr(18,null,null,0),O.stateNode=w,O.return=s,s.child=O,rr=s,Zt=null,O=!0):O=!1}O||po(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return _g(w)?s.lanes=32:s.lanes=536870912,null;_s(s)}return w=u.children,u=u.fallback,d?(ra(),d=s.mode,w=ah({mode:"hidden",children:w},d),u=co(u,d,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,d=s.child,d.memoizedState=Mp(o),d.childLanes=Pp(r,E,o),s.memoizedState=kp,u):(na(s),Vp(s,w))}if(O=r.memoizedState,O!==null&&(w=O.dehydrated,w!==null)){if(g)s.flags&256?(na(s),s.flags&=-257,s=Lp(r,s,o)):s.memoizedState!==null?(ra(),s.child=r.child,s.flags|=128,s=null):(ra(),d=u.fallback,w=s.mode,u=ah({mode:"visible",children:u.children},w),d=co(d,w,o,null),d.flags|=2,u.return=s,d.return=s,u.sibling=d,s.child=u,Tl(s,r.child,null,o),u=s.child,u.memoizedState=Mp(o),u.childLanes=Pp(r,E,o),s.memoizedState=kp,s=d);else if(na(s),_g(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var ee=E.dgst;E=ee,u=Error(i(419)),u.stack="",u.digest=E,Mu({value:u,source:null,stack:null}),s=Lp(r,s,o)}else if(In||Pu(r,s,o,!1),E=(o&r.childLanes)!==0,In||E){if(E=qt,E!==null&&(u=o&-o,u=(u&42)!==0?1:Ii(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==O.retryLane))throw O.retryLane=u,cl(r,u),Nr(E,r,u),tT;w.data==="$?"||tg(),s=Lp(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=O.treeContext,Zt=mi(w.nextSibling),rr=s,Nt=!0,mo=null,Vi=!1,r!==null&&($r[Kr++]=ds,$r[Kr++]=ms,$r[Kr++]=fo,ds=r.id,ms=r.overflow,fo=s),s=Vp(s,u.children),s.flags|=4096);return s}return d?(ra(),d=u.fallback,w=s.mode,O=r.child,ee=O.sibling,u=hs(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,ee!==null?d=hs(ee,d):(d=co(d,w,o,null),d.flags|=2),d.return=s,u.return=s,u.sibling=d,s.child=u,u=d,d=s.child,w=r.child.memoizedState,w===null?w=Mp(o):(O=w.cachePool,O!==null?(ee=vn._currentValue,O=O.parent!==ee?{parent:ee,pool:ee}:O):O=Xv(),w={baseLanes:w.baseLanes|o,cachePool:O}),d.memoizedState=w,d.childLanes=Pp(r,E,o),s.memoizedState=kp,u):(na(s),o=r.child,r=o.sibling,o=hs(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function Vp(r,s){return s=ah({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function ah(r,s){return r=Sr(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Lp(r,s,o){return Tl(s,r.child,null,o),r=Vp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fT(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),tp(r.return,s,o)}function Up(r,s,o,u,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=d)}function hT(r,s,o){var u=s.pendingProps,d=u.revealOrder,g=u.tail;if(Vn(r,s,u.children,o),u=En.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fT(r,o,s);else if(r.tag===19)fT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(me(En,u),d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&nh(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Up(s,!1,d,o,g);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&nh(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Up(s,!0,o,null,g);break;case"together":Up(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vs(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),la|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Pu(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=hs(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=hs(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function jp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&zf(r)))}function HC(r,s,o){switch(s.tag){case 3:Rt(s,s.stateNode.containerInfo),Zs(s,vn,r.memoizedState.cache),ku();break;case 27:case 5:Ot(s);break;case 4:Rt(s,s.stateNode.containerInfo);break;case 10:Zs(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(na(s),s.flags|=128,null):(o&s.child.childLanes)!==0?cT(r,s,o):(na(s),r=vs(r,s,o),r!==null?r.sibling:null);na(s);break;case 19:var d=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Pu(r,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return hT(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),me(En,En.current),u)break;return null;case 22:case 23:return s.lanes=0,sT(r,s,o);case 24:Zs(s,vn,r.memoizedState.cache)}return vs(r,s,o)}function dT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)In=!0;else{if(!jp(r,o)&&(s.flags&128)===0)return In=!1,HC(r,s,o);In=(r.flags&131072)!==0}else In=!1,Nt&&(s.flags&1048576)!==0&&qv(s,jf,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,d=u._init;if(u=d(u._payload),s.type=u,typeof u=="function")Ym(u)?(r=Eo(u,r),s.tag=1,s=lT(null,s,u,r,o)):(s.tag=0,s=Op(null,s,u,r,o));else{if(u!=null){if(d=u.$$typeof,d===ne){s.tag=11,s=nT(null,s,u,r,o);break e}else if(d===C){s.tag=14,s=rT(null,s,u,r,o);break e}}throw s=xe(u)||u,Error(i(306,s,""))}}return s;case 0:return Op(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Eo(u,s.pendingProps),lT(r,s,u,d,o);case 3:e:{if(Rt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;d=g.element,lp(r,s),Fu(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Zs(s,vn,u),u!==g.cache&&np(s,[vn],o,!0),Bu(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=uT(r,s,u,o);break e}else if(u!==d){d=Hr(Error(i(424)),s),Mu(d),s=uT(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Zt=mi(r.firstChild),rr=s,Nt=!0,mo=null,Vi=!0,o=GE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ku(),u===d){s=vs(r,s,o);break e}Vn(r,s,u,o)}s=s.child}return s;case 26:return sh(r,s),r===null?(o=yb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Nt||(o=s.type,r=s.pendingProps,u=Eh(He.current).createElement(o),u[he]=s,u[ge]=r,Un(u,o,r),et(u),s.stateNode=u):s.memoizedState=yb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ot(s),r===null&&Nt&&(u=s.stateNode=mb(s.type,s.pendingProps,He.current),rr=s,Vi=!0,d=Zt,ha(s.type)?(vg=d,Zt=mi(u.firstChild)):Zt=d),Vn(r,s,s.pendingProps.children,o),sh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Nt&&((d=u=Zt)&&(u=_I(u,s.type,s.pendingProps,Vi),u!==null?(s.stateNode=u,rr=s,Zt=mi(u.firstChild),Vi=!1,d=!0):d=!1),d||po(s)),Ot(s),d=s.type,g=s.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,pg(d,g)?u=null:E!==null&&pg(d,E)&&(s.flags|=32),s.memoizedState!==null&&(d=mp(r,s,VC,null,null,o),cc._currentValue=d),sh(r,s),Vn(r,s,u,o),s.child;case 6:return r===null&&Nt&&((r=o=Zt)&&(o=vI(o,s.pendingProps,Vi),o!==null?(s.stateNode=o,rr=s,Zt=null,r=!0):r=!1),r||po(s)),null;case 13:return cT(r,s,o);case 4:return Rt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Tl(s,null,u,o):Vn(r,s,u,o),s.child;case 11:return nT(r,s,s.type,s.pendingProps,o);case 7:return Vn(r,s,s.pendingProps,o),s.child;case 8:return Vn(r,s,s.pendingProps.children,o),s.child;case 12:return Vn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Zs(s,s.type,u.value),Vn(r,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,yo(s),d=Hn(d),u=u(d),s.flags|=1,Vn(r,s,u,o),s.child;case 14:return rT(r,s,s.type,s.pendingProps,o);case 15:return iT(r,s,s.type,s.pendingProps,o);case 19:return hT(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=ah(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=hs(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return sT(r,s,o);case 24:return yo(s),u=Hn(vn),r===null?(d=sp(),d===null&&(d=qt,g=rp(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),s.memoizedState={parent:u,cache:d},op(s),Zs(s,vn,d)):((r.lanes&o)!==0&&(lp(r,s),Fu(s,null,null,o),Bu()),d=r.memoizedState,g=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Zs(s,vn,u)):(u=g.cache,Zs(s,vn,u),u!==d.cache&&np(s,[vn],o,!0))),Vn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Es(r){r.flags|=4}function mT(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!bb(s)){if(s=Yr.current,s!==null&&((vt&4194048)===vt?Li!==null:(vt&62914560)!==vt&&(vt&536870912)===0||s!==Li))throw ju=ap,Zv;r.flags|=8192}}function oh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Xa():536870912,r.lanes|=s,Al|=s)}function Qu(r,s){if(!Nt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Qt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function GC(r,s,o){var u=s.pendingProps;switch(Wm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return Qt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),gs(vn),qn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ou(s)?Es(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$v())),Qt(s),null;case 26:return o=s.memoizedState,r===null?(Es(s),o!==null?(Qt(s),mT(s,o)):(Qt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Es(s),Qt(s),mT(s,o)):(Qt(s),s.flags&=-16777217):(r.memoizedProps!==u&&Es(s),Qt(s),s.flags&=-16777217),null;case 27:wn(s),o=He.current;var d=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Es(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Qt(s),null}r=ke.current,Ou(s)?Hv(s):(r=mb(d,u,o),s.stateNode=r,Es(s))}return Qt(s),null;case 5:if(wn(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Es(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Qt(s),null}if(r=ke.current,Ou(s))Hv(s);else{switch(d=Eh(He.current),r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?d.createElement(o,{is:u.is}):d.createElement(o)}}r[he]=s,r[ge]=u;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=r;e:switch(Un(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Es(s)}}return Qt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Es(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=He.current,Ou(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,d=rr,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[he]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||ob(r.nodeValue,o)),r||po(s)}else r=Eh(r).createTextNode(u),r[he]=s,s.stateNode=r}return Qt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=Ou(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[he]=s}else ku(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),d=!1}else d=$v(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(_s(s),s):(_s(s),null)}if(_s(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),oh(s,s.updateQueue),Qt(s),null;case 4:return qn(),r===null&&cg(s.stateNode.containerInfo),Qt(s),null;case 10:return gs(s.type),Qt(s),null;case 19:if(_e(En),d=s.memoizedState,d===null)return Qt(s),null;if(u=(s.flags&128)!==0,g=d.rendering,g===null)if(u)Qu(d,!1);else{if(Wt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=nh(r),g!==null){for(s.flags|=128,Qu(d,!1),r=g.updateQueue,s.updateQueue=r,oh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Fv(o,r),o=o.sibling;return me(En,En.current&1|2),s.child}r=r.sibling}d.tail!==null&&kn()>ch&&(s.flags|=128,u=!0,Qu(d,!1),s.lanes=4194304)}else{if(!u)if(r=nh(g),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,oh(s,r),Qu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Nt)return Qt(s),null}else 2*kn()-d.renderingStartTime>ch&&o!==536870912&&(s.flags|=128,u=!0,Qu(d,!1),s.lanes=4194304);d.isBackwards?(g.sibling=s.child,s.child=g):(r=d.last,r!==null?r.sibling=g:s.child=g,d.last=g)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=kn(),s.sibling=null,r=En.current,me(En,u?r&1|2:r&1),s):(Qt(s),null);case 22:case 23:return _s(s),hp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),o=s.updateQueue,o!==null&&oh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&_e(_o),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),gs(vn),Qt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function $C(r,s){switch(Wm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return gs(vn),qn(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return wn(s),null;case 13:if(_s(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ku()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return _e(En),null;case 4:return qn(),null;case 10:return gs(s.type),null;case 22:case 23:return _s(s),hp(),r!==null&&_e(_o),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return gs(vn),null;case 25:return null;default:return null}}function pT(r,s){switch(Wm(s),s.tag){case 3:gs(vn),qn();break;case 26:case 27:case 5:wn(s);break;case 4:qn();break;case 13:_s(s);break;case 19:_e(En);break;case 10:gs(s.type);break;case 22:case 23:_s(s),hp(),r!==null&&_e(_o);break;case 24:gs(vn)}}function Xu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&r)===r){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==d)}}catch(w){zt(s,s.return,w)}}function ia(r,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&r)===r){var E=u.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,d=s;var O=o,ee=w;try{ee()}catch(oe){zt(d,O,oe)}}}u=u.next}while(u!==g)}}catch(oe){zt(s,s.return,oe)}}function gT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{rE(s,o)}catch(u){zt(r,r.return,u)}}}function yT(r,s,o){o.props=Eo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){zt(r,s,u)}}function Zu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(d){zt(r,s,d)}}function Ui(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){zt(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){zt(r,s,d)}else o.current=null}function _T(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){zt(r,r.return,d)}}function zp(r,s,o){try{var u=r.stateNode;dI(u,r.type,o,s),u[ge]=s}catch(d){zt(r,r.return,d)}}function vT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ha(r.type)||r.tag===4}function Bp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ha(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Fp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=vh));else if(u!==4&&(u===27&&ha(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Fp(r,s,o),r=r.sibling;r!==null;)Fp(r,s,o),r=r.sibling}function lh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&ha(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(lh(r,s,o),r=r.sibling;r!==null;)lh(r,s,o),r=r.sibling}function ET(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Un(s,u,o),s[he]=r,s[ge]=o}catch(g){zt(r,r.return,g)}}var Ts=!1,nn=!1,qp=!1,TT=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function KC(r,s){if(r=r.containerInfo,dg=Rh,r=Ov(r),Bm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,w=-1,O=-1,ee=0,oe=0,fe=r,re=null;t:for(;;){for(var ie;fe!==o||d!==0&&fe.nodeType!==3||(w=E+d),fe!==g||u!==0&&fe.nodeType!==3||(O=E+u),fe.nodeType===3&&(E+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)re=fe,fe=ie;for(;;){if(fe===r)break t;if(re===o&&++ee===d&&(w=E),re===g&&++oe===u&&(O=E),(ie=fe.nextSibling)!==null)break;fe=re,re=fe.parentNode}fe=ie}o=w===-1||O===-1?null:{start:w,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(mg={focusedElem:r,selectionRange:o},Rh=!1,Nn=s;Nn!==null;)if(s=Nn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Nn=r;else for(;Nn!==null;){switch(s=Nn,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,d=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var We=Eo(o.type,d,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(We,g),u.__reactInternalSnapshotBeforeUpdate=r}catch($e){zt(o,o.return,$e)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)yg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":yg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Nn=r;break}Nn=s.return}}function bT(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:sa(r,o),u&4&&Xu(5,o);break;case 1:if(sa(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){zt(o,o.return,E)}else{var d=Eo(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){zt(o,o.return,E)}}u&64&&gT(o),u&512&&Zu(o,o.return);break;case 3:if(sa(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{rE(r,s)}catch(E){zt(o,o.return,E)}}break;case 27:s===null&&u&4&&ET(o);case 26:case 5:sa(r,o),s===null&&u&4&&_T(o),u&512&&Zu(o,o.return);break;case 12:sa(r,o);break;case 13:sa(r,o),u&4&&AT(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=nI.bind(null,o),EI(r,o))));break;case 22:if(u=o.memoizedState!==null||Ts,!u){s=s!==null&&s.memoizedState!==null||nn,d=Ts;var g=nn;Ts=u,(nn=s)&&!g?aa(r,o,(o.subtreeFlags&8772)!==0):sa(r,o),Ts=d,nn=g}break;case 30:break;default:sa(r,o)}}function wT(r){var s=r.alternate;s!==null&&(r.alternate=null,wT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Le(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Yt=null,cr=!1;function bs(r,s,o){for(o=o.child;o!==null;)ST(r,s,o),o=o.sibling}function ST(r,s,o){if(Ce&&typeof Ce.onCommitFiberUnmount=="function")try{Ce.onCommitFiberUnmount(Ee,o)}catch{}switch(o.tag){case 26:nn||Ui(o,s),bs(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:nn||Ui(o,s);var u=Yt,d=cr;ha(o.type)&&(Yt=o.stateNode,cr=!1),bs(r,s,o),ac(o.stateNode),Yt=u,cr=d;break;case 5:nn||Ui(o,s);case 6:if(u=Yt,d=cr,Yt=null,bs(r,s,o),Yt=u,cr=d,Yt!==null)if(cr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(o.stateNode)}catch(g){zt(o,s,g)}else try{Yt.removeChild(o.stateNode)}catch(g){zt(o,s,g)}break;case 18:Yt!==null&&(cr?(r=Yt,hb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),mc(r)):hb(Yt,o.stateNode));break;case 4:u=Yt,d=cr,Yt=o.stateNode.containerInfo,cr=!0,bs(r,s,o),Yt=u,cr=d;break;case 0:case 11:case 14:case 15:nn||ia(2,o,s),nn||ia(4,o,s),bs(r,s,o);break;case 1:nn||(Ui(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&yT(o,s,u)),bs(r,s,o);break;case 21:bs(r,s,o);break;case 22:nn=(u=nn)||o.memoizedState!==null,bs(r,s,o),nn=u;break;default:bs(r,s,o)}}function AT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{mc(r)}catch(o){zt(s,s.return,o)}}function YC(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new TT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new TT),s;default:throw Error(i(435,r.tag))}}function Hp(r,s){var o=YC(r);s.forEach(function(u){var d=rI.bind(null,r,u);o.has(u)||(o.add(u),u.then(d,d))})}function Ar(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],g=r,E=s,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(ha(w.type)){Yt=w.stateNode,cr=!1;break e}break;case 5:Yt=w.stateNode,cr=!1;break e;case 3:case 4:Yt=w.stateNode.containerInfo,cr=!0;break e}w=w.return}if(Yt===null)throw Error(i(160));ST(g,E,d),Yt=null,cr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)RT(s,r),s=s.sibling}var di=null;function RT(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ar(s,r),Rr(r),u&4&&(ia(3,r,r.return),Xu(3,r),ia(5,r,r.return));break;case 1:Ar(s,r),Rr(r),u&512&&(nn||o===null||Ui(o,o.return)),u&64&&Ts&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=di;if(Ar(s,r),Rr(r),u&512&&(nn||o===null||Ui(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Ve]||g[he]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),Un(g,u,o),g[he]=r,et(g),u=g;break e;case"link":var E=Eb("link","href",d).get(u+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(g=E[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}g=d.createElement(u),Un(g,u,o),d.head.appendChild(g);break;case"meta":if(E=Eb("meta","content",d).get(u+(o.content||""))){for(w=0;w<E.length;w++)if(g=E[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}g=d.createElement(u),Un(g,u,o),d.head.appendChild(g);break;default:throw Error(i(468,u))}g[he]=r,et(g),u=g}r.stateNode=u}else Tb(d,r.type,r.stateNode);else r.stateNode=vb(d,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?Tb(d,r.type,r.stateNode):vb(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&zp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Ar(s,r),Rr(r),u&512&&(nn||o===null||Ui(o,o.return)),o!==null&&u&4&&zp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Ar(s,r),Rr(r),u&512&&(nn||o===null||Ui(o,o.return)),r.flags&32){d=r.stateNode;try{zr(d,"")}catch(ie){zt(r,r.return,ie)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,zp(r,d,o!==null?o.memoizedProps:d)),u&1024&&(qp=!0);break;case 6:if(Ar(s,r),Rr(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(ie){zt(r,r.return,ie)}}break;case 3:if(wh=null,d=di,di=Th(s.containerInfo),Ar(s,r),di=d,Rr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{mc(s.containerInfo)}catch(ie){zt(r,r.return,ie)}qp&&(qp=!1,CT(r));break;case 4:u=di,di=Th(r.stateNode.containerInfo),Ar(s,r),Rr(r),di=u;break;case 12:Ar(s,r),Rr(r);break;case 13:Ar(s,r),Rr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Xp=kn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Hp(r,u)));break;case 22:d=r.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,ee=Ts,oe=nn;if(Ts=ee||d,nn=oe||O,Ar(s,r),nn=oe,Ts=ee,Rr(r),u&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||O||Ts||nn||To(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(g=O.stateNode,d)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=O.stateNode;var fe=O.memoizedProps.style,re=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;w.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ie){zt(O,O.return,ie)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(ie){zt(O,O.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Hp(r,o))));break;case 19:Ar(s,r),Rr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Hp(r,u)));break;case 30:break;case 21:break;default:Ar(s,r),Rr(r)}}function Rr(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(vT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=Bp(r);lh(r,g,d);break;case 5:var E=o.stateNode;o.flags&32&&(zr(E,""),o.flags&=-33);var w=Bp(r);lh(r,w,E);break;case 3:case 4:var O=o.stateNode.containerInfo,ee=Bp(r);Fp(r,ee,O);break;default:throw Error(i(161))}}catch(oe){zt(r,r.return,oe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function CT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;CT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function sa(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)bT(r,s.alternate,s),s=s.sibling}function To(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ia(4,s,s.return),To(s);break;case 1:Ui(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&yT(s,s.return,o),To(s);break;case 27:ac(s.stateNode);case 26:case 5:Ui(s,s.return),To(s);break;case 22:s.memoizedState===null&&To(s);break;case 30:To(s);break;default:To(s)}r=r.sibling}}function aa(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:aa(d,g,o),Xu(4,g);break;case 1:if(aa(d,g,o),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ee){zt(u,u.return,ee)}if(u=g,d=u.updateQueue,d!==null){var w=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)nE(O[d],w)}catch(ee){zt(u,u.return,ee)}}o&&E&64&&gT(g),Zu(g,g.return);break;case 27:ET(g);case 26:case 5:aa(d,g,o),o&&u===null&&E&4&&_T(g),Zu(g,g.return);break;case 12:aa(d,g,o);break;case 13:aa(d,g,o),o&&E&4&&AT(d,g);break;case 22:g.memoizedState===null&&aa(d,g,o),Zu(g,g.return);break;case 30:break;default:aa(d,g,o)}s=s.sibling}}function Gp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Vu(o))}function $p(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Vu(r))}function ji(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)IT(r,s,o,u),s=s.sibling}function IT(r,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:ji(r,s,o,u),d&2048&&Xu(9,s);break;case 1:ji(r,s,o,u);break;case 3:ji(r,s,o,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Vu(r)));break;case 12:if(d&2048){ji(r,s,o,u),r=s.stateNode;try{var g=s.memoizedProps,E=g.id,w=g.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(O){zt(s,s.return,O)}}else ji(r,s,o,u);break;case 13:ji(r,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?ji(r,s,o,u):Wu(r,s):g._visibility&2?ji(r,s,o,u):(g._visibility|=2,bl(r,s,o,u,(s.subtreeFlags&10256)!==0)),d&2048&&Gp(E,s);break;case 24:ji(r,s,o,u),d&2048&&$p(s.alternate,s);break;default:ji(r,s,o,u)}}function bl(r,s,o,u,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,E=s,w=o,O=u,ee=E.flags;switch(E.tag){case 0:case 11:case 15:bl(g,E,w,O,d),Xu(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?bl(g,E,w,O,d):Wu(g,E):(oe._visibility|=2,bl(g,E,w,O,d)),d&&ee&2048&&Gp(E.alternate,E);break;case 24:bl(g,E,w,O,d),d&&ee&2048&&$p(E.alternate,E);break;default:bl(g,E,w,O,d)}s=s.sibling}}function Wu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,d=u.flags;switch(u.tag){case 22:Wu(o,u),d&2048&&Gp(u.alternate,u);break;case 24:Wu(o,u),d&2048&&$p(u.alternate,u);break;default:Wu(o,u)}s=s.sibling}}var Ju=8192;function wl(r){if(r.subtreeFlags&Ju)for(r=r.child;r!==null;)NT(r),r=r.sibling}function NT(r){switch(r.tag){case 26:wl(r),r.flags&Ju&&r.memoizedState!==null&&kI(di,r.memoizedState,r.memoizedProps);break;case 5:wl(r);break;case 3:case 4:var s=di;di=Th(r.stateNode.containerInfo),wl(r),di=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Ju,Ju=16777216,wl(r),Ju=s):wl(r));break;default:wl(r)}}function xT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ec(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Nn=u,OT(u,r)}xT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)DT(r),r=r.sibling}function DT(r){switch(r.tag){case 0:case 11:case 15:ec(r),r.flags&2048&&ia(9,r,r.return);break;case 3:ec(r);break;case 12:ec(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,uh(r)):ec(r);break;default:ec(r)}}function uh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Nn=u,OT(u,r)}xT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ia(8,s,s.return),uh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,uh(s));break;default:uh(s)}r=r.sibling}}function OT(r,s){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:ia(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Vu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Nn=u;else e:for(o=r;Nn!==null;){u=Nn;var d=u.sibling,g=u.return;if(wT(u),u===o){Nn=null;break e}if(d!==null){d.return=g,Nn=d;break e}Nn=g}}}var QC={getCacheForType:function(r){var s=Hn(vn),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},XC=typeof WeakMap=="function"?WeakMap:Map,kt=0,qt=null,ht=null,vt=0,Mt=0,Cr=null,oa=!1,Sl=!1,Kp=!1,ws=0,Wt=0,la=0,bo=0,Yp=0,Qr=0,Al=0,tc=null,fr=null,Qp=!1,Xp=0,ch=1/0,fh=null,ua=null,Ln=0,ca=null,Rl=null,Cl=0,Zp=0,Wp=null,kT=null,nc=0,Jp=null;function Ir(){if((kt&2)!==0&&vt!==0)return vt&-vt;if(Q.T!==null){var r=ml;return r!==0?r:ag()}return F()}function MT(){Qr===0&&(Qr=(vt&536870912)===0||Nt?rs():536870912);var r=Yr.current;return r!==null&&(r.flags|=32),Qr}function Nr(r,s,o){(r===qt&&(Mt===2||Mt===9)||r.cancelPendingCommit!==null)&&(Il(r,0),fa(r,vt,Qr,!1)),ui(r,o),((kt&2)===0||r!==qt)&&(r===qt&&((kt&2)===0&&(bo|=o),Wt===4&&fa(r,vt,Qr,!1)),zi(r))}function PT(r,s,o){if((kt&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||or(r,s),d=u?JC(r,s):ng(r,s,!0),g=u;do{if(d===0){Sl&&!u&&fa(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!ZC(o)){d=ng(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var w=r;d=tc;var O=w.current.memoizedState.isDehydrated;if(O&&(Il(w,E).flags|=256),E=ng(w,E,!1),E!==2){if(Kp&&!O){w.errorRecoveryDisabledLanes|=g,bo|=g,d=4;break e}g=fr,fr=d,g!==null&&(fr===null?fr=g:fr.push.apply(fr,g))}d=E}if(g=!1,d!==2)continue}}if(d===1){Il(r,0),fa(r,s,0,!0);break}e:{switch(u=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:fa(u,s,Qr,!oa);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Xp+300-kn(),10<d)){if(fa(u,s,Qr,!oa),Lr(u,0,!0)!==0)break e;u.timeoutHandle=cb(VT.bind(null,u,o,fr,fh,Qp,s,Qr,bo,Al,oa,g,2,-0,0),d);break e}VT(u,o,fr,fh,Qp,s,Qr,bo,Al,oa,g,0,-0,0)}}break}while(!0);zi(r)}function VT(r,s,o,u,d,g,E,w,O,ee,oe,fe,re,ie){if(r.timeoutHandle=-1,fe=s.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:OI},NT(s),fe=MI(),fe!==null)){r.cancelPendingCommit=fe(qT.bind(null,r,s,g,o,u,d,E,w,O,oe,1,re,ie)),fa(r,g,E,!ee);return}qT(r,s,g,o,u,d,E,w,O)}function ZC(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],g=d.getSnapshot;d=d.value;try{if(!wr(g(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fa(r,s,o,u){s&=~Yp,s&=~bo,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var g=31-Tt(d),E=1<<g;u[g]=-1,d&=~E}o!==0&&Zn(r,o,s)}function hh(){return(kt&6)===0?(rc(0),!1):!0}function eg(){if(ht!==null){if(Mt===0)var r=ht.return;else r=ht,ps=go=null,yp(r),El=null,Ku=0,r=ht;for(;r!==null;)pT(r.alternate,r),r=r.return;ht=null}}function Il(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,pI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),eg(),qt=r,ht=o=hs(r.current,null),vt=s,Mt=0,Cr=null,oa=!1,Sl=or(r,s),Kp=!1,Al=Qr=Yp=bo=la=Wt=0,fr=tc=null,Qp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-Tt(u),g=1<<d;s|=r[d],u&=~g}return ws=s,Mf(),o}function LT(r,s){lt=null,Q.H=Jf,s===Uu||s===qf?(s=eE(),Mt=3):s===Zv?(s=eE(),Mt=4):Mt=s===tT?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cr=s,ht===null&&(Wt=1,ih(r,Hr(s,r.current)))}function UT(){var r=Q.H;return Q.H=Jf,r===null?Jf:r}function jT(){var r=Q.A;return Q.A=QC,r}function tg(){Wt=4,oa||(vt&4194048)!==vt&&Yr.current!==null||(Sl=!0),(la&134217727)===0&&(bo&134217727)===0||qt===null||fa(qt,vt,Qr,!1)}function ng(r,s,o){var u=kt;kt|=2;var d=UT(),g=jT();(qt!==r||vt!==s)&&(fh=null,Il(r,s)),s=!1;var E=Wt;e:do try{if(Mt!==0&&ht!==null){var w=ht,O=Cr;switch(Mt){case 8:eg(),E=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(s=!0);var ee=Mt;if(Mt=0,Cr=null,Nl(r,w,O,ee),o&&Sl){E=0;break e}break;default:ee=Mt,Mt=0,Cr=null,Nl(r,w,O,ee)}}WC(),E=Wt;break}catch(oe){LT(r,oe)}while(!0);return s&&r.shellSuspendCounter++,ps=go=null,kt=u,Q.H=d,Q.A=g,ht===null&&(qt=null,vt=0,Mf()),E}function WC(){for(;ht!==null;)zT(ht)}function JC(r,s){var o=kt;kt|=2;var u=UT(),d=jT();qt!==r||vt!==s?(fh=null,ch=kn()+500,Il(r,s)):Sl=or(r,s);e:do try{if(Mt!==0&&ht!==null){s=ht;var g=Cr;t:switch(Mt){case 1:Mt=0,Cr=null,Nl(r,s,g,1);break;case 2:case 9:if(Wv(g)){Mt=0,Cr=null,BT(s);break}s=function(){Mt!==2&&Mt!==9||qt!==r||(Mt=7),zi(r)},g.then(s,s);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:Wv(g)?(Mt=0,Cr=null,BT(s)):(Mt=0,Cr=null,Nl(r,s,g,7));break;case 5:var E=null;switch(ht.tag){case 26:E=ht.memoizedState;case 5:case 27:var w=ht;if(!E||bb(E)){Mt=0,Cr=null;var O=w.sibling;if(O!==null)ht=O;else{var ee=w.return;ee!==null?(ht=ee,dh(ee)):ht=null}break t}}Mt=0,Cr=null,Nl(r,s,g,5);break;case 6:Mt=0,Cr=null,Nl(r,s,g,6);break;case 8:eg(),Wt=6;break e;default:throw Error(i(462))}}eI();break}catch(oe){LT(r,oe)}while(!0);return ps=go=null,Q.H=u,Q.A=d,kt=o,ht!==null?0:(qt=null,vt=0,Mf(),Wt)}function eI(){for(;ht!==null&&!Ai();)zT(ht)}function zT(r){var s=dT(r.alternate,r,ws);r.memoizedProps=r.pendingProps,s===null?dh(r):ht=s}function BT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=oT(o,s,s.pendingProps,s.type,void 0,vt);break;case 11:s=oT(o,s,s.pendingProps,s.type.render,s.ref,vt);break;case 5:yp(s);default:pT(o,s),s=ht=Fv(s,ws),s=dT(o,s,ws)}r.memoizedProps=r.pendingProps,s===null?dh(r):ht=s}function Nl(r,s,o,u){ps=go=null,yp(s),El=null,Ku=0;var d=s.return;try{if(qC(r,d,s,o,vt)){Wt=1,ih(r,Hr(o,r.current)),ht=null;return}}catch(g){if(d!==null)throw ht=d,g;Wt=1,ih(r,Hr(o,r.current)),ht=null;return}s.flags&32768?(Nt||u===1?r=!0:Sl||(vt&536870912)!==0?r=!1:(oa=r=!0,(u===2||u===9||u===3||u===6)&&(u=Yr.current,u!==null&&u.tag===13&&(u.flags|=16384))),FT(s,r)):dh(s)}function dh(r){var s=r;do{if((s.flags&32768)!==0){FT(s,oa);return}r=s.return;var o=GC(s.alternate,s,ws);if(o!==null){ht=o;return}if(s=s.sibling,s!==null){ht=s;return}ht=s=r}while(s!==null);Wt===0&&(Wt=5)}function FT(r,s){do{var o=$C(r.alternate,r);if(o!==null){o.flags&=32767,ht=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ht=r;return}ht=r=o}while(r!==null);Wt=6,ht=null}function qT(r,s,o,u,d,g,E,w,O){r.cancelPendingCommit=null;do mh();while(Ln!==0);if((kt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=$m,Hs(r,o,g,E,w,O),r===qt&&(ht=qt=null,vt=0),Rl=s,ca=r,Cl=o,Zp=g,Wp=d,kT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,iI(J,function(){return YT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,d=pe.p,pe.p=2,E=kt,kt|=4;try{KC(r,s,o)}finally{kt=E,pe.p=d,Q.T=u}}Ln=1,HT(),GT(),$T()}}function HT(){if(Ln===1){Ln=0;var r=ca,s=Rl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=pe.p;pe.p=2;var d=kt;kt|=4;try{RT(s,r);var g=mg,E=Ov(r.containerInfo),w=g.focusedElem,O=g.selectionRange;if(E!==w&&w&&w.ownerDocument&&Dv(w.ownerDocument.documentElement,w)){if(O!==null&&Bm(w)){var ee=O.start,oe=O.end;if(oe===void 0&&(oe=ee),"selectionStart"in w)w.selectionStart=ee,w.selectionEnd=Math.min(oe,w.value.length);else{var fe=w.ownerDocument||document,re=fe&&fe.defaultView||window;if(re.getSelection){var ie=re.getSelection(),We=w.textContent.length,$e=Math.min(O.start,We),Ut=O.end===void 0?$e:Math.min(O.end,We);!ie.extend&&$e>Ut&&(E=Ut,Ut=$e,$e=E);var $=xv(w,$e),G=xv(w,Ut);if($&&G&&(ie.rangeCount!==1||ie.anchorNode!==$.node||ie.anchorOffset!==$.offset||ie.focusNode!==G.node||ie.focusOffset!==G.offset)){var W=fe.createRange();W.setStart($.node,$.offset),ie.removeAllRanges(),$e>Ut?(ie.addRange(W),ie.extend(G.node,G.offset)):(W.setEnd(G.node,G.offset),ie.addRange(W))}}}}for(fe=[],ie=w;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<fe.length;w++){var ce=fe[w];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Rh=!!dg,mg=dg=null}finally{kt=d,pe.p=u,Q.T=o}}r.current=s,Ln=2}}function GT(){if(Ln===2){Ln=0;var r=ca,s=Rl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=pe.p;pe.p=2;var d=kt;kt|=4;try{bT(r,s.alternate,s)}finally{kt=d,pe.p=u,Q.T=o}}Ln=3}}function $T(){if(Ln===4||Ln===3){Ln=0,qs();var r=ca,s=Rl,o=Cl,u=kT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ln=5:(Ln=0,Rl=ca=null,KT(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(ua=null),Gs(o),s=s.stateNode,Ce&&typeof Ce.onCommitFiberRoot=="function")try{Ce.onCommitFiberRoot(Ee,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,d=pe.p,pe.p=2,Q.T=null;try{for(var g=r.onRecoverableError,E=0;E<u.length;E++){var w=u[E];g(w.value,{componentStack:w.stack})}}finally{Q.T=s,pe.p=d}}(Cl&3)!==0&&mh(),zi(r),d=r.pendingLanes,(o&4194090)!==0&&(d&42)!==0?r===Jp?nc++:(nc=0,Jp=r):nc=0,rc(0)}}function KT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Vu(s)))}function mh(r){return HT(),GT(),$T(),YT()}function YT(){if(Ln!==5)return!1;var r=ca,s=Zp;Zp=0;var o=Gs(Cl),u=Q.T,d=pe.p;try{pe.p=32>o?32:o,Q.T=null,o=Wp,Wp=null;var g=ca,E=Cl;if(Ln=0,Rl=ca=null,Cl=0,(kt&6)!==0)throw Error(i(331));var w=kt;if(kt|=4,DT(g.current),IT(g,g.current,E,o),kt=w,rc(0,!1),Ce&&typeof Ce.onPostCommitFiberRoot=="function")try{Ce.onPostCommitFiberRoot(Ee,g)}catch{}return!0}finally{pe.p=d,Q.T=u,KT(r,s)}}function QT(r,s,o){s=Hr(o,s),s=Dp(r.stateNode,s,2),r=ea(r,s,2),r!==null&&(ui(r,2),zi(r))}function zt(r,s,o){if(r.tag===3)QT(r,r,o);else for(;s!==null;){if(s.tag===3){QT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ua===null||!ua.has(u))){r=Hr(o,r),o=JE(2),u=ea(s,o,2),u!==null&&(eT(o,u,s,r),ui(u,2),zi(u));break}}s=s.return}}function rg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new XC;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Kp=!0,d.add(o),r=tI.bind(null,r,s,o),s.then(r,r))}function tI(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,qt===r&&(vt&o)===o&&(Wt===4||Wt===3&&(vt&62914560)===vt&&300>kn()-Xp?(kt&2)===0&&Il(r,0):Yp|=o,Al===vt&&(Al=0)),zi(r)}function XT(r,s){s===0&&(s=Xa()),r=cl(r,s),r!==null&&(ui(r,s),zi(r))}function nI(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),XT(r,o)}function rI(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),XT(r,o)}function iI(r,s){return ai(r,s)}var ph=null,xl=null,ig=!1,gh=!1,sg=!1,wo=0;function zi(r){r!==xl&&r.next===null&&(xl===null?ph=xl=r:xl=xl.next=r),gh=!0,ig||(ig=!0,aI())}function rc(r,s){if(!sg&&gh){sg=!0;do for(var o=!1,u=ph;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var E=u.suspendedLanes,w=u.pingedLanes;g=(1<<31-Tt(42|r)+1)-1,g&=d&~(E&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,eb(u,g))}else g=vt,g=Lr(u,u===qt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||or(u,g)||(o=!0,eb(u,g));u=u.next}while(o);sg=!1}}function sI(){ZT()}function ZT(){gh=ig=!1;var r=0;wo!==0&&(mI()&&(r=wo),wo=0);for(var s=kn(),o=null,u=ph;u!==null;){var d=u.next,g=WT(u,s);g===0?(u.next=null,o===null?ph=d:o.next=d,d===null&&(xl=o)):(o=u,(r!==0||(g&3)!==0)&&(gh=!0)),u=d}rc(r)}function WT(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-Tt(g),w=1<<E,O=d[E];O===-1?((w&o)===0||(w&u)!==0)&&(d[E]=li(w,s)):O<=s&&(r.expiredLanes|=w),g&=~w}if(s=qt,o=vt,o=Lr(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Mt===2||Mt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Sn(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||or(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Sn(u),Gs(o)){case 2:case 8:o=q;break;case 32:o=J;break;case 268435456:o=we;break;default:o=J}return u=JT.bind(null,r),o=ai(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Sn(u),r.callbackPriority=2,r.callbackNode=null,2}function JT(r,s){if(Ln!==0&&Ln!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(mh()&&r.callbackNode!==o)return null;var u=vt;return u=Lr(r,r===qt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(PT(r,u,s),WT(r,kn()),r.callbackNode!=null&&r.callbackNode===o?JT.bind(null,r):null)}function eb(r,s){if(mh())return null;PT(r,s,!0)}function aI(){gI(function(){(kt&6)!==0?ai(Ri,sI):ZT()})}function ag(){return wo===0&&(wo=rs()),wo}function tb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Wo(""+r)}function nb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function oI(r,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var g=tb((d[ge]||null).action),E=u.submitter;E&&(s=(s=E[ge]||null)?tb(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var w=new Jo("action","action",null,u,d);r.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(wo!==0){var O=E?nb(d,E):new FormData(d);Rp(o,{pending:!0,data:O,method:d.method,action:g},null,O)}}else typeof g=="function"&&(w.preventDefault(),O=E?nb(d,E):new FormData(d),Rp(o,{pending:!0,data:O,method:d.method,action:g},g,O))},currentTarget:d}]})}}for(var og=0;og<Gm.length;og++){var lg=Gm[og],lI=lg.toLowerCase(),uI=lg[0].toUpperCase()+lg.slice(1);hi(lI,"on"+uI)}hi(Pv,"onAnimationEnd"),hi(Vv,"onAnimationIteration"),hi(Lv,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(RC,"onTransitionRun"),hi(CC,"onTransitionStart"),hi(IC,"onTransitionCancel"),hi(Uv,"onTransitionEnd"),An("onMouseEnter",["mouseout","mouseover"]),An("onMouseLeave",["mouseout","mouseover"]),An("onPointerEnter",["pointerout","pointerover"]),An("onPointerLeave",["pointerout","pointerover"]),Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ic));function rb(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],d=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var w=u[E],O=w.instance,ee=w.currentTarget;if(w=w.listener,O!==g&&d.isPropagationStopped())break e;g=w,d.currentTarget=ee;try{g(d)}catch(oe){rh(oe)}d.currentTarget=null,g=O}else for(E=0;E<u.length;E++){if(w=u[E],O=w.instance,ee=w.currentTarget,w=w.listener,O!==g&&d.isPropagationStopped())break e;g=w,d.currentTarget=ee;try{g(d)}catch(oe){rh(oe)}d.currentTarget=null,g=O}}}}function dt(r,s){var o=s[je];o===void 0&&(o=s[je]=new Set);var u=r+"__bubble";o.has(u)||(ib(s,r,2,!1),o.add(u))}function ug(r,s,o){var u=0;s&&(u|=4),ib(o,r,u,s)}var yh="_reactListening"+Math.random().toString(36).slice(2);function cg(r){if(!r[yh]){r[yh]=!0,It.forEach(function(o){o!=="selectionchange"&&(cI.has(o)||ug(o,!1,r),ug(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[yh]||(s[yh]=!0,ug("selectionchange",!1,s))}}function ib(r,s,o,u){switch(Ib(s)){case 2:var d=LI;break;case 8:d=UI;break;default:d=Sg}o=d.bind(null,s,o,r),d=void 0,!Fr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function fg(r,s,o,u,d){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var w=u.stateNode.containerInfo;if(w===d)break;if(E===4)for(E=u.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;w!==null;){if(E=at(w),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){u=g=E;continue e}w=w.parentNode}}u=u.return}vf(function(){var ee=g,oe=Br(o),fe=[];e:{var re=jv.get(r);if(re!==void 0){var ie=Jo,We=r;switch(r){case"keypress":if(Di(o)===0)break e;case"keydown":case"keyup":ie=sl;break;case"focusin":We="focus",ie=nl;break;case"focusout":We="blur",ie=nl;break;case"beforeblur":case"afterblur":ie=nl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=qr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Cf;break;case Pv:case Vv:case Lv:ie=rl;break;case Uv:ie=Nf;break;case"scroll":case"scrollend":ie=Ef;break;case"wheel":ie=al;break;case"copy":case"cut":case"paste":ie=il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Iu;break;case"toggle":case"beforetoggle":ie=Df}var $e=(s&4)!==0,Ut=!$e&&(r==="scroll"||r==="scrollend"),$=$e?re!==null?re+"Capture":null:re;$e=[];for(var G=ee,W;G!==null;){var ce=G;if(W=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||W===null||$===null||(ce=to(G,$),ce!=null&&$e.push(sc(G,ce,W))),Ut)break;G=G.return}0<$e.length&&(re=new ie(re,We,null,o,oe),fe.push({event:re,listeners:$e}))}}if((s&7)===0){e:{if(re=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",re&&o!==as&&(We=o.relatedTarget||o.fromElement)&&(at(We)||We[Ie]))break e;if((ie||re)&&(re=oe.window===oe?oe:(re=oe.ownerDocument)?re.defaultView||re.parentWindow:window,ie?(We=o.relatedTarget||o.toElement,ie=ee,We=We?at(We):null,We!==null&&(Ut=l(We),$e=We.tag,We!==Ut||$e!==5&&$e!==27&&$e!==6)&&(We=null)):(ie=null,We=ee),ie!==We)){if($e=qr,ce="onMouseLeave",$="onMouseEnter",G="mouse",(r==="pointerout"||r==="pointerover")&&($e=Iu,ce="onPointerLeave",$="onPointerEnter",G="pointer"),Ut=ie==null?re:jt(ie),W=We==null?re:jt(We),re=new $e(ce,G+"leave",ie,o,oe),re.target=Ut,re.relatedTarget=W,ce=null,at(oe)===ee&&($e=new $e($,G+"enter",We,o,oe),$e.target=W,$e.relatedTarget=Ut,ce=$e),Ut=ce,ie&&We)t:{for($e=ie,$=We,G=0,W=$e;W;W=Dl(W))G++;for(W=0,ce=$;ce;ce=Dl(ce))W++;for(;0<G-W;)$e=Dl($e),G--;for(;0<W-G;)$=Dl($),W--;for(;G--;){if($e===$||$!==null&&$e===$.alternate)break t;$e=Dl($e),$=Dl($)}$e=null}else $e=null;ie!==null&&sb(fe,re,ie,$e,!1),We!==null&&Ut!==null&&sb(fe,Ut,We,$e,!0)}}e:{if(re=ee?jt(ee):window,ie=re.nodeName&&re.nodeName.toLowerCase(),ie==="select"||ie==="input"&&re.type==="file")var De=Sv;else if(_n(re))if(Av)De=wC;else{De=TC;var ut=EC}else ie=re.nodeName,!ie||ie.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ee&&Tu(ee.elementType)&&(De=Sv):De=bC;if(De&&(De=De(r,ee))){fs(fe,De,o,oe);break e}ut&&ut(r,re,ee),r==="focusout"&&ee&&re.type==="number"&&ee.memoizedProps.value!=null&&Qs(re,"number",re.value)}switch(ut=ee?jt(ee):window,r){case"focusin":(_n(ut)||ut.contentEditable==="true")&&(ol=ut,Fm=ee,Du=null);break;case"focusout":Du=Fm=ol=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,kv(fe,o,oe);break;case"selectionchange":if(AC)break;case"keydown":case"keyup":kv(fe,o,oe)}var Be;if(Mi)e:{switch(r){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else yt?se(r,o)&&(Ye="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ye="onCompositionStart");Ye&&(v&&o.locale!=="ko"&&(yt||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&yt&&(Be=wu()):(xi=oe,Xs="value"in xi?xi.value:xi.textContent,yt=!0)),ut=_h(ee,Ye),0<ut.length&&(Ye=new Ru(Ye,r,null,o,oe),fe.push({event:Ye,listeners:ut}),Be?Ye.data=Be:(Be=be(o),Be!==null&&(Ye.data=Be)))),(Be=_?yn(r,o):_t(r,o))&&(Ye=_h(ee,"onBeforeInput"),0<Ye.length&&(ut=new Ru("onBeforeInput","beforeinput",null,o,oe),fe.push({event:ut,listeners:Ye}),ut.data=Be)),oI(fe,r,ee,o,oe)}rb(fe,s)})}function sc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function _h(r,s){for(var o=s+"Capture",u=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=to(r,o),d!=null&&u.unshift(sc(r,d,g)),d=to(r,s),d!=null&&u.push(sc(r,d,g))),r.tag===3)return u;r=r.return}return[]}function Dl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function sb(r,s,o,u,d){for(var g=s._reactName,E=[];o!==null&&o!==u;){var w=o,O=w.alternate,ee=w.stateNode;if(w=w.tag,O!==null&&O===u)break;w!==5&&w!==26&&w!==27||ee===null||(O=ee,d?(ee=to(o,g),ee!=null&&E.unshift(sc(o,ee,O))):d||(ee=to(o,g),ee!=null&&E.push(sc(o,ee,O)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var fI=/\r\n?/g,hI=/\u0000|\uFFFD/g;function ab(r){return(typeof r=="string"?r:""+r).replace(fI,`
`).replace(hI,"")}function ob(r,s){return s=ab(s),ab(r)===s}function vh(){}function Lt(r,s,o,u,d,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||zr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&zr(r,""+u);break;case"className":Jn(r,"class",u);break;case"tabIndex":Jn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(r,o,u);break;case"style":Eu(r,u,g);break;case"data":if(s!=="object"){Jn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Wo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Lt(r,s,"name",d.name,d,null),Lt(r,s,"formEncType",d.formEncType,d,null),Lt(r,s,"formMethod",d.formMethod,d,null),Lt(r,s,"formTarget",d.formTarget,d,null)):(Lt(r,s,"encType",d.encType,d,null),Lt(r,s,"method",d.method,d,null),Lt(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Wo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=vh);break;case"onScroll":u!=null&&dt("scroll",r);break;case"onScrollEnd":u!=null&&dt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Wo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":dt("beforetoggle",r),dt("toggle",r),Tr(r,"popover",u);break;case"xlinkActuate":Ze(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ze(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ze(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ze(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ze(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ze(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ze(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ze(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ze(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Tr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Pm.get(o)||o,Tr(r,o,u))}}function hg(r,s,o,u,d,g){switch(o){case"style":Eu(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?zr(r,u):(typeof u=="number"||typeof u=="bigint")&&zr(r,""+u);break;case"onScroll":u!=null&&dt("scroll",r);break;case"onScrollEnd":u!=null&&dt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),g=r[ge]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,d);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Tr(r,o,u)}}}function Un(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",r),dt("load",r);var u=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Lt(r,s,g,E,o,null)}}d&&Lt(r,s,"srcSet",o.srcSet,o,null),u&&Lt(r,s,"src",o.src,o,null);return;case"input":dt("invalid",r);var w=g=E=d=null,O=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var oe=o[u];if(oe!=null)switch(u){case"name":d=oe;break;case"type":E=oe;break;case"checked":O=oe;break;case"defaultChecked":ee=oe;break;case"value":g=oe;break;case"defaultValue":w=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:Lt(r,s,u,oe,o,null)}}Wa(r,g,w,O,ee,E,d,!1),Zo(r);return;case"select":dt("invalid",r),u=E=g=null;for(d in o)if(o.hasOwnProperty(d)&&(w=o[d],w!=null))switch(d){case"value":g=w;break;case"defaultValue":E=w;break;case"multiple":u=w;default:Lt(r,s,d,w,o,null)}s=g,o=E,r.multiple=!!u,s!=null?ss(r,!!u,s,!1):o!=null&&ss(r,!!u,o,!0);return;case"textarea":dt("invalid",r),g=d=u=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":u=w;break;case"defaultValue":d=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Lt(r,s,E,w,o,null)}Ja(r,u,d,g),Zo(r);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Lt(r,s,O,u,o,null)}return;case"dialog":dt("beforetoggle",r),dt("toggle",r),dt("cancel",r),dt("close",r);break;case"iframe":case"object":dt("load",r);break;case"video":case"audio":for(u=0;u<ic.length;u++)dt(ic[u],r);break;case"image":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"embed":case"source":case"link":dt("error",r),dt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Lt(r,s,ee,u,o,null)}return;default:if(Tu(s)){for(oe in o)o.hasOwnProperty(oe)&&(u=o[oe],u!==void 0&&hg(r,s,oe,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&Lt(r,s,w,u,o,null))}function dI(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,E=null,w=null,O=null,ee=null,oe=null;for(ie in o){var fe=o[ie];if(o.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":O=fe;default:u.hasOwnProperty(ie)||Lt(r,s,ie,null,u,fe)}}for(var re in u){var ie=u[re];if(fe=o[re],u.hasOwnProperty(re)&&(ie!=null||fe!=null))switch(re){case"type":g=ie;break;case"name":d=ie;break;case"checked":ee=ie;break;case"defaultChecked":oe=ie;break;case"value":E=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,s));break;default:ie!==fe&&Lt(r,s,re,ie,u,fe)}}br(r,E,w,O,ee,oe,g,d);return;case"select":ie=E=w=re=null;for(g in o)if(O=o[g],o.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":ie=O;default:u.hasOwnProperty(g)||Lt(r,s,g,null,u,O)}for(d in u)if(g=u[d],O=o[d],u.hasOwnProperty(d)&&(g!=null||O!=null))switch(d){case"value":re=g;break;case"defaultValue":w=g;break;case"multiple":E=g;default:g!==O&&Lt(r,s,d,g,u,O)}s=w,o=E,u=ie,re!=null?ss(r,!!o,re,!1):!!u!=!!o&&(s!=null?ss(r,!!o,s,!0):ss(r,!!o,o?[]:"",!1));return;case"textarea":ie=re=null;for(w in o)if(d=o[w],o.hasOwnProperty(w)&&d!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Lt(r,s,w,null,u,d)}for(E in u)if(d=u[E],g=o[E],u.hasOwnProperty(E)&&(d!=null||g!=null))switch(E){case"value":re=d;break;case"defaultValue":ie=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&Lt(r,s,E,d,u,g)}Pt(r,re,ie);return;case"option":for(var We in o)if(re=o[We],o.hasOwnProperty(We)&&re!=null&&!u.hasOwnProperty(We))switch(We){case"selected":r.selected=!1;break;default:Lt(r,s,We,null,u,re)}for(O in u)if(re=u[O],ie=o[O],u.hasOwnProperty(O)&&re!==ie&&(re!=null||ie!=null))switch(O){case"selected":r.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Lt(r,s,O,re,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in o)re=o[$e],o.hasOwnProperty($e)&&re!=null&&!u.hasOwnProperty($e)&&Lt(r,s,$e,null,u,re);for(ee in u)if(re=u[ee],ie=o[ee],u.hasOwnProperty(ee)&&re!==ie&&(re!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:Lt(r,s,ee,re,u,ie)}return;default:if(Tu(s)){for(var Ut in o)re=o[Ut],o.hasOwnProperty(Ut)&&re!==void 0&&!u.hasOwnProperty(Ut)&&hg(r,s,Ut,void 0,u,re);for(oe in u)re=u[oe],ie=o[oe],!u.hasOwnProperty(oe)||re===ie||re===void 0&&ie===void 0||hg(r,s,oe,re,u,ie);return}}for(var $ in o)re=o[$],o.hasOwnProperty($)&&re!=null&&!u.hasOwnProperty($)&&Lt(r,s,$,null,u,re);for(fe in u)re=u[fe],ie=o[fe],!u.hasOwnProperty(fe)||re===ie||re==null&&ie==null||Lt(r,s,fe,re,u,ie)}var dg=null,mg=null;function Eh(r){return r.nodeType===9?r:r.ownerDocument}function lb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ub(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function pg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var gg=null;function mI(){var r=window.event;return r&&r.type==="popstate"?r===gg?!1:(gg=r,!0):(gg=null,!1)}var cb=typeof setTimeout=="function"?setTimeout:void 0,pI=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,gI=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(r){return fb.resolve(null).then(r).catch(yI)}:cb;function yI(r){setTimeout(function(){throw r})}function ha(r){return r==="head"}function hb(r,s){var o=s,u=0,d=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&ac(E.documentElement),o&2&&ac(E.body),o&4)for(o=E.head,ac(o),E=o.firstChild;E;){var w=E.nextSibling,O=E.nodeName;E[Ve]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=w}}if(d===0){r.removeChild(g),mc(s);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);mc(s)}function yg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":yg(o),Le(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function _I(r,s,o,u){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ve])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=mi(r.nextSibling),r===null)break}return null}function vI(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=mi(r.nextSibling),r===null))return null;return r}function _g(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function EI(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function mi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var vg=null;function db(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function mb(r,s,o){switch(s=Eh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ac(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Le(r)}var Xr=new Map,pb=new Set;function Th(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ss=pe.d;pe.d={f:TI,r:bI,D:wI,C:SI,L:AI,m:RI,X:II,S:CI,M:NI};function TI(){var r=Ss.f(),s=hh();return r||s}function bI(r){var s=bt(r);s!==null&&s.tag===5&&s.type==="form"?PE(s):Ss.r(r)}var Ol=typeof document>"u"?null:document;function gb(r,s,o){var u=Ol;if(u&&typeof s=="string"&&s){var d=ln(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),pb.has(d)||(pb.add(d),r={rel:r,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Un(s,"link",r),et(s),u.head.appendChild(s)))}}function wI(r){Ss.D(r),gb("dns-prefetch",r,null)}function SI(r,s){Ss.C(r,s),gb("preconnect",r,s)}function AI(r,s,o){Ss.L(r,s,o);var u=Ol;if(u&&r&&s){var d='link[rel="preload"][as="'+ln(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+ln(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+ln(o.imageSizes)+'"]')):d+='[href="'+ln(r)+'"]';var g=d;switch(s){case"style":g=kl(r);break;case"script":g=Ml(r)}Xr.has(g)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Xr.set(g,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(oc(g))||s==="script"&&u.querySelector(lc(g))||(s=u.createElement("link"),Un(s,"link",r),et(s),u.head.appendChild(s)))}}function RI(r,s){Ss.m(r,s);var o=Ol;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ln(u)+'"][href="'+ln(r)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ml(r)}if(!Xr.has(g)&&(r=y({rel:"modulepreload",href:r},s),Xr.set(g,r),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(lc(g)))return}u=o.createElement("link"),Un(u,"link",r),et(u),o.head.appendChild(u)}}}function CI(r,s,o){Ss.S(r,s,o);var u=Ol;if(u&&r){var d=Ct(u).hoistableStyles,g=kl(r);s=s||"default";var E=d.get(g);if(!E){var w={loading:0,preload:null};if(E=u.querySelector(oc(g)))w.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Xr.get(g))&&Eg(r,o);var O=E=u.createElement("link");et(O),Un(O,"link",r),O._p=new Promise(function(ee,oe){O.onload=ee,O.onerror=oe}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,bh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:w},d.set(g,E)}}}function II(r,s){Ss.X(r,s);var o=Ol;if(o&&r){var u=Ct(o).hoistableScripts,d=Ml(r),g=u.get(d);g||(g=o.querySelector(lc(d)),g||(r=y({src:r,async:!0},s),(s=Xr.get(d))&&Tg(r,s),g=o.createElement("script"),et(g),Un(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function NI(r,s){Ss.M(r,s);var o=Ol;if(o&&r){var u=Ct(o).hoistableScripts,d=Ml(r),g=u.get(d);g||(g=o.querySelector(lc(d)),g||(r=y({src:r,async:!0,type:"module"},s),(s=Xr.get(d))&&Tg(r,s),g=o.createElement("script"),et(g),Un(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function yb(r,s,o,u){var d=(d=He.current)?Th(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=kl(o.href),o=Ct(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=kl(o.href);var g=Ct(d).hoistableStyles,E=g.get(r);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=d.querySelector(oc(r)))&&!g._p&&(E.instance=g,E.state.loading=5),Xr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xr.set(r,o),g||xI(d,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ml(o),o=Ct(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function kl(r){return'href="'+ln(r)+'"'}function oc(r){return'link[rel="stylesheet"]['+r+"]"}function _b(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function xI(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Un(s,"link",o),et(s),r.head.appendChild(s))}function Ml(r){return'[src="'+ln(r)+'"]'}function lc(r){return"script[async]"+r}function vb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+ln(o.href)+'"]');if(u)return s.instance=u,et(u),u;var d=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),et(u),Un(u,"style",d),bh(u,o.precedence,r),s.instance=u;case"stylesheet":d=kl(o.href);var g=r.querySelector(oc(d));if(g)return s.state.loading|=4,s.instance=g,et(g),g;u=_b(o),(d=Xr.get(d))&&Eg(u,d),g=(r.ownerDocument||r).createElement("link"),et(g);var E=g;return E._p=new Promise(function(w,O){E.onload=w,E.onerror=O}),Un(g,"link",u),s.state.loading|=4,bh(g,o.precedence,r),s.instance=g;case"script":return g=Ml(o.src),(d=r.querySelector(lc(g)))?(s.instance=d,et(d),d):(u=o,(d=Xr.get(g))&&(u=y({},o),Tg(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),et(d),Un(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,bh(u,o.precedence,r));return s.instance}function bh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,E=0;E<u.length;E++){var w=u[E];if(w.dataset.precedence===s)g=w;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Eg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Tg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var wh=null;function Eb(r,s,o){if(wh===null){var u=new Map,d=wh=new Map;d.set(o,u)}else d=wh,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var g=o[d];if(!(g[Ve]||g[he]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=r+E;var w=u.get(E);w?w.push(g):u.set(E,[g])}}return u}function Tb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function DI(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var uc=null;function OI(){}function kI(r,s,o){if(uc===null)throw Error(i(475));var u=uc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=kl(o.href),g=r.querySelector(oc(d));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Sh.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=g,et(g);return}g=r.ownerDocument||r,o=_b(o),(d=Xr.get(d))&&Eg(o,d),g=g.createElement("link"),et(g);var E=g;E._p=new Promise(function(w,O){E.onload=w,E.onerror=O}),Un(g,"link",o),s.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Sh.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function MI(){if(uc===null)throw Error(i(475));var r=uc;return r.stylesheets&&r.count===0&&bg(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&bg(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Sh(){if(this.count--,this.count===0){if(this.stylesheets)bg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ah=null;function bg(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ah=new Map,s.forEach(PI,r),Ah=null,Sh.call(r))}function PI(r,s){if(!(s.state.loading&4)){var o=Ah.get(r);if(o)var u=o.get(null);else{o=new Map,Ah.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var E=d[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}d=s.instance,E=d.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,d),o.set(E,d),this.count++,u=Sh.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var cc={$$typeof:H,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function VI(r,s,o,u,d,g,E,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function wb(r,s,o,u,d,g,E,w,O,ee,oe,fe){return r=new VI(r,s,o,E,w,O,ee,fe),s=1,g===!0&&(s|=24),g=Sr(3,null,null,s),r.current=g,g.stateNode=r,s=rp(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},op(g),r}function Sb(r){return r?(r=fl,r):fl}function Ab(r,s,o,u,d,g){d=Sb(d),u.context===null?u.context=d:u.pendingContext=d,u=Js(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ea(r,u,s),o!==null&&(Nr(o,r,s),zu(o,r,s))}function Rb(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function wg(r,s){Rb(r,s),(r=r.alternate)&&Rb(r,s)}function Cb(r){if(r.tag===13){var s=cl(r,67108864);s!==null&&Nr(s,r,67108864),wg(r,67108864)}}var Rh=!0;function LI(r,s,o,u){var d=Q.T;Q.T=null;var g=pe.p;try{pe.p=2,Sg(r,s,o,u)}finally{pe.p=g,Q.T=d}}function UI(r,s,o,u){var d=Q.T;Q.T=null;var g=pe.p;try{pe.p=8,Sg(r,s,o,u)}finally{pe.p=g,Q.T=d}}function Sg(r,s,o,u){if(Rh){var d=Ag(u);if(d===null)fg(r,s,u,Ch,o),Nb(r,u);else if(zI(d,r,s,o,u))u.stopPropagation();else if(Nb(r,u),s&4&&-1<jI.indexOf(r)){for(;d!==null;){var g=bt(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Xn(g.pendingLanes);if(E!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var O=1<<31-Tt(E);w.entanglements[1]|=O,E&=~O}zi(g),(kt&6)===0&&(ch=kn()+500,rc(0))}}break;case 13:w=cl(g,2),w!==null&&Nr(w,g,2),hh(),wg(g,2)}if(g=Ag(u),g===null&&fg(r,s,u,Ch,o),g===d)break;d=g}d!==null&&u.stopPropagation()}else fg(r,s,u,null,o)}}function Ag(r){return r=Br(r),Rg(r)}var Ch=null;function Rg(r){if(Ch=null,r=at(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ch=r,null}function Ib(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xo()){case Ri:return 2;case q:return 8;case J:case ae:return 32;case we:return 268435456;default:return 32}default:return 32}}var Cg=!1,da=null,ma=null,pa=null,fc=new Map,hc=new Map,ga=[],jI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nb(r,s){switch(r){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":fc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(s.pointerId)}}function dc(r,s,o,u,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},s!==null&&(s=bt(s),s!==null&&Cb(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function zI(r,s,o,u,d){switch(s){case"focusin":return da=dc(da,r,s,o,u,d),!0;case"dragenter":return ma=dc(ma,r,s,o,u,d),!0;case"mouseover":return pa=dc(pa,r,s,o,u,d),!0;case"pointerover":var g=d.pointerId;return fc.set(g,dc(fc.get(g)||null,r,s,o,u,d)),!0;case"gotpointercapture":return g=d.pointerId,hc.set(g,dc(hc.get(g)||null,r,s,o,u,d)),!0}return!1}function xb(r){var s=at(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Y(r.priority,function(){if(o.tag===13){var u=Ir();u=Ii(u);var d=cl(o,u);d!==null&&Nr(d,o,u),wg(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ih(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Ag(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);as=u,o.target.dispatchEvent(u),as=null}else return s=bt(o),s!==null&&Cb(s),r.blockedOn=o,!1;s.shift()}return!0}function Db(r,s,o){Ih(r)&&o.delete(s)}function BI(){Cg=!1,da!==null&&Ih(da)&&(da=null),ma!==null&&Ih(ma)&&(ma=null),pa!==null&&Ih(pa)&&(pa=null),fc.forEach(Db),hc.forEach(Db)}function Nh(r,s){r.blockedOn===s&&(r.blockedOn=null,Cg||(Cg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,BI)))}var xh=null;function Ob(r){xh!==r&&(xh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xh===r&&(xh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(Rg(u||o)===null)continue;break}var g=bt(o);g!==null&&(r.splice(s,3),s-=3,Rp(g,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function mc(r){function s(O){return Nh(O,r)}da!==null&&Nh(da,r),ma!==null&&Nh(ma,r),pa!==null&&Nh(pa,r),fc.forEach(s),hc.forEach(s);for(var o=0;o<ga.length;o++){var u=ga[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ga.length&&(o=ga[0],o.blockedOn===null);)xb(o),o.blockedOn===null&&ga.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],g=o[u+1],E=d[ge]||null;if(typeof g=="function")E||Ob(o);else if(E){var w=null;if(g&&g.hasAttribute("formAction")){if(d=g,E=g[ge]||null)w=E.formAction;else if(Rg(d)!==null)continue}else w=E.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),Ob(o)}}}function Ig(r){this._internalRoot=r}Dh.prototype.render=Ig.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Ir();Ab(o,u,r,s,null,null)},Dh.prototype.unmount=Ig.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ab(r.current,2,null,r,null,null),hh(),s[Ie]=null}};function Dh(r){this._internalRoot=r}Dh.prototype.unstable_scheduleHydration=function(r){if(r){var s=F();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ga.length&&s!==0&&s<ga[o].priority;o++);ga.splice(o,0,r),o===0&&xb(r)}};var kb=e.version;if(kb!=="19.1.1")throw Error(i(527,kb,"19.1.1"));pe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var FI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Ee=Oh.inject(FI),Ce=Oh}catch{}}return gc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",d=QE,g=XE,E=ZE,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=wb(r,1,!1,null,null,o,u,d,g,E,w,null),r[Ie]=s.current,cg(r),new Ig(s)},gc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,d="",g=QE,E=XE,w=ZE,O=null,ee=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks),o.formState!==void 0&&(ee=o.formState)),s=wb(r,1,!0,s,o??null,u,d,g,E,w,O,ee),s.context=Sb(null),o=s.current,u=Ir(),u=Ii(u),d=Js(u),d.callback=null,ea(o,d,u),o=u,s.current.lanes=o,ui(s,o),zi(s),r[Ie]=s.current,cg(r),new Dh(s)},gc.version="19.1.1",gc}var qb;function ZI(){if(qb)return Dg.exports;qb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dg.exports=XI(),Dg.exports}var WI=ZI();const JI=jS(WI);var Pg={exports:{}},Vg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function eN(){if(Hb)return Vg;Hb=1;var n=Hd();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,h=n.useDebugValue;return Vg.useSyncExternalStoreWithSelector=function(m,p,y,T,b){var A=a(null);if(A.current===null){var D={hasValue:!1,value:null};A.current=D}else D=A.current;A=c(function(){function z(K){if(!U){if(U=!0,Z=K,K=T(K),b!==void 0&&D.hasValue){var M=D.value;if(b(M,K))return H=M}return H=K}if(M=H,t(Z,K))return M;var C=T(K);return b!==void 0&&b(M,C)?(Z=K,M):(Z=K,H=C)}var U=!1,Z,H,ne=y===void 0?null:y;return[function(){return z(p())},ne===null?void 0:function(){return z(ne())}]},[p,y,T,b]);var V=i(m,A[0],A[1]);return l(function(){D.hasValue=!0,D.value=V},[V]),h(V),V},Vg}var Gb;function tN(){return Gb||(Gb=1,Pg.exports=eN()),Pg.exports}var nN=tN();function rN(n){n()}function iN(){let n=null,e=null;return{clear(){n=null,e=null},notify(){rN(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var $b={notify(){},get:()=>[]};function sN(n,e){let t,i=$b,a=0,l=!1;function c(V){y();const z=i.subscribe(V);let U=!1;return()=>{U||(U=!0,z(),T())}}function h(){i.notify()}function m(){D.onStateChange&&D.onStateChange()}function p(){return l}function y(){a++,t||(t=n.subscribe(m),i=iN())}function T(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=$b)}function b(){l||(l=!0,y())}function A(){l&&(l=!1,T())}const D={addNestedSub:c,notifyNestedSubs:h,handleChangeWrapper:m,isSubscribed:p,trySubscribe:b,tryUnsubscribe:A,getListeners:()=>i};return D}var aN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oN=aN(),lN=()=>typeof navigator<"u"&&navigator.product==="ReactNative",uN=lN(),cN=()=>oN||uN?k.useLayoutEffect:k.useEffect,fN=cN(),hN=Symbol.for("react-redux-context"),dN=typeof globalThis<"u"?globalThis:{};function mN(){if(!k.createContext)return{};const n=dN[hN]??=new Map;let e=n.get(k.createContext);return e||(e=k.createContext(null),n.set(k.createContext,e)),e}var ka=mN();function pN(n){const{children:e,context:t,serverState:i,store:a}=n,l=k.useMemo(()=>{const m=sN(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),c=k.useMemo(()=>a.getState(),[a]);fN(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const h=t||ka;return k.createElement(h.Provider,{value:l},e)}var gN=pN;function Wy(n=ka){return function(){return k.useContext(n)}}var BS=Wy();function FS(n=ka){const e=n===ka?BS:Wy(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var yN=FS();function _N(n=ka){const e=n===ka?yN:FS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Jy=_N(),vN=(n,e)=>n===e;function EN(n=ka){const e=n===ka?BS:Wy(n),t=(i,a={})=>{const{equalityFn:l=vN}=typeof a=="function"?{equalityFn:a}:a,c=e(),{store:h,subscription:m,getServerState:p}=c;k.useRef(!0);const y=k.useCallback({[i.name](b){return i(b)}}[i.name],[i]),T=nN.useSyncExternalStoreWithSelector(m.addNestedSub,h.getState,p||h.getState,y,l);return k.useDebugValue(T),T};return Object.assign(t,{withTypes:()=>t}),t}var Or=EN();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qS=n=>{throw TypeError(n)},TN=(n,e,t)=>e.has(n)||qS("Cannot "+t),Lg=(n,e,t)=>(TN(n,e,"read from private field"),t?t.call(n):e.get(n)),bN=(n,e,t)=>e.has(n)?qS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Kb="popstate";function wN(n={}){function e(i,a){let{pathname:l,search:c,hash:h}=i.location;return jc("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Ma(a)}return AN(e,t,null,n)}function ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SN(){return Math.random().toString(36).substring(2,10)}function Yb(n,e){return{usr:n.state,key:n.key,idx:e}}function jc(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ha(e):e,state:t,key:e&&e.key||i||SN()}}function Ma({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ha(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function AN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,h="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function T(){h="POP";let z=y(),U=z==null?null:z-p;p=z,m&&m({action:h,location:V.location,delta:U})}function b(z,U){h="PUSH";let Z=jc(V.location,z,U);p=y()+1;let H=Yb(Z,p),ne=V.createHref(Z);try{c.pushState(H,"",ne)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;a.location.assign(ne)}l&&m&&m({action:h,location:V.location,delta:1})}function A(z,U){h="REPLACE";let Z=jc(V.location,z,U);p=y();let H=Yb(Z,p),ne=V.createHref(Z);c.replaceState(H,"",ne),l&&m&&m({action:h,location:V.location,delta:0})}function D(z){return HS(z)}let V={get action(){return h},get location(){return n(a,c)},listen(z){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Kb,T),m=z,()=>{a.removeEventListener(Kb,T),m=null}},createHref(z){return e(a,z)},createURL:D,encodeLocation(z){let U=D(z);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:b,replace:A,go(z){return c.go(z)}};return V}function HS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ct(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ma(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var bc,Qb=class{constructor(n){if(bN(this,bc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Lg(this,bc).has(n))return Lg(this,bc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Lg(this,bc).set(n,e)}};bc=new WeakMap;var RN=new Set(["lazy","caseSensitive","path","id","index","children"]);function CN(n){return RN.has(n)}var IN=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function NN(n){return IN.has(n)}function xN(n){return n.index===!0}function zc(n,e,t=[],i={},a=!1){return n.map((l,c)=>{let h=[...t,String(c)],m=typeof l.id=="string"?l.id:h.join("-");if(ct(l.index!==!0||!l.children,"Cannot specify children on an index route"),ct(a||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),xN(l)){let p={...l,...e(l),id:m};return i[m]=p,p}else{let p={...l,...e(l),id:m,children:void 0};return i[m]=p,l.children&&(p.children=zc(l.children,e,h,i,a)),p}})}function Ta(n,e,t="/"){return Hh(n,e,t,!1)}function Hh(n,e,t,i){let a=typeof e=="string"?Ha(e):e,l=ei(a.pathname||"/",t);if(l==null)return null;let c=GS(n);ON(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let p=qN(l);h=BN(c[m],p,i)}return h}function DN(n,e){let{route:t,pathname:i,params:a}=n;return{id:t.id,pathname:i,params:a,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function GS(n,e=[],t=[],i="",a=!1){let l=(c,h,m=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;ct(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let T=Gi([i,y.relativePath]),b=t.concat(y);c.children&&c.children.length>0&&(ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),GS(c.children,e,b,T,m)),!(c.path==null&&!c.index)&&e.push({path:T,score:jN(T,c.index),routesMeta:b})};return n.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let m of $S(c.path))l(c,h,!0,m)}),e}function $S(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=$S(i.join("/")),h=[];return h.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&h.push(...c),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function ON(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:zN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var kN=/^:[\w-]+$/,MN=3,PN=2,VN=1,LN=10,UN=-2,Xb=n=>n==="*";function jN(n,e){let t=n.split("/"),i=t.length;return t.some(Xb)&&(i+=UN),e&&(i+=PN),t.filter(a=>!Xb(a)).reduce((a,l)=>a+(kN.test(l)?MN:l===""?VN:LN),i)}function zN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function BN(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let h=0;h<i.length;++h){let m=i[h],p=h===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",T=sd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!T&&p&&t&&!i[i.length-1].route.index&&(T=sd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Gi([l,T.pathname]),pathnameBase:KN(Gi([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=Gi([l,T.pathnameBase]))}return c}function sd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=FN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:T},b)=>{if(y==="*"){let D=h[b]||"";c=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const A=h[b];return T&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function FN(n,e=!1,t=!0){sn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function qN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ei(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function HN({basename:n,pathname:e}){return e==="/"?n:Gi([n,e])}function GN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ha(n):n;return{pathname:t?t.startsWith("/")?t:$N(t,e):e,search:YN(i),hash:QN(a)}}function $N(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ug(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Gd(n){let e=KS(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function $d(n,e,t,i=!1){let a;typeof n=="string"?a=Ha(n):(a={...n},ct(!a.pathname||!a.pathname.includes("?"),Ug("?","pathname","search",a)),ct(!a.pathname||!a.pathname.includes("#"),Ug("#","pathname","hash",a)),ct(!a.search||!a.search.includes("#"),Ug("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}h=T>=0?e[T]:"/"}let m=GN(a,h),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var Gi=n=>n.join("/").replace(/\/\/+/g,"/"),KN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),YN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,ad=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Bc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var YS=["POST","PUT","PATCH","DELETE"],XN=new Set(YS),ZN=["GET",...YS],WN=new Set(ZN),JN=new Set([301,302,303,307,308]),ex=new Set([307,308]),jg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tx={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e_=n=>nx.test(n),rx=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),QS="remix-router-transitions",XS=Symbol("ResetLoaderData");function ix(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ct(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||rx,l={},c=zc(n.routes,a,void 0,l),h,m=n.basename||"/",p=n.dataStrategy||ux,y={unstable_middleware:!1,...n.future},T=null,b=new Set,A=null,D=null,V=null,z=n.hydrationData!=null,U=Ta(c,n.history.location,m),Z=!1,H=null,ne;if(U==null&&!n.patchRoutesOnNavigation){let F=Zr(404,{pathname:n.history.location.pathname}),{matches:Y,route:te}=l0(c);ne=!0,U=Y,H={[te.id]:F}}else if(U&&!n.hydrationData&&Zn(U,c,n.history.location.pathname).active&&(U=null),U)if(U.some(F=>F.route.lazy))ne=!1;else if(!U.some(F=>F.route.loader))ne=!0;else{let F=n.hydrationData?n.hydrationData.loaderData:null,Y=n.hydrationData?n.hydrationData.errors:null;if(Y){let te=U.findIndex(he=>Y[he.route.id]!==void 0);ne=U.slice(0,te+1).every(he=>!uy(he.route,F,Y))}else ne=U.every(te=>!uy(te.route,F,Y))}else{ne=!1,U=[];let F=Zn(null,c,n.history.location.pathname);F.active&&F.matches&&(Z=!0,U=F.matches)}let K,M={historyAction:n.history.action,location:n.history.location,matches:U,initialized:ne,navigation:jg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||H,fetchers:new Map,blockers:new Map},C="POP",R=!1,x,B=!1,L=new Map,P=null,I=!1,xe=!1,Fe=new Set,Q=new Map,pe=0,Se=-1,Ke=new Map,j=new Set,le=new Map,_e=new Map,me=new Set,ke=new Map,Je,He=null;function $t(){if(T=n.history.listen(({action:F,location:Y,delta:te})=>{if(Je){Je(),Je=void 0;return}sn(ke.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=li({currentLocation:M.location,nextLocation:Y,historyAction:F});if(he&&te!=null){let ge=new Promise(Ie=>{Je=Ie});n.history.go(te*-1),or(he,{state:"blocked",location:Y,proceed(){or(he,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ge.then(()=>n.history.go(te))},reset(){let Ie=new Map(M.blockers);Ie.set(he,yc),Ot({blockers:Ie})}});return}return Sn(F,Y)}),t){Tx(e,L);let F=()=>bx(e,L);e.addEventListener("pagehide",F),P=()=>e.removeEventListener("pagehide",F)}return M.initialized||Sn("POP",M.location,{initialHydration:!0}),K}function Rt(){T&&T(),P&&P(),b.clear(),x&&x.abort(),M.fetchers.forEach((F,Y)=>Tt(Y)),M.blockers.forEach((F,Y)=>Lr(Y))}function qn(F){return b.add(F),()=>b.delete(F)}function Ot(F,Y={}){F.matches&&(F.matches=F.matches.map(ge=>{let Ie=l[ge.route.id],je=ge.route;return je.element!==Ie.element||je.errorElement!==Ie.errorElement||je.hydrateFallbackElement!==Ie.hydrateFallbackElement?{...ge,route:Ie}:ge})),M={...M,...F};let te=[],he=[];M.fetchers.forEach((ge,Ie)=>{ge.state==="idle"&&(me.has(Ie)?te.push(Ie):he.push(Ie))}),me.forEach(ge=>{!M.fetchers.has(ge)&&!Q.has(ge)&&te.push(ge)}),[...b].forEach(ge=>ge(M,{deletedFetchers:te,viewTransitionOpts:Y.viewTransitionOpts,flushSync:Y.flushSync===!0})),te.forEach(ge=>Tt(ge)),he.forEach(ge=>M.fetchers.delete(ge))}function wn(F,Y,{flushSync:te}={}){let he=M.actionData!=null&&M.navigation.formMethod!=null&&pr(M.navigation.formMethod)&&M.navigation.state==="loading"&&F.state?._isRedirect!==!0,ge;Y.actionData?Object.keys(Y.actionData).length>0?ge=Y.actionData:ge=null:he?ge=M.actionData:ge=null;let Ie=Y.loaderData?a0(M.loaderData,Y.loaderData,Y.matches||[],Y.errors):M.loaderData,je=M.blockers;je.size>0&&(je=new Map(je),je.forEach((Ve,Le)=>je.set(Le,yc)));let Me=I?!1:Hs(F,Y.matches||M.matches),Pe=R===!0||M.navigation.formMethod!=null&&pr(M.navigation.formMethod)&&F.state?._isRedirect!==!0;h&&(c=h,h=void 0),I||C==="POP"||(C==="PUSH"?n.history.push(F,F.state):C==="REPLACE"&&n.history.replace(F,F.state));let Ge;if(C==="POP"){let Ve=L.get(M.location.pathname);Ve&&Ve.has(F.pathname)?Ge={currentLocation:M.location,nextLocation:F}:L.has(F.pathname)&&(Ge={currentLocation:F,nextLocation:M.location})}else if(B){let Ve=L.get(M.location.pathname);Ve?Ve.add(F.pathname):(Ve=new Set([F.pathname]),L.set(M.location.pathname,Ve)),Ge={currentLocation:M.location,nextLocation:F}}Ot({...Y,actionData:ge,loaderData:Ie,historyAction:C,location:F,initialized:!0,navigation:jg,revalidation:"idle",restoreScrollPosition:Me,preventScrollReset:Pe,blockers:je},{viewTransitionOpts:Ge,flushSync:te===!0}),C="POP",R=!1,B=!1,I=!1,xe=!1,He?.resolve(),He=null}async function vr(F,Y){if(typeof F=="number"){n.history.go(F);return}let te=ly(M.location,M.matches,m,F,Y?.fromRouteId,Y?.relative),{path:he,submission:ge,error:Ie}=Zb(!1,te,Y),je=M.location,Me=jc(M.location,he,Y&&Y.state);Me={...Me,...n.history.encodeLocation(Me)};let Pe=Y&&Y.replace!=null?Y.replace:void 0,Ge="PUSH";Pe===!0?Ge="REPLACE":Pe===!1||ge!=null&&pr(ge.formMethod)&&ge.formAction===M.location.pathname+M.location.search&&(Ge="REPLACE");let Ve=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,Le=(Y&&Y.flushSync)===!0,at=li({currentLocation:je,nextLocation:Me,historyAction:Ge});if(at){or(at,{state:"blocked",location:Me,proceed(){or(at,{state:"proceeding",proceed:void 0,reset:void 0,location:Me}),vr(F,Y)},reset(){let bt=new Map(M.blockers);bt.set(at,yc),Ot({blockers:bt})}});return}await Sn(Ge,Me,{submission:ge,pendingError:Ie,preventScrollReset:Ve,replace:Y&&Y.replace,enableViewTransition:Y&&Y.viewTransition,flushSync:Le})}function ai(){He||(He=wx()),ye(),Ot({revalidation:"loading"});let F=He.promise;return M.navigation.state==="submitting"?F:M.navigation.state==="idle"?(Sn(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),F):(Sn(C||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:B===!0}),F)}async function Sn(F,Y,te){x&&x.abort(),x=null,C=F,I=(te&&te.startUninterruptedRevalidation)===!0,ui(M.location,M.matches),R=(te&&te.preventScrollReset)===!0,B=(te&&te.enableViewTransition)===!0;let he=h||c,ge=te&&te.overrideNavigation,Ie=te?.initialHydration&&M.matches&&M.matches.length>0&&!Z?M.matches:Ta(he,Y,m),je=(te&&te.flushSync)===!0;if(Ie&&M.initialized&&!xe&&gx(M.location,Y)&&!(te&&te.submission&&pr(te.submission.formMethod))){wn(Y,{matches:Ie},{flushSync:je});return}let Me=Zn(Ie,he,Y.pathname);if(Me.active&&Me.matches&&(Ie=Me.matches),!Ie){let{error:Ct,notFoundMatches:et,route:It}=rs(Y.pathname);wn(Y,{matches:et,loaderData:{},errors:{[It.id]:Ct}},{flushSync:je});return}x=new AbortController;let Pe=Ll(n.history,Y,x.signal,te&&te.submission),Ge=n.unstable_getContext?await n.unstable_getContext():new Qb,Ve;if(te&&te.pendingError)Ve=[ba(Ie).route.id,{type:"error",error:te.pendingError}];else if(te&&te.submission&&pr(te.submission.formMethod)){let Ct=await Ai(Pe,Y,te.submission,Ie,Ge,Me.active,te&&te.initialHydration===!0,{replace:te.replace,flushSync:je});if(Ct.shortCircuited)return;if(Ct.pendingActionResult){let[et,It]=Ct.pendingActionResult;if(xr(It)&&Bc(It.error)&&It.error.status===404){x=null,wn(Y,{matches:Ct.matches,loaderData:{},errors:{[et]:It.error}});return}}Ie=Ct.matches||Ie,Ve=Ct.pendingActionResult,ge=zg(Y,te.submission),je=!1,Me.active=!1,Pe=Ll(n.history,Pe.url,Pe.signal)}let{shortCircuited:Le,matches:at,loaderData:bt,errors:jt}=await qs(Pe,Y,Ie,Ge,Me.active,ge,te&&te.submission,te&&te.fetcherSubmission,te&&te.replace,te&&te.initialHydration===!0,je,Ve);Le||(x=null,wn(Y,{matches:at||Ie,...o0(Ve),loaderData:bt,errors:jt}))}async function Ai(F,Y,te,he,ge,Ie,je,Me={}){ye();let Pe=vx(Y,te);if(Ot({navigation:Pe},{flushSync:Me.flushSync===!0}),Ie){let Le=await Ci(he,Y.pathname,F.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let at=ba(Le.partialMatches).route.id;return{matches:Le.partialMatches,pendingActionResult:[at,{type:"error",error:Le.error}]}}else if(Le.matches)he=Le.matches;else{let{notFoundMatches:at,error:bt,route:jt}=rs(Y.pathname);return{matches:at,pendingActionResult:[jt.id,{type:"error",error:bt}]}}}let Ge,Ve=Gh(he,Y);if(!Ve.route.action&&!Ve.route.lazy)Ge={type:"error",error:Zr(405,{method:F.method,pathname:Y.pathname,routeId:Ve.route.id})};else{let Le=ql(a,l,F,he,Ve,je?[]:i,ge),at=await we(F,Le,ge,null);if(Ge=at[Ve.route.id],!Ge){for(let bt of he)if(at[bt.route.id]){Ge=at[bt.route.id];break}}if(F.signal.aborted)return{shortCircuited:!0}}if(Ro(Ge)){let Le;return Me&&Me.replace!=null?Le=Me.replace:Le=r0(Ge.response.headers.get("Location"),new URL(F.url),m)===M.location.pathname+M.location.search,await ae(F,Ge,!0,{submission:te,replace:Le}),{shortCircuited:!0}}if(xr(Ge)){let Le=ba(he,Ve.route.id);return(Me&&Me.replace)!==!0&&(C="PUSH"),{matches:he,pendingActionResult:[Le.route.id,Ge,Ve.route.id]}}return{matches:he,pendingActionResult:[Ve.route.id,Ge]}}async function qs(F,Y,te,he,ge,Ie,je,Me,Pe,Ge,Ve,Le){let at=Ie||zg(Y,je),bt=je||Me||c0(at),jt=!I&&!Ge;if(ge){if(jt){let Kt=kn(Le);Ot({navigation:at,...Kt!==void 0?{actionData:Kt}:{}},{flushSync:Ve})}let Ze=await Ci(te,Y.pathname,F.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){let Kt=ba(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,loaderData:{},errors:{[Kt]:Ze.error}}}else if(Ze.matches)te=Ze.matches;else{let{error:Kt,notFoundMatches:is,route:er}=rs(Y.pathname);return{matches:is,loaderData:{},errors:{[er.id]:Kt}}}}let Ct=h||c,{dsMatches:et,revalidatingFetchers:It}=Wb(F,he,a,l,n.history,M,te,bt,Y,Ge?[]:i,Ge===!0,xe,Fe,me,le,j,Ct,m,n.patchRoutesOnNavigation!=null,Le);if(Se=++pe,!n.dataStrategy&&!et.some(Ze=>Ze.shouldLoad)&&!et.some(Ze=>Ze.route.unstable_middleware)&&It.length===0){let Ze=sr();return wn(Y,{matches:te,loaderData:{},errors:Le&&xr(Le[1])?{[Le[0]]:Le[1].error}:null,...o0(Le),...Ze?{fetchers:new Map(M.fetchers)}:{}},{flushSync:Ve}),{shortCircuited:!0}}if(jt){let Ze={};if(!ge){Ze.navigation=at;let Kt=kn(Le);Kt!==void 0&&(Ze.actionData=Kt)}It.length>0&&(Ze.fetchers=Xo(It)),Ot(Ze,{flushSync:Ve})}It.forEach(Ze=>{en(Ze.key),Ze.controller&&Q.set(Ze.key,Ze.controller)});let lr=()=>It.forEach(Ze=>en(Ze.key));x&&x.signal.addEventListener("abort",lr);let{loaderResults:Mn,fetcherResults:An}=await Te(et,It,F,he);if(F.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",lr),It.forEach(Ze=>Q.delete(Ze.key));let Wn=kh(Mn);if(Wn)return await ae(F,Wn.result,!0,{replace:Pe}),{shortCircuited:!0};if(Wn=kh(An),Wn)return j.add(Wn.key),await ae(F,Wn.result,!0,{replace:Pe}),{shortCircuited:!0};let{loaderData:$s,errors:Er}=s0(M,te,Mn,Le,It,An);Ge&&M.errors&&(Er={...M.errors,...Er});let jr=sr(),Tr=ar(Se),Jn=jr||Tr||It.length>0;return{matches:te,loaderData:$s,errors:Er,...Jn?{fetchers:new Map(M.fetchers)}:{}}}function kn(F){if(F&&!xr(F[1]))return{[F[0]]:F[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function Xo(F){return F.forEach(Y=>{let te=M.fetchers.get(Y.key),he=_c(void 0,te?te.data:void 0);M.fetchers.set(Y.key,he)}),new Map(M.fetchers)}async function Ri(F,Y,te,he){en(F);let ge=(he&&he.flushSync)===!0,Ie=h||c,je=ly(M.location,M.matches,m,te,Y,he?.relative),Me=Ta(Ie,je,m),Pe=Zn(Me,Ie,je);if(Pe.active&&Pe.matches&&(Me=Pe.matches),!Me){Ce(F,Y,Zr(404,{pathname:je}),{flushSync:ge});return}let{path:Ge,submission:Ve,error:Le}=Zb(!0,je,he);if(Le){Ce(F,Y,Le,{flushSync:ge});return}let at=n.unstable_getContext?await n.unstable_getContext():new Qb,bt=(he&&he.preventScrollReset)===!0;if(Ve&&pr(Ve.formMethod)){await q(F,Y,Ge,Me,at,Pe.active,ge,bt,Ve);return}le.set(F,{routeId:Y,path:Ge}),await J(F,Y,Ge,Me,at,Pe.active,ge,bt,Ve)}async function q(F,Y,te,he,ge,Ie,je,Me,Pe){ye(),le.delete(F);let Ge=M.fetchers.get(F);Ee(F,Ex(Pe,Ge),{flushSync:je});let Ve=new AbortController,Le=Ll(n.history,te,Ve.signal,Pe);if(Ie){let Ft=await Ci(he,new URL(Le.url).pathname,Le.signal,F);if(Ft.type==="aborted")return;if(Ft.type==="error"){Ce(F,Y,Ft.error,{flushSync:je});return}else if(Ft.matches)he=Ft.matches;else{Ce(F,Y,Zr(404,{pathname:te}),{flushSync:je});return}}let at=Gh(he,te);if(!at.route.action&&!at.route.lazy){let Ft=Zr(405,{method:Pe.formMethod,pathname:te,routeId:Y});Ce(F,Y,Ft,{flushSync:je});return}Q.set(F,Ve);let bt=pe,jt=ql(a,l,Le,he,at,i,ge),et=(await we(Le,jt,ge,F))[at.route.id];if(Le.signal.aborted){Q.get(F)===Ve&&Q.delete(F);return}if(me.has(F)){if(Ro(et)||xr(et)){Ee(F,va(void 0));return}}else{if(Ro(et))if(Q.delete(F),Se>bt){Ee(F,va(void 0));return}else return j.add(F),Ee(F,_c(Pe)),ae(Le,et,!1,{fetcherSubmission:Pe,preventScrollReset:Me});if(xr(et)){Ce(F,Y,et.error);return}}let It=M.navigation.location||M.location,lr=Ll(n.history,It,Ve.signal),Mn=h||c,An=M.navigation.state!=="idle"?Ta(Mn,M.navigation.location,m):M.matches;ct(An,"Didn't find any matches after fetcher action");let Wn=++pe;Ke.set(F,Wn);let $s=_c(Pe,et.data);M.fetchers.set(F,$s);let{dsMatches:Er,revalidatingFetchers:jr}=Wb(lr,ge,a,l,n.history,M,An,Pe,It,i,!1,xe,Fe,me,le,j,Mn,m,n.patchRoutesOnNavigation!=null,[at.route.id,et]);jr.filter(Ft=>Ft.key!==F).forEach(Ft=>{let ci=Ft.key,Ks=M.fetchers.get(ci),Ys=_c(void 0,Ks?Ks.data:void 0);M.fetchers.set(ci,Ys),en(ci),Ft.controller&&Q.set(ci,Ft.controller)}),Ot({fetchers:new Map(M.fetchers)});let Tr=()=>jr.forEach(Ft=>en(Ft.key));Ve.signal.addEventListener("abort",Tr);let{loaderResults:Jn,fetcherResults:Ze}=await Te(Er,jr,lr,ge);if(Ve.signal.aborted)return;if(Ve.signal.removeEventListener("abort",Tr),Ke.delete(F),Q.delete(F),jr.forEach(Ft=>Q.delete(Ft.key)),M.fetchers.has(F)){let Ft=va(et.data);M.fetchers.set(F,Ft)}let Kt=kh(Jn);if(Kt)return ae(lr,Kt.result,!1,{preventScrollReset:Me});if(Kt=kh(Ze),Kt)return j.add(Kt.key),ae(lr,Kt.result,!1,{preventScrollReset:Me});let{loaderData:is,errors:er}=s0(M,An,Jn,void 0,jr,Ze);ar(Wn),M.navigation.state==="loading"&&Wn>Se?(ct(C,"Expected pending action"),x&&x.abort(),wn(M.navigation.location,{matches:An,loaderData:is,errors:er,fetchers:new Map(M.fetchers)})):(Ot({errors:er,loaderData:a0(M.loaderData,is,An,er),fetchers:new Map(M.fetchers)}),xe=!1)}async function J(F,Y,te,he,ge,Ie,je,Me,Pe){let Ge=M.fetchers.get(F);Ee(F,_c(Pe,Ge?Ge.data:void 0),{flushSync:je});let Ve=new AbortController,Le=Ll(n.history,te,Ve.signal);if(Ie){let It=await Ci(he,new URL(Le.url).pathname,Le.signal,F);if(It.type==="aborted")return;if(It.type==="error"){Ce(F,Y,It.error,{flushSync:je});return}else if(It.matches)he=It.matches;else{Ce(F,Y,Zr(404,{pathname:te}),{flushSync:je});return}}let at=Gh(he,te);Q.set(F,Ve);let bt=pe,jt=ql(a,l,Le,he,at,i,ge),et=(await we(Le,jt,ge,F))[at.route.id];if(Q.get(F)===Ve&&Q.delete(F),!Le.signal.aborted){if(me.has(F)){Ee(F,va(void 0));return}if(Ro(et))if(Se>bt){Ee(F,va(void 0));return}else{j.add(F),await ae(Le,et,!1,{preventScrollReset:Me});return}if(xr(et)){Ce(F,Y,et.error);return}Ee(F,va(et.data))}}async function ae(F,Y,te,{submission:he,fetcherSubmission:ge,preventScrollReset:Ie,replace:je}={}){Y.response.headers.has("X-Remix-Revalidate")&&(xe=!0);let Me=Y.response.headers.get("Location");ct(Me,"Expected a Location header on the redirect Response"),Me=r0(Me,new URL(F.url),m);let Pe=jc(M.location,Me,{_isRedirect:!0});if(t){let jt=!1;if(Y.response.headers.has("X-Remix-Reload-Document"))jt=!0;else if(e_(Me)){const Ct=HS(Me,!0);jt=Ct.origin!==e.location.origin||ei(Ct.pathname,m)==null}if(jt){je?e.location.replace(Me):e.location.assign(Me);return}}x=null;let Ge=je===!0||Y.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ve,formAction:Le,formEncType:at}=M.navigation;!he&&!ge&&Ve&&Le&&at&&(he=c0(M.navigation));let bt=he||ge;if(ex.has(Y.response.status)&&bt&&pr(bt.formMethod))await Sn(Ge,Pe,{submission:{...bt,formAction:Me},preventScrollReset:Ie||R,enableViewTransition:te?B:void 0});else{let jt=zg(Pe,he);await Sn(Ge,Pe,{overrideNavigation:jt,fetcherSubmission:ge,preventScrollReset:Ie||R,enableViewTransition:te?B:void 0})}}async function we(F,Y,te,he){let ge,Ie={};try{ge=await cx(p,F,Y,he,te,!1)}catch(je){return Y.filter(Me=>Me.shouldLoad).forEach(Me=>{Ie[Me.route.id]={type:"error",error:je}}),Ie}if(F.signal.aborted)return Ie;for(let[je,Me]of Object.entries(ge))if(yx(Me)){let Pe=Me.result;Ie[je]={type:"redirect",response:mx(Pe,F,je,Y,m)}}else Ie[je]=await dx(Me);return Ie}async function Te(F,Y,te,he){let ge=we(te,F,he,null),Ie=Promise.all(Y.map(async Pe=>{if(Pe.matches&&Pe.match&&Pe.request&&Pe.controller){let Ve=(await we(Pe.request,Pe.matches,he,Pe.key))[Pe.match.route.id];return{[Pe.key]:Ve}}else return Promise.resolve({[Pe.key]:{type:"error",error:Zr(404,{pathname:Pe.path})}})})),je=await ge,Me=(await Ie).reduce((Pe,Ge)=>Object.assign(Pe,Ge),{});return{loaderResults:je,fetcherResults:Me}}function ye(){xe=!0,le.forEach((F,Y)=>{Q.has(Y)&&Fe.add(Y),en(Y)})}function Ee(F,Y,te={}){M.fetchers.set(F,Y),Ot({fetchers:new Map(M.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Ce(F,Y,te,he={}){let ge=ba(M.matches,Y);Tt(F),Ot({errors:{[ge.route.id]:te},fetchers:new Map(M.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function st(F){return _e.set(F,(_e.get(F)||0)+1),me.has(F)&&me.delete(F),M.fetchers.get(F)||tx}function Tt(F){let Y=M.fetchers.get(F);Q.has(F)&&!(Y&&Y.state==="loading"&&Ke.has(F))&&en(F),le.delete(F),Ke.delete(F),j.delete(F),me.delete(F),Fe.delete(F),M.fetchers.delete(F)}function oi(F){let Y=(_e.get(F)||0)-1;Y<=0?(_e.delete(F),me.add(F)):_e.set(F,Y),Ot({fetchers:new Map(M.fetchers)})}function en(F){let Y=Q.get(F);Y&&(Y.abort(),Q.delete(F))}function Vr(F){for(let Y of F){let te=st(Y),he=va(te.data);M.fetchers.set(Y,he)}}function sr(){let F=[],Y=!1;for(let te of j){let he=M.fetchers.get(te);ct(he,`Expected fetcher: ${te}`),he.state==="loading"&&(j.delete(te),F.push(te),Y=!0)}return Vr(F),Y}function ar(F){let Y=[];for(let[te,he]of Ke)if(he<F){let ge=M.fetchers.get(te);ct(ge,`Expected fetcher: ${te}`),ge.state==="loading"&&(en(te),Ke.delete(te),Y.push(te))}return Vr(Y),Y.length>0}function Xn(F,Y){let te=M.blockers.get(F)||yc;return ke.get(F)!==Y&&ke.set(F,Y),te}function Lr(F){M.blockers.delete(F),ke.delete(F)}function or(F,Y){let te=M.blockers.get(F)||yc;ct(te.state==="unblocked"&&Y.state==="blocked"||te.state==="blocked"&&Y.state==="blocked"||te.state==="blocked"&&Y.state==="proceeding"||te.state==="blocked"&&Y.state==="unblocked"||te.state==="proceeding"&&Y.state==="unblocked",`Invalid blocker state transition: ${te.state} -> ${Y.state}`);let he=new Map(M.blockers);he.set(F,Y),Ot({blockers:he})}function li({currentLocation:F,nextLocation:Y,historyAction:te}){if(ke.size===0)return;ke.size>1&&sn(!1,"A router only supports one blocker at a time");let he=Array.from(ke.entries()),[ge,Ie]=he[he.length-1],je=M.blockers.get(ge);if(!(je&&je.state==="proceeding")&&Ie({currentLocation:F,nextLocation:Y,historyAction:te}))return ge}function rs(F){let Y=Zr(404,{pathname:F}),te=h||c,{matches:he,route:ge}=l0(te);return{notFoundMatches:he,route:ge,error:Y}}function Xa(F,Y,te){if(A=F,V=Y,D=te||null,!z&&M.navigation===jg){z=!0;let he=Hs(M.location,M.matches);he!=null&&Ot({restoreScrollPosition:he})}return()=>{A=null,V=null,D=null}}function Ur(F,Y){return D&&D(F,Y.map(he=>DN(he,M.loaderData)))||F.key}function ui(F,Y){if(A&&V){let te=Ur(F,Y);A[te]=V()}}function Hs(F,Y){if(A){let te=Ur(F,Y),he=A[te];if(typeof he=="number")return he}return null}function Zn(F,Y,te){if(n.patchRoutesOnNavigation)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:Hh(Y,te,m,!0)}}else return{active:!0,matches:Hh(Y,te,m,!0)||[]};return{active:!1,matches:null}}async function Ci(F,Y,te,he){if(!n.patchRoutesOnNavigation)return{type:"success",matches:F};let ge=F;for(;;){let Ie=h==null,je=h||c,Me=l;try{await n.patchRoutesOnNavigation({signal:te,path:Y,matches:ge,fetcherKey:he,patch:(Ve,Le)=>{te.aborted||Jb(Ve,Le,je,Me,a,!1)}})}catch(Ve){return{type:"error",error:Ve,partialMatches:ge}}finally{Ie&&!te.aborted&&(c=[...c])}if(te.aborted)return{type:"aborted"};let Pe=Ta(je,Y,m);if(Pe)return{type:"success",matches:Pe};let Ge=Hh(je,Y,m,!0);if(!Ge||ge.length===Ge.length&&ge.every((Ve,Le)=>Ve.route.id===Ge[Le].route.id))return{type:"success",matches:null};ge=Ge}}function Ii(F){l={},h=zc(F,a,void 0,l)}function Gs(F,Y,te=!1){let he=h==null;Jb(F,Y,h||c,l,a,te),he&&(c=[...c],Ot({}))}return K={get basename(){return m},get future(){return y},get state(){return M},get routes(){return c},get window(){return e},initialize:$t,subscribe:qn,enableScrollRestoration:Xa,navigate:vr,fetch:Ri,revalidate:ai,createHref:F=>n.history.createHref(F),encodeLocation:F=>n.history.encodeLocation(F),getFetcher:st,deleteFetcher:oi,dispose:Rt,getBlocker:Xn,deleteBlocker:Lr,patchRoutes:Gs,_internalFetchControllers:Q,_internalSetRoutes:Ii,_internalSetStateDoNotUseOrYouWillBreakYourApp(F){Ot(F)}},K}function sx(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function ly(n,e,t,i,a,l){let c,h;if(a){c=[];for(let p of e)if(c.push(p),p.route.id===a){h=p;break}}else c=e,h=e[e.length-1];let m=$d(i||".",Gd(c),ei(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&h){let p=t_(m.search);if(h.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let y=new URLSearchParams(m.search),T=y.getAll("index");y.delete("index"),T.filter(A=>A).forEach(A=>y.append("index",A));let b=y.toString();m.search=b?`?${b}`:""}}return t!=="/"&&(m.pathname=HN({basename:t,pathname:m.pathname})),Ma(m)}function Zb(n,e,t){if(!t||!sx(t))return{path:e};if(t.formMethod&&!_x(t.formMethod))return{path:e,error:Zr(405,{method:t.formMethod})};let i=()=>({path:e,error:Zr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=rA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!pr(l))return i();let T=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[A,D])=>`${b}${A}=${D}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:T}}}else if(t.formEncType==="application/json"){if(!pr(l))return i();try{let T=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:T,text:void 0}}}catch{return i()}}}ct(typeof FormData=="function","FormData is not available in this environment");let h,m;if(t.formData)h=fy(t.formData),m=t.formData;else if(t.body instanceof FormData)h=fy(t.body),m=t.body;else if(t.body instanceof URLSearchParams)h=t.body,m=i0(h);else if(t.body==null)h=new URLSearchParams,m=new FormData;else try{h=new URLSearchParams(t.body),m=i0(h)}catch{return i()}let p={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(pr(p.formMethod))return{path:e,submission:p};let y=Ha(e);return n&&y.search&&t_(y.search)&&h.append("index",""),y.search=`?${h}`,{path:Ma(y),submission:p}}function Wb(n,e,t,i,a,l,c,h,m,p,y,T,b,A,D,V,z,U,Z,H){let ne=H?xr(H[1])?H[1].error:H[1].data:void 0,K=a.createURL(l.location),M=a.createURL(m),C;if(y&&l.errors){let I=Object.keys(l.errors)[0];C=c.findIndex(xe=>xe.route.id===I)}else if(H&&xr(H[1])){let I=H[0];C=c.findIndex(xe=>xe.route.id===I)-1}let R=H?H[1].statusCode:void 0,x=R&&R>=400,B={currentUrl:K,currentParams:l.matches[0]?.params||{},nextUrl:M,nextParams:c[0].params,...h,actionResult:ne,actionStatus:R},L=c.map((I,xe)=>{let{route:Fe}=I,Q=null;if(C!=null&&xe>C?Q=!1:Fe.lazy?Q=!0:Fe.loader==null?Q=!1:y?Q=uy(Fe,l.loaderData,l.errors):ax(l.loaderData,l.matches[xe],I)&&(Q=!0),Q!==null)return cy(t,i,n,I,p,e,Q);let pe=x?!1:T||K.pathname+K.search===M.pathname+M.search||K.search!==M.search||ox(l.matches[xe],I),Se={...B,defaultShouldRevalidate:pe},Ke=od(I,Se);return cy(t,i,n,I,p,e,Ke,Se)}),P=[];return D.forEach((I,xe)=>{if(y||!c.some(_e=>_e.route.id===I.routeId)||A.has(xe))return;let Fe=l.fetchers.get(xe),Q=Fe&&Fe.state!=="idle"&&Fe.data===void 0,pe=Ta(z,I.path,U);if(!pe){if(Z&&Q)return;P.push({key:xe,routeId:I.routeId,path:I.path,matches:null,match:null,request:null,controller:null});return}if(V.has(xe))return;let Se=Gh(pe,I.path),Ke=new AbortController,j=Ll(a,I.path,Ke.signal),le=null;if(b.has(xe))b.delete(xe),le=ql(t,i,j,pe,Se,p,e);else if(Q)T&&(le=ql(t,i,j,pe,Se,p,e));else{let _e={...B,defaultShouldRevalidate:x?!1:T};od(Se,_e)&&(le=ql(t,i,j,pe,Se,p,e,_e))}le&&P.push({key:xe,routeId:I.routeId,path:I.path,matches:le,match:Se,request:j,controller:Ke})}),{dsMatches:L,revalidatingFetchers:P}}function uy(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&n.id in e,a=t!=null&&t[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function ax(n,e,t){let i=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return i||a}function ox(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function od(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Jb(n,e,t,i,a,l){let c;if(n){let p=i[n];ct(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),c=p.children}else c=t;let h=[],m=[];if(e.forEach(p=>{let y=c.find(T=>ZS(p,T));y?m.push({existingRoute:y,newRoute:p}):h.push(p)}),h.length>0){let p=zc(h,a,[n||"_","patch",String(c?.length||"0")],i);c.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:T}=m[p],b=y,[A]=zc([T],a,[],{},!0);Object.assign(b,{element:A.element?A.element:b.element,errorElement:A.errorElement?A.errorElement:b.errorElement,hydrateFallbackElement:A.hydrateFallbackElement?A.hydrateFallbackElement:b.hydrateFallbackElement})}}function ZS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>e.children?.some(a=>ZS(t,a))):!1}var e0=new WeakMap,WS=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let a=t[e.id];if(ct(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[n];if(!l)return;let c=e0.get(a);c||(c={},e0.set(a,c));let h=c[n];if(h)return h;let m=(async()=>{let p=CN(n),T=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)sn(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(T)sn(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(a,{[n]:b}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(b=>b===void 0)&&(a.lazy=void 0))})();return c[n]=m,m},t0=new WeakMap;function lx(n,e,t,i,a){let l=t[n.id];if(ct(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=t0.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let T=(async()=>{ct(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),A={};for(let D in b){let V=b[D];if(V===void 0)continue;let z=NN(D),Z=l[D]!==void 0&&D!=="hasErrorBoundary";z?sn(!z,"Route property "+D+" is not a supported property to be returned from a lazy route function. This property will be ignored."):Z?sn(!Z,`Route "${l.id}" has a static property "${D}" defined but its lazy function is also returning a value for this property. The lazy route property "${D}" will be ignored.`):A[D]=V}Object.assign(l,A),Object.assign(l,{...i(l),lazy:void 0})})();return t0.set(l,T),T.catch(()=>{}),{lazyRoutePromise:T,lazyHandlerPromise:T}}let c=Object.keys(n.lazy),h=[],m;for(let y of c){if(a&&a.includes(y))continue;let T=WS({key:y,route:n,manifest:t,mapRouteProperties:i});T&&(h.push(T),y===e&&(m=T))}let p=h.length>0?Promise.all(h).then(()=>{}):void 0;return p?.catch(()=>{}),m?.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function n0(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,l)=>{t[e[l].route.id]=a}),t}async function ux(n){if(!n.matches.some(t=>t.route.unstable_middleware))return n0(n);let e=!1;return eA(n,()=>(e=!0,n0(n)),(t,i)=>JS(t,i,n.matches,e))}function JS(n,e,t,i){if(i)return{[e]:{type:"error",result:n}};{let a=Math.min(t.findIndex(c=>c.route.id===e)||0,t.findIndex(c=>c.unstable_shouldCallHandler())||0);return{[ba(t,t[a].route.id).route.id]:{type:"error",result:n}}}}async function eA(n,e,t){let{matches:i,request:a,params:l,context:c}=n,h=i.flatMap(p=>p.route.unstable_middleware?p.route.unstable_middleware.map(y=>[p.route.id,y]):[]),m={};return await tA({request:a,params:l,context:c},h,e,t,m),m}async function tA(n,e,t,i,a={},l=0){let{request:c}=n;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let h=e[l];if(!h){let b=await t();Object.assign(a,b);return}let[m,p]=h,y=!1,T=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");y=!0;try{let b=await tA(n,e,t,i,a,l+1);Object.assign(a,b)}catch(b){let A=await i(b,m);Object.assign(a,A)}};try{let b=await p({request:n.request,params:n.params,context:n.context},T);typeof b<"u"&&console.warn("client middlewares are not intended to return values, the value will be ignored",b),y||await T()}catch(b){let A=await i(b,m);Object.assign(a,A)}}function nA(n,e,t,i,a){let l=WS({key:"unstable_middleware",route:i.route,manifest:e,mapRouteProperties:n}),c=lx(i.route,pr(t.method)?"action":"loader",e,n,a);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function cy(n,e,t,i,a,l,c,h=null){let m=!1,p=nA(n,e,t,i,a);return{...i,_lazyPromises:p,shouldLoad:c,unstable_shouldRevalidateArgs:h,unstable_shouldCallHandler(y){return m=!0,h?typeof y=="boolean"?od(i,{...h,defaultShouldRevalidate:y}):od(i,h):c},resolve(y){return m||c||y&&!pr(t.method)&&(i.route.lazy||i.route.loader)?fx({request:t,match:i,lazyHandlerPromise:p?.handler,lazyRoutePromise:p?.route,handlerOverride:y,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function ql(n,e,t,i,a,l,c,h=null){return i.map(m=>m.route.id!==a.route.id?{...m,shouldLoad:!1,unstable_shouldRevalidateArgs:h,unstable_shouldCallHandler:()=>!1,_lazyPromises:nA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:cy(n,e,t,m,l,c,!0,h))}async function cx(n,e,t,i,a,l){t.some(p=>p._lazyPromises?.middleware)&&await Promise.all(t.map(p=>p._lazyPromises?.middleware));let c={request:e,params:t[0].params,context:a,matches:t},m=await n({...c,fetcherKey:i,unstable_runClientMiddleware:p=>{let y=c,T=!1;return eA(y,()=>(T=!0,p({...y,fetcherKey:i,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}})),(b,A)=>JS(b,A,t,T))}});try{await Promise.all(t.flatMap(p=>[p._lazyPromises?.handler,p._lazyPromises?.route]))}catch{}return m}async function fx({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:i,handlerOverride:a,scopedContext:l}){let c,h,m=pr(n.method),p=m?"action":"loader",y=T=>{let b,A=new Promise((z,U)=>b=U);h=()=>b(),n.signal.addEventListener("abort",h);let D=z=>typeof T!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${e.route.id}]`)):T({request:n,params:e.params,context:l},...z!==void 0?[z]:[]),V=(async()=>{try{return{type:"data",result:await(a?a(U=>D(U)):D())}}catch(z){return{type:"error",result:z}}})();return Promise.race([V,A])};try{let T=m?e.route.action:e.route.loader;if(t||i)if(T){let b,[A]=await Promise.all([y(T).catch(D=>{b=D}),t,i]);if(b!==void 0)throw b;c=A}else{await t;let b=m?e.route.action:e.route.loader;if(b)[c]=await Promise.all([y(b),i]);else if(p==="action"){let A=new URL(n.url),D=A.pathname+A.search;throw Zr(405,{method:n.method,pathname:D,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(T)c=await y(T);else{let b=new URL(n.url),A=b.pathname+b.search;throw Zr(404,{pathname:A})}}catch(T){return{type:"error",result:T}}finally{h&&n.signal.removeEventListener("abort",h)}return c}async function hx(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function dx(n){let{result:e,type:t}=n;if(iA(e)){let i;try{i=await hx(e)}catch(a){return{type:"error",error:a}}return t==="error"?{type:"error",error:new ad(e.status,e.statusText,i),statusCode:e.status,headers:e.headers}:{type:"data",data:i,statusCode:e.status,headers:e.headers}}return t==="error"?u0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ad(e.init?.status||500,void 0,e.data),statusCode:Bc(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Bc(e)?e.status:void 0}:u0(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function mx(n,e,t,i,a){let l=n.headers.get("Location");if(ct(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!e_(l)){let c=i.slice(0,i.findIndex(h=>h.route.id===t)+1);l=ly(new URL(e.url),c,a,l),n.headers.set("Location",l)}return n}function r0(n,e,t){if(e_(n)){let i=n,a=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=ei(a.pathname,t)!=null;if(a.origin===e.origin&&l)return a.pathname+a.search+a.hash}return n}function Ll(n,e,t,i){let a=n.createURL(rA(e)).toString(),l={signal:t};if(i&&pr(i.formMethod)){let{formMethod:c,formEncType:h}=i;l.method=c.toUpperCase(),h==="application/json"?(l.headers=new Headers({"Content-Type":h}),l.body=JSON.stringify(i.json)):h==="text/plain"?l.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?l.body=fy(i.formData):l.body=i.formData}return new Request(a,l)}function fy(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function i0(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function px(n,e,t,i=!1,a=!1){let l={},c=null,h,m=!1,p={},y=t&&xr(t[1])?t[1].error:void 0;return n.forEach(T=>{if(!(T.route.id in e))return;let b=T.route.id,A=e[b];if(ct(!Ro(A),"Cannot handle redirect results in processLoaderData"),xr(A)){let D=A.error;if(y!==void 0&&(D=y,y=void 0),c=c||{},a)c[b]=D;else{let V=ba(n,b);c[V.route.id]==null&&(c[V.route.id]=D)}i||(l[b]=XS),m||(m=!0,h=Bc(A.error)?A.error.status:500),A.headers&&(p[b]=A.headers)}else l[b]=A.data,A.statusCode&&A.statusCode!==200&&!m&&(h=A.statusCode),A.headers&&(p[b]=A.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:h||200,loaderHeaders:p}}function s0(n,e,t,i,a,l){let{loaderData:c,errors:h}=px(e,t,i);return a.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:T}=m;if(T&&T.signal.aborted)return;let b=l[p];if(ct(b,"Did not find corresponding fetcher result"),xr(b)){let A=ba(n.matches,y?.route.id);h&&h[A.route.id]||(h={...h,[A.route.id]:b.error}),n.fetchers.delete(p)}else if(Ro(b))ct(!1,"Unhandled fetcher revalidation redirect");else{let A=va(b.data);n.fetchers.set(p,A)}}),{loaderData:c,errors:h}}function a0(n,e,t,i){let a=Object.entries(e).filter(([,l])=>l!==XS).reduce((l,[c,h])=>(l[c]=h,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(a[c]=n[c]),i&&i.hasOwnProperty(c))break}return a}function o0(n){return n?xr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ba(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function l0(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zr(n,{pathname:e,routeId:t,method:i,type:a,message:l}={}){let c="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?h=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(h="Unable to encode submission body")):n===403?(c="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",h=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?h=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(h=`Invalid request method "${i.toUpperCase()}"`)),new ad(n||500,c,new Error(h),!0)}function kh(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,a]=e[t];if(Ro(a))return{key:i,result:a}}}function rA(n){let e=typeof n=="string"?Ha(n):n;return Ma({...e,hash:""})}function gx(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function yx(n){return iA(n.result)&&JN.has(n.result.status)}function xr(n){return n.type==="error"}function Ro(n){return(n&&n.type)==="redirect"}function u0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function iA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function _x(n){return WN.has(n.toUpperCase())}function pr(n){return XN.has(n.toUpperCase())}function t_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Gh(n,e){let t=typeof e=="string"?Ha(e).search:e.search;if(n[n.length-1].route.index&&t_(t||""))return n[n.length-1];let i=KS(n);return i[i.length-1]}function c0(n){let{formMethod:e,formAction:t,formEncType:i,text:a,formData:l,json:c}=n;if(!(!e||!t||!i)){if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function zg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function vx(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function _c(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ex(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function va(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Tx(n,e){try{let t=n.sessionStorage.getItem(QS);if(t){let i=JSON.parse(t);for(let[a,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function bx(n,e){if(e.size>0){let t={};for(let[i,a]of e)t[i]=[...a];try{n.sessionStorage.setItem(QS,JSON.stringify(t))}catch(i){sn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function wx(){let n,e,t=new Promise((i,a)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Ho=k.createContext(null);Ho.displayName="DataRouter";var nf=k.createContext(null);nf.displayName="DataRouterState";k.createContext(!1);var n_=k.createContext({isTransitioning:!1});n_.displayName="ViewTransition";var sA=k.createContext(new Map);sA.displayName="Fetchers";var Sx=k.createContext(null);Sx.displayName="Await";var bi=k.createContext(null);bi.displayName="Navigation";var Kd=k.createContext(null);Kd.displayName="Location";var ri=k.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var r_=k.createContext(null);r_.displayName="RouteError";function Ax(n,{relative:e}={}){ct(uu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=k.useContext(bi),{hash:a,pathname:l,search:c}=rf(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Gi([t,l])),i.createHref({pathname:h,search:c,hash:a})}function uu(){return k.useContext(Kd)!=null}function wi(){return ct(uu(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Kd).location}var aA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oA(n){k.useContext(bi).static||k.useLayoutEffect(n)}function cu(){let{isDataRoute:n}=k.useContext(ri);return n?Bx():Rx()}function Rx(){ct(uu(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Ho),{basename:e,navigator:t}=k.useContext(bi),{matches:i}=k.useContext(ri),{pathname:a}=wi(),l=JSON.stringify(Gd(i)),c=k.useRef(!1);return oA(()=>{c.current=!0}),k.useCallback((m,p={})=>{if(sn(c.current,aA),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=$d(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Gi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var Cx=k.createContext(null);function Ix(n){let e=k.useContext(ri).outlet;return e&&k.createElement(Cx.Provider,{value:n},e)}function Nx(){let{matches:n}=k.useContext(ri),e=n[n.length-1];return e?e.params:{}}function rf(n,{relative:e}={}){let{matches:t}=k.useContext(ri),{pathname:i}=wi(),a=JSON.stringify(Gd(t));return k.useMemo(()=>$d(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function xx(n,e,t,i){ct(uu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(bi),{matches:l}=k.useContext(ri),c=l[l.length-1],h=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",y=c&&c.route;{let U=y&&y.path||"";lA(m,!y||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=wi(),b;b=T;let A=b.pathname||"/",D=A;if(p!=="/"){let U=p.replace(/^\//,"").split("/");D="/"+A.replace(/^\//,"").split("/").slice(U.length).join("/")}let V=Ta(n,{pathname:D});return sn(y||V!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),sn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Px(V&&V.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Gi([p,a.encodeLocation?a.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:Gi([p,a.encodeLocation?a.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,i)}function Dx(){let n=zx(),e=Bc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:l},"ErrorBoundary")," or"," ",k.createElement("code",{style:l},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:a},t):null,c)}var Ox=k.createElement(Dx,null),kx=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?k.createElement(ri.Provider,{value:this.props.routeContext},k.createElement(r_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Mx({routeContext:n,match:e,children:t}){let i=k.useContext(Ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(ri.Provider,{value:n},t)}function Px(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);ct(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:y,errors:T}=t,b=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let T,b=!1,A=null,D=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,A=p.route.errorElement||Ox,c&&(h<0&&y===0?(lA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,D=null):h===y&&(b=!0,D=p.route.hydrateFallbackElement||null)));let V=e.concat(a.slice(0,y+1)),z=()=>{let U;return T?U=A:b?U=D:p.route.Component?U=k.createElement(p.route.Component,null):p.route.element?U=p.route.element:U=m,k.createElement(Mx,{match:p,routeContext:{outlet:m,matches:V,isDataRoute:t!=null},children:U})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?k.createElement(kx,{location:t.location,revalidation:t.revalidation,component:A,error:T,children:z(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):z()},null)}function i_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vx(n){let e=k.useContext(Ho);return ct(e,i_(n)),e}function Lx(n){let e=k.useContext(nf);return ct(e,i_(n)),e}function Ux(n){let e=k.useContext(ri);return ct(e,i_(n)),e}function s_(n){let e=Ux(n),t=e.matches[e.matches.length-1];return ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function jx(){return s_("useRouteId")}function zx(){let n=k.useContext(r_),e=Lx("useRouteError"),t=s_("useRouteError");return n!==void 0?n:e.errors?.[t]}function Bx(){let{router:n}=Vx("useNavigate"),e=s_("useNavigate"),t=k.useRef(!1);return oA(()=>{t.current=!0}),k.useCallback(async(a,l={})=>{sn(t.current,aA),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var f0={};function lA(n,e,t){!e&&!f0[n]&&(f0[n]=!0,sn(!1,t))}var h0={};function d0(n,e){!n&&!h0[e]&&(h0[e]=!0,console.warn(e))}function Fx(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&sn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:k.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&sn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:k.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&sn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:k.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var qx=["HydrateFallback","hydrateFallbackElement"],Hx=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function Gx({router:n,flushSync:e}){let[t,i]=k.useState(n.state),[a,l]=k.useState(),[c,h]=k.useState({isTransitioning:!1}),[m,p]=k.useState(),[y,T]=k.useState(),[b,A]=k.useState(),D=k.useRef(new Map),V=k.useCallback((H,{deletedFetchers:ne,flushSync:K,viewTransitionOpts:M})=>{H.fetchers.forEach((R,x)=>{R.data!==void 0&&D.current.set(x,R.data)}),ne.forEach(R=>D.current.delete(R)),d0(K===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let C=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(d0(M==null||C,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!C){e&&K?e(()=>i(H)):k.startTransition(()=>i(H));return}if(e&&K){e(()=>{y&&(m&&m.resolve(),y.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let R=n.window.document.startViewTransition(()=>{e(()=>i(H))});R.finished.finally(()=>{e(()=>{p(void 0),T(void 0),l(void 0),h({isTransitioning:!1})})}),e(()=>T(R));return}y?(m&&m.resolve(),y.skipTransition(),A({state:H,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(l(H),h({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,y,m]);k.useLayoutEffect(()=>n.subscribe(V),[n,V]),k.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new Hx)},[c]),k.useEffect(()=>{if(m&&a&&n.window){let H=a,ne=m.promise,K=n.window.document.startViewTransition(async()=>{k.startTransition(()=>i(H)),await ne});K.finished.finally(()=>{p(void 0),T(void 0),l(void 0),h({isTransitioning:!1})}),T(K)}},[a,m,n.window]),k.useEffect(()=>{m&&a&&t.location.key===a.location.key&&m.resolve()},[m,y,t.location,a]),k.useEffect(()=>{!c.isTransitioning&&b&&(l(b.state),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),A(void 0))},[c.isTransitioning,b]);let z=k.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:H=>n.navigate(H),push:(H,ne,K)=>n.navigate(H,{state:ne,preventScrollReset:K?.preventScrollReset}),replace:(H,ne,K)=>n.navigate(H,{replace:!0,state:ne,preventScrollReset:K?.preventScrollReset})}),[n]),U=n.basename||"/",Z=k.useMemo(()=>({router:n,navigator:z,static:!1,basename:U}),[n,z,U]);return k.createElement(k.Fragment,null,k.createElement(Ho.Provider,{value:Z},k.createElement(nf.Provider,{value:t},k.createElement(sA.Provider,{value:D.current},k.createElement(n_.Provider,{value:c},k.createElement(Qx,{basename:U,location:t.location,navigationType:t.historyAction,navigator:z},k.createElement($x,{routes:n.routes,future:n.future,state:t})))))),null)}var $x=k.memo(Kx);function Kx({routes:n,future:e,state:t}){return xx(n,void 0,t,e)}function hy({to:n,replace:e,state:t,relative:i}){ct(uu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(bi);sn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=k.useContext(ri),{pathname:c}=wi(),h=cu(),m=$d(n,Gd(l),c,i==="path"),p=JSON.stringify(m);return k.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:i})},[h,p,i,e,t]),null}function Yx(n){return Ix(n.context)}function Qx({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){ct(!uu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Ha(t));let{pathname:m="/",search:p="",hash:y="",state:T=null,key:b="default"}=t,A=k.useMemo(()=>{let D=ei(m,c);return D==null?null:{location:{pathname:D,search:p,hash:y,state:T,key:b},navigationType:i}},[c,m,p,y,T,b,i]);return sn(A!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:k.createElement(bi.Provider,{value:h},k.createElement(Kd.Provider,{children:e,value:A}))}var $h="get",Kh="application/x-www-form-urlencoded";function Yd(n){return n!=null&&typeof n.tagName=="string"}function Xx(n){return Yd(n)&&n.tagName.toLowerCase()==="button"}function Zx(n){return Yd(n)&&n.tagName.toLowerCase()==="form"}function Wx(n){return Yd(n)&&n.tagName.toLowerCase()==="input"}function Jx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eD(n,e){return n.button===0&&(!e||e==="_self")&&!Jx(n)}var Mh=null;function tD(){if(Mh===null)try{new FormData(document.createElement("form"),0),Mh=!1}catch{Mh=!0}return Mh}var nD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bg(n){return n!=null&&!nD.has(n)?(sn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kh}"`),null):n}function rD(n,e){let t,i,a,l,c;if(Zx(n)){let h=n.getAttribute("action");i=h?ei(h,e):null,t=n.getAttribute("method")||$h,a=Bg(n.getAttribute("enctype"))||Kh,l=new FormData(n)}else if(Xx(n)||Wx(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(i=m?ei(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||$h,a=Bg(n.getAttribute("formenctype"))||Bg(h.getAttribute("enctype"))||Kh,l=new FormData(h,n),!tD()){let{name:p,type:y,value:T}=n;if(y==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(Yd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$h,i=null,a=Kh,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function a_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function iD(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&ei(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function sD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function oD(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await sD(l,t);return c.links?c.links():[]}return[]}));return fD(i.flat(1).filter(aD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function m0(n,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,h=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>c(m,p)||h(m,p)):l==="data"?e.filter((m,p)=>{let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function lD(n,e,{includeHydrateFallback:t}={}){return uD(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function uD(n){return[...new Set(n)]}function cD(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function fD(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(cD(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function uA(){let n=k.useContext(Ho);return a_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hD(){let n=k.useContext(nf);return a_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var o_=k.createContext(void 0);o_.displayName="FrameworkContext";function cA(){let n=k.useContext(o_);return a_(n,"You must render this element inside a <HydratedRouter> element"),n}function dD(n,e){let t=k.useContext(o_),[i,a]=k.useState(!1),[l,c]=k.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:T}=e,b=k.useRef(null);k.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let V=U=>{U.forEach(Z=>{c(Z.isIntersecting)})},z=new IntersectionObserver(V,{threshold:.5});return b.current&&z.observe(b.current),()=>{z.disconnect()}}},[n]),k.useEffect(()=>{if(i){let V=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(V)}}},[i]);let A=()=>{a(!0)},D=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:vc(h,A),onBlur:vc(m,D),onMouseEnter:vc(p,A),onMouseLeave:vc(y,D),onTouchStart:vc(T,A)}]:[!1,b,{}]}function vc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function mD({page:n,...e}){let{router:t}=uA(),i=k.useMemo(()=>Ta(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?k.createElement(gD,{page:n,matches:i,...e}):null}function pD(n){let{manifest:e,routeModules:t}=cA(),[i,a]=k.useState([]);return k.useEffect(()=>{let l=!1;return oD(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function gD({page:n,matches:e,...t}){let i=wi(),{manifest:a,routeModules:l}=cA(),{basename:c}=uA(),{loaderData:h,matches:m}=hD(),p=k.useMemo(()=>m0(n,e,m,a,i,"data"),[n,e,m,a,i]),y=k.useMemo(()=>m0(n,e,m,a,i,"assets"),[n,e,m,a,i]),T=k.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let D=new Set,V=!1;if(e.forEach(U=>{let Z=a.routes[U.route.id];!Z||!Z.hasLoader||(!p.some(H=>H.route.id===U.route.id)&&U.route.id in h&&l[U.route.id]?.shouldRevalidate||Z.hasClientLoader?V=!0:D.add(U.route.id))}),D.size===0)return[];let z=iD(n,c,"data");return V&&D.size>0&&z.searchParams.set("_routes",e.filter(U=>D.has(U.route.id)).map(U=>U.route.id).join(",")),[z.pathname+z.search]},[c,h,i,a,p,e,n,l]),b=k.useMemo(()=>lD(y,a),[y,a]),A=pD(y);return k.createElement(k.Fragment,null,T.map(D=>k.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),b.map(D=>k.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),A.map(({key:D,link:V})=>k.createElement("link",{key:D,nonce:t.nonce,...V})))}function yD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var fA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fA&&(window.__reactRouterVersion="7.8.1")}catch{}function _D(n,e){return ix({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:wN({window:e?.window}),hydrationData:vD(),routes:n,mapRouteProperties:Fx,hydrationRouteProperties:qx,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function vD(){let n=window?.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:ED(n.errors)}),n}function ED(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")t[i]=new ad(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let c=new l(a.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(a.message);l.stack="",t[i]=l}}else t[i]=a;return t}var hA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ns=k.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:h,target:m,to:p,preventScrollReset:y,viewTransition:T,...b},A){let{basename:D}=k.useContext(bi),V=typeof p=="string"&&hA.test(p),z,U=!1;if(typeof p=="string"&&V&&(z=p,fA))try{let x=new URL(window.location.href),B=p.startsWith("//")?new URL(x.protocol+p):new URL(p),L=ei(B.pathname,D);B.origin===x.origin&&L!=null?p=L+B.search+B.hash:U=!0}catch{sn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=Ax(p,{relative:a}),[H,ne,K]=dD(i,b),M=wD(p,{replace:c,state:h,target:m,preventScrollReset:y,relative:a,viewTransition:T});function C(x){e&&e(x),x.defaultPrevented||M(x)}let R=k.createElement("a",{...b,...K,href:z||Z,onClick:U||l?e:C,ref:yD(A,ne),target:m,"data-discover":!V&&t==="render"?"true":void 0});return H&&!V?k.createElement(k.Fragment,null,R,k.createElement(mD,{page:Z})):R});Ns.displayName="Link";var dy=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:h,children:m,...p},y){let T=rf(c,{relative:p.relative}),b=wi(),A=k.useContext(nf),{navigator:D,basename:V}=k.useContext(bi),z=A!=null&&ID(T)&&h===!0,U=D.encodeLocation?D.encodeLocation(T).pathname:T.pathname,Z=b.pathname,H=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),H=H?H.toLowerCase():null,U=U.toLowerCase()),H&&V&&(H=ei(H,V)||H);const ne=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let K=Z===U||!a&&Z.startsWith(U)&&Z.charAt(ne)==="/",M=H!=null&&(H===U||!a&&H.startsWith(U)&&H.charAt(U.length)==="/"),C={isActive:K,isPending:M,isTransitioning:z},R=K?e:void 0,x;typeof i=="function"?x=i(C):x=[i,K?"active":null,M?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let B=typeof l=="function"?l(C):l;return k.createElement(Ns,{...p,"aria-current":R,className:x,ref:y,style:B,to:c,viewTransition:h},typeof m=="function"?m(C):m)});dy.displayName="NavLink";var TD=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=$h,action:h,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:T,...b},A)=>{let D=RD(),V=CD(h,{relative:p}),z=c.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&hA.test(h),Z=H=>{if(m&&m(H),H.defaultPrevented)return;H.preventDefault();let ne=H.nativeEvent.submitter,K=ne?.getAttribute("formmethod")||c;D(ne||H.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:T})};return k.createElement("form",{ref:A,method:z,action:V,onSubmit:i?m:Z,...b,"data-discover":!U&&n==="render"?"true":void 0})});TD.displayName="Form";function bD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dA(n){let e=k.useContext(Ho);return ct(e,bD(n)),e}function wD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let h=cu(),m=wi(),p=rf(n,{relative:l});return k.useCallback(y=>{if(eD(y,e)){y.preventDefault();let T=t!==void 0?t:Ma(m)===Ma(p);h(n,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,h,p,t,i,e,n,a,l,c])}var SD=0,AD=()=>`__${String(++SD)}__`;function RD(){let{router:n}=dA("useSubmit"),{basename:e}=k.useContext(bi),t=jx();return k.useCallback(async(i,a={})=>{let{action:l,method:c,encType:h,formData:m,body:p}=rD(i,e);if(a.navigate===!1){let y=a.fetcherKey||AD();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function CD(n,{relative:e}={}){let{basename:t}=k.useContext(bi),i=k.useContext(ri);ct(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...rf(n||".",{relative:e})},c=wi();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(y=>y==="")){h.delete("index"),m.filter(T=>T).forEach(T=>h.append("index",T));let y=h.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Gi([t,l.pathname])),Ma(l)}function ID(n,{relative:e}={}){let t=k.useContext(n_);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=dA("useViewTransitionState"),a=rf(n,{relative:e});if(!t.isTransitioning)return!1;let l=ei(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=ei(t.nextLocation.pathname,i)||t.nextLocation.pathname;return sd(a.pathname,c)!=null||sd(a.pathname,l)!=null}var ND=zS();function xD(n){return k.createElement(Gx,{flushSync:ND.flushSync,...n})}function jn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var DD=typeof Symbol=="function"&&Symbol.observable||"@@observable",p0=DD,Fg=()=>Math.random().toString(36).substring(7).split("").join("."),OD={INIT:`@@redux/INIT${Fg()}`,REPLACE:`@@redux/REPLACE${Fg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Fg()}`},ld=OD;function l_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function mA(n,e,t){if(typeof n!="function")throw new Error(jn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(jn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(jn(1));return t(mA)(n,e)}let i=n,a=e,l=new Map,c=l,h=0,m=!1;function p(){c===l&&(c=new Map,l.forEach((z,U)=>{c.set(U,z)}))}function y(){if(m)throw new Error(jn(3));return a}function T(z){if(typeof z!="function")throw new Error(jn(4));if(m)throw new Error(jn(5));let U=!0;p();const Z=h++;return c.set(Z,z),function(){if(U){if(m)throw new Error(jn(6));U=!1,p(),c.delete(Z),l=null}}}function b(z){if(!l_(z))throw new Error(jn(7));if(typeof z.type>"u")throw new Error(jn(8));if(typeof z.type!="string")throw new Error(jn(17));if(m)throw new Error(jn(9));try{m=!0,a=i(a,z)}finally{m=!1}return(l=c).forEach(Z=>{Z()}),z}function A(z){if(typeof z!="function")throw new Error(jn(10));i=z,b({type:ld.REPLACE})}function D(){const z=T;return{subscribe(U){if(typeof U!="object"||U===null)throw new Error(jn(11));function Z(){const ne=U;ne.next&&ne.next(y())}return Z(),{unsubscribe:z(Z)}},[p0](){return this}}}return b({type:ld.INIT}),{dispatch:b,subscribe:T,getState:y,replaceReducer:A,[p0]:D}}function kD(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:ld.INIT})>"u")throw new Error(jn(12));if(typeof t(void 0,{type:ld.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jn(13))})}function MD(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let a;try{kD(t)}catch(l){a=l}return function(c={},h){if(a)throw a;let m=!1;const p={};for(let y=0;y<i.length;y++){const T=i[y],b=t[T],A=c[T],D=b(A,h);if(typeof D>"u")throw h&&h.type,new Error(jn(14));p[T]=D,m=m||D!==A}return m=m||i.length!==Object.keys(c).length,m?p:c}}function ud(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function PD(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(jn(15))};const c={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},h=n.map(m=>m(c));return l=ud(...h)(a.dispatch),{...a,dispatch:l}}}function VD(n){return l_(n)&&"type"in n&&typeof n.type=="string"}var pA=Symbol.for("immer-nothing"),g0=Symbol.for("immer-draftable"),kr=Symbol.for("immer-state");function pi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Ql=Object.getPrototypeOf;function Oo(n){return!!n&&!!n[kr]}function ks(n){return n?gA(n)||Array.isArray(n)||!!n[g0]||!!n.constructor?.[g0]||Xd(n)||Zd(n):!1}var LD=Object.prototype.constructor.toString();function gA(n){if(!n||typeof n!="object")return!1;const e=Ql(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===LD}function cd(n,e){Qd(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function Qd(n){const e=n[kr];return e?e.type_:Array.isArray(n)?1:Xd(n)?2:Zd(n)?3:0}function my(n,e){return Qd(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function yA(n,e,t){const i=Qd(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function UD(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Xd(n){return n instanceof Map}function Zd(n){return n instanceof Set}function So(n){return n.copy_||n.base_}function py(n,e){if(Xd(n))return new Map(n);if(Zd(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=gA(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[kr];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const c=a[l],h=i[c];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[c]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[c]})}return Object.create(Ql(n),i)}else{const i=Ql(n);if(i!==null&&t)return{...n};const a=Object.create(i);return Object.assign(a,n)}}function u_(n,e=!1){return Wd(n)||Oo(n)||!ks(n)||(Qd(n)>1&&(n.set=n.add=n.clear=n.delete=jD),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>u_(i,!0))),n}function jD(){pi(2)}function Wd(n){return Object.isFrozen(n)}var zD={};function ko(n){const e=zD[n];return e||pi(0,n),e}var Fc;function _A(){return Fc}function BD(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function y0(n,e){e&&(ko("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function gy(n){yy(n),n.drafts_.forEach(FD),n.drafts_=null}function yy(n){n===Fc&&(Fc=n.parent_)}function _0(n){return Fc=BD(Fc,n)}function FD(n){const e=n[kr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function v0(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[kr].modified_&&(gy(e),pi(4)),ks(n)&&(n=fd(e,n),e.parent_||hd(e,n)),e.patches_&&ko("Patches").generateReplacementPatches_(t[kr].base_,n,e.patches_,e.inversePatches_)):n=fd(e,t,[]),gy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==pA?n:void 0}function fd(n,e,t){if(Wd(e))return e;const i=e[kr];if(!i)return cd(e,(a,l)=>E0(n,i,e,a,l,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return hd(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,c=!1;i.type_===3&&(l=new Set(a),a.clear(),c=!0),cd(l,(h,m)=>E0(n,i,a,h,m,t,c)),hd(n,a,!1),t&&n.patches_&&ko("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function E0(n,e,t,i,a,l,c){if(Oo(a)){const h=l&&e&&e.type_!==3&&!my(e.assigned_,i)?l.concat(i):void 0,m=fd(n,a,h);if(yA(t,i,m),Oo(m))n.canAutoFreeze_=!1;else return}else c&&t.add(a);if(ks(a)&&!Wd(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;fd(n,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&hd(n,a)}}function hd(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&u_(e,t)}function qD(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:_A(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,l=c_;t&&(a=[i],l=qc);const{revoke:c,proxy:h}=Proxy.revocable(a,l);return i.draft_=h,i.revoke_=c,h}var c_={get(n,e){if(e===kr)return n;const t=So(n);if(!my(t,e))return HD(n,t,e);const i=t[e];return n.finalized_||!ks(i)?i:i===qg(n.base_,e)?(Hg(n),n.copy_[e]=vy(i,n)):i},has(n,e){return e in So(n)},ownKeys(n){return Reflect.ownKeys(So(n))},set(n,e,t){const i=vA(So(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=qg(So(n),e),l=a?.[kr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(UD(t,a)&&(t!==void 0||my(n.base_,e)))return!0;Hg(n),_y(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return qg(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Hg(n),_y(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=So(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){pi(11)},getPrototypeOf(n){return Ql(n.base_)},setPrototypeOf(){pi(12)}},qc={};cd(c_,(n,e)=>{qc[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});qc.deleteProperty=function(n,e){return qc.set.call(this,n,e,void 0)};qc.set=function(n,e,t){return c_.set.call(this,n[0],e,t,n[0])};function qg(n,e){const t=n[kr];return(t?So(t):n)[e]}function HD(n,e,t){const i=vA(e,t);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function vA(n,e){if(!(e in n))return;let t=Ql(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Ql(t)}}function _y(n){n.modified_||(n.modified_=!0,n.parent_&&_y(n.parent_))}function Hg(n){n.copy_||(n.copy_=py(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var GD=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const l=t;t=e;const c=this;return function(m=l,...p){return c.produce(m,y=>t.call(this,y,...p))}}typeof t!="function"&&pi(6),i!==void 0&&typeof i!="function"&&pi(7);let a;if(ks(e)){const l=_0(this),c=vy(e,void 0);let h=!0;try{a=t(c),h=!1}finally{h?gy(l):yy(l)}return y0(l,i),v0(a,l)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===pA&&(a=void 0),this.autoFreeze_&&u_(a,!0),i){const l=[],c=[];ko("Patches").generateReplacementPatches_(e,a,l,c),i(l,c)}return a}else pi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(c,...h)=>this.produceWithPatches(c,m=>e(m,...h));let i,a;return[this.produce(e,t,(c,h)=>{i=c,a=h}),i,a]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){ks(n)||pi(8),Oo(n)&&(n=$D(n));const e=_0(this),t=vy(n,void 0);return t[kr].isManual_=!0,yy(e),t}finishDraft(n,e){const t=n&&n[kr];(!t||!t.isManual_)&&pi(9);const{scope_:i}=t;return y0(i,e),v0(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=ko("Patches").applyPatches_;return Oo(n)?i(n,e):this.produce(n,a=>i(a,e))}};function vy(n,e){const t=Xd(n)?ko("MapSet").proxyMap_(n,e):Zd(n)?ko("MapSet").proxySet_(n,e):qD(n,e);return(e?e.scope_:_A()).drafts_.push(t),t}function $D(n){return Oo(n)||pi(10,n),EA(n)}function EA(n){if(!ks(n)||Wd(n))return n;const e=n[kr];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=py(n,e.scope_.immer_.useStrictShallowCopy_)}else t=py(n,!0);return cd(t,(i,a)=>{yA(t,i,EA(a))}),e&&(e.finalized_=!1),t}var Mr=new GD,TA=Mr.produce;Mr.produceWithPatches.bind(Mr);Mr.setAutoFreeze.bind(Mr);Mr.setUseStrictShallowCopy.bind(Mr);Mr.applyPatches.bind(Mr);Mr.createDraft.bind(Mr);Mr.finishDraft.bind(Mr);function bA(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var KD=bA(),YD=bA,QD=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ud:ud.apply(null,arguments)};function T0(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(xs(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>VD(i)&&i.type===n,t}var wA=class wc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,wc.prototype)}static get[Symbol.species](){return wc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new wc(...e[0].concat(this)):new wc(...e.concat(this))}};function b0(n){return ks(n)?TA(n,()=>{}):n}function Ph(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function XD(n){return typeof n=="boolean"}var ZD=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let c=new wA;return t&&(XD(t)?c.push(KD):c.push(YD(t.extraArgument))),c},WD="RTK_autoBatch",w0=n=>e=>{setTimeout(e,n)},JD=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,c=!1;const h=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:w0(10):n.type==="callback"?n.queueNotification:w0(n.timeout),p=()=>{c=!1,l&&(l=!1,h.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const T=()=>a&&y(),b=i.subscribe(T);return h.add(y),()=>{b(),h.delete(y)}},dispatch(y){try{return a=!y?.meta?.[WD],l=!a,l&&(c||(c=!0,m(p))),i.dispatch(y)}finally{a=!0}}})},eO=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new wA(n);return i&&a.push(JD(typeof i=="object"?i:void 0)),a};function tO(n){const e=ZD(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(l_(t))h=MD(t);else throw new Error(xs(1));let m;typeof i=="function"?m=i(e):m=e();let p=ud;a&&(p=QD({trace:!1,...typeof a=="object"&&a}));const y=PD(...m),T=eO(y);let b=typeof c=="function"?c(T):T();const A=p(...b);return mA(h,l,A)}function SA(n){const e={},t=[];let i;const a={addCase(l,c){const h=typeof l=="string"?l:l.type;if(!h)throw new Error(xs(28));if(h in e)throw new Error(xs(29));return e[h]=c,a},addMatcher(l,c){return t.push({matcher:l,reducer:c}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function nO(n){return typeof n=="function"}function rO(n,e){let[t,i,a]=SA(e),l;if(nO(n))l=()=>b0(n());else{const h=b0(n);l=()=>h}function c(h=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[a]),p.reduce((y,T)=>{if(T)if(Oo(y)){const A=T(y,m);return A===void 0?y:A}else{if(ks(y))return TA(y,b=>T(b,m));{const b=T(y,m);if(b===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return y},h)}return c.getInitialState=l,c}var iO=Symbol.for("rtk-slice-createasyncthunk");function sO(n,e){return`${n}/${e}`}function aO({creators:n}={}){const e=n?.asyncThunk?.[iO];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(xs(11));const c=(typeof i.reducers=="function"?i.reducers(uO()):i.reducers)||{},h=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(H,ne){const K=typeof H=="string"?H:H.type;if(!K)throw new Error(xs(12));if(K in m.sliceCaseReducersByType)throw new Error(xs(13));return m.sliceCaseReducersByType[K]=ne,p},addMatcher(H,ne){return m.sliceMatchers.push({matcher:H,reducer:ne}),p},exposeAction(H,ne){return m.actionCreators[H]=ne,p},exposeCaseReducer(H,ne){return m.sliceCaseReducersByName[H]=ne,p}};h.forEach(H=>{const ne=c[H],K={reducerName:H,type:sO(a,H),createNotation:typeof i.reducers=="function"};fO(ne)?dO(K,ne,p,e):cO(K,ne,p)});function y(){const[H={},ne=[],K=void 0]=typeof i.extraReducers=="function"?SA(i.extraReducers):[i.extraReducers],M={...H,...m.sliceCaseReducersByType};return rO(i.initialState,C=>{for(let R in M)C.addCase(R,M[R]);for(let R of m.sliceMatchers)C.addMatcher(R.matcher,R.reducer);for(let R of ne)C.addMatcher(R.matcher,R.reducer);K&&C.addDefaultCase(K)})}const T=H=>H,b=new Map,A=new WeakMap;let D;function V(H,ne){return D||(D=y()),D(H,ne)}function z(){return D||(D=y()),D.getInitialState()}function U(H,ne=!1){function K(C){let R=C[H];return typeof R>"u"&&ne&&(R=Ph(A,K,z)),R}function M(C=T){const R=Ph(b,ne,()=>new WeakMap);return Ph(R,C,()=>{const x={};for(const[B,L]of Object.entries(i.selectors??{}))x[B]=oO(L,C,()=>Ph(A,C,z),ne);return x})}return{reducerPath:H,getSelectors:M,get selectors(){return M(K)},selectSlice:K}}const Z={name:a,reducer:V,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:z,...U(l),injectInto(H,{reducerPath:ne,...K}={}){const M=ne??l;return H.inject({reducerPath:M,reducer:V},K),{...Z,...U(M,!0)}}};return Z}}function oO(n,e,t,i){function a(l,...c){let h=e(l);return typeof h>"u"&&i&&(h=t()),n(h,...c)}return a.unwrapped=n,a}var lO=aO();function uO(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function cO({type:n,reducerName:e,createNotation:t},i,a){let l,c;if("reducer"in i){if(t&&!hO(i))throw new Error(xs(17));l=i.reducer,c=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?T0(n,c):T0(n))}function fO(n){return n._reducerDefinitionType==="asyncThunk"}function hO(n){return n._reducerDefinitionType==="reducerWithPrepare"}function dO({type:n,reducerName:e},t,i,a){if(!a)throw new Error(xs(18));const{payloadCreator:l,fulfilled:c,pending:h,rejected:m,settled:p,options:y}=t,T=a(n,l,y);i.exposeAction(e,T),c&&i.addCase(T.fulfilled,c),h&&i.addCase(T.pending,h),m&&i.addCase(T.rejected,m),p&&i.addMatcher(T.settled,p),i.exposeCaseReducer(e,{fulfilled:c||Vh,pending:h||Vh,rejected:m||Vh,settled:p||Vh})}function Vh(){}function xs(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const mO={current:null,loading:!0},AA=lO({name:"user",initialState:mO,reducers:{setUser(n,e){n.current=e.payload,n.loading=!1},clearUser(n){n.current=null,n.loading=!1}}}),{setUser:Hl,clearUser:pO}=AA.actions,gO=AA.reducer,yO=tO({reducer:{user:gO},devTools:!1}),_O=()=>{};var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},vO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},CA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,T=(l&3)<<4|h>>4;let b=(h&15)<<2|p>>6,A=p&63;m||(A=64,c||(b=64)),i.push(t[y],t[T],t[b],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||T==null)throw new EO;const b=l<<2|h>>4;if(i.push(b),p!==64){const A=h<<4&240|p>>2;if(i.push(A),T!==64){const D=p<<6&192|T;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class EO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TO=function(n){const e=RA(n);return CA.encodeByteArray(e,!0)},dd=function(n){return TO(n).replace(/\./g,"")},IA=function(n){try{return CA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=()=>bO().__FIREBASE_DEFAULTS__,SO=()=>{if(typeof process>"u"||typeof S0>"u")return;const n=S0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&IA(n[1]);return e&&JSON.parse(e)},Jd=()=>{try{return _O()||wO()||SO()||AO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},NA=n=>Jd()?.emulatorHosts?.[n],xA=n=>{const e=NA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},DA=()=>Jd()?.config,OA=n=>Jd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dd(JSON.stringify(t)),dd(JSON.stringify(c)),""].join(".")}const Dc={};function CO(){const n={prod:[],emulator:[]};for(const e of Object.keys(Dc))Dc[e]?n.emulator.push(e):n.prod.push(e);return n}function IO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let A0=!1;function h_(n,e){if(typeof window>"u"||typeof document>"u"||!Go(window.location.host)||Dc[n]===e||Dc[n]||A0)return;Dc[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=CO().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{A0=!0,c()},b}function y(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=IO(i),A=t("text"),D=document.getElementById(A)||document.createElement("span"),V=t("learnmore"),z=document.getElementById(V)||document.createElement("a"),U=t("preprendIcon"),Z=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const H=b.element;h(H),y(z,V);const ne=p();m(Z,U),H.append(Z,D,z,ne),document.body.appendChild(H)}l?(D.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function xO(){const n=Jd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MO(){const n=Qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PO(){return!xO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VO(){try{return typeof indexedDB=="object"}catch{return!1}}function LO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="FirebaseError";class Si extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=UO,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sf.prototype.create)}}class sf{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?jO(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Si(a,h,i)}}function jO(n,e){return n.replace(zO,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const zO=/\{\$([^}]+)}/g;function BO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(R0(l)&&R0(c)){if(!Mo(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function R0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Sc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ac(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function FO(n,e){const t=new qO(n,e);return t.subscribe.bind(t)}class qO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Gg),a.error===void 0&&(a.error=Gg),a.complete===void 0&&(a.complete=Gg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n){return n&&n._delegate?n._delegate:n}class Pa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new RO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KO(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(n){return n===Ao?void 0:n}function KO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mt||(mt={}));const QO={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},XO=mt.INFO,ZO={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},WO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=ZO[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d_{constructor(e){this.name=e,this._logLevel=XO,this._logHandler=WO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const JO=(n,e)=>e.some(t=>n instanceof t);let C0,I0;function ek(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tk(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MA=new WeakMap,Ey=new WeakMap,PA=new WeakMap,$g=new WeakMap,m_=new WeakMap;function nk(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ia(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&MA.set(t,n)}).catch(()=>{}),m_.set(e,n),e}function rk(n){if(Ey.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ey.set(n,e)}let Ty={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ia(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ik(n){Ty=n(Ty)}function sk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Kg(this),e,...t);return PA.set(i,e.sort?e.sort():[e]),Ia(i)}:tk().includes(n)?function(...e){return n.apply(Kg(this),e),Ia(MA.get(this))}:function(...e){return Ia(n.apply(Kg(this),e))}}function ak(n){return typeof n=="function"?sk(n):(n instanceof IDBTransaction&&rk(n),JO(n,ek())?new Proxy(n,Ty):n)}function Ia(n){if(n instanceof IDBRequest)return nk(n);if($g.has(n))return $g.get(n);const e=ak(n);return e!==n&&($g.set(n,e),m_.set(e,n)),e}const Kg=n=>m_.get(n);function ok(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=Ia(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Ia(c.result),m.oldVersion,m.newVersion,Ia(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const lk=["get","getKey","getAll","getAllKeys","count"],uk=["put","add","delete","clear"],Yg=new Map;function N0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=uk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||lk.includes(t)))return;const l=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&m.done]))[0]};return Yg.set(e,l),l}ik(n=>({...n,get:(e,t,i)=>N0(e,t)||n.get(e,t,i),has:(e,t)=>!!N0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function fk(n){return n.getComponent()?.type==="VERSION"}const by="@firebase/app",x0="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new d_("@firebase/app"),hk="@firebase/app-compat",dk="@firebase/analytics-compat",mk="@firebase/analytics",pk="@firebase/app-check-compat",gk="@firebase/app-check",yk="@firebase/auth",_k="@firebase/auth-compat",vk="@firebase/database",Ek="@firebase/data-connect",Tk="@firebase/database-compat",bk="@firebase/functions",wk="@firebase/functions-compat",Sk="@firebase/installations",Ak="@firebase/installations-compat",Rk="@firebase/messaging",Ck="@firebase/messaging-compat",Ik="@firebase/performance",Nk="@firebase/performance-compat",xk="@firebase/remote-config",Dk="@firebase/remote-config-compat",Ok="@firebase/storage",kk="@firebase/storage-compat",Mk="@firebase/firestore",Pk="@firebase/ai",Vk="@firebase/firestore-compat",Lk="firebase",Uk="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",jk={[by]:"fire-core",[hk]:"fire-core-compat",[mk]:"fire-analytics",[dk]:"fire-analytics-compat",[gk]:"fire-app-check",[pk]:"fire-app-check-compat",[yk]:"fire-auth",[_k]:"fire-auth-compat",[vk]:"fire-rtdb",[Ek]:"fire-data-connect",[Tk]:"fire-rtdb-compat",[bk]:"fire-fn",[wk]:"fire-fn-compat",[Sk]:"fire-iid",[Ak]:"fire-iid-compat",[Rk]:"fire-fcm",[Ck]:"fire-fcm-compat",[Ik]:"fire-perf",[Nk]:"fire-perf-compat",[xk]:"fire-rc",[Dk]:"fire-rc-compat",[Ok]:"fire-gcs",[kk]:"fire-gcs-compat",[Mk]:"fire-fst",[Vk]:"fire-fst-compat",[Pk]:"fire-vertex","fire-js":"fire-js",[Lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,zk=new Map,Sy=new Map;function D0(n,e){try{n.container.addComponent(e)}catch(t){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Po(n){const e=n.name;if(Sy.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Sy.set(e,n);for(const t of Hc.values())D0(t,n);for(const t of zk.values())D0(t,n);return!0}function em(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Na=new sf("app","Firebase",Bk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Na.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=Uk;function VA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:wy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Na.create("bad-app-name",{appName:String(a)});if(t||(t=DA()),!t)throw Na.create("no-options");const l=Hc.get(a);if(l){if(Mo(t,l.options)&&Mo(i,l.config))return l;throw Na.create("duplicate-app",{appName:a})}const c=new YO(a);for(const m of Sy.values())c.addComponent(m);const h=new Fk(t,i,c);return Hc.set(a,h),h}function p_(n=wy){const e=Hc.get(n);if(!e&&n===wy&&DA())return VA();if(!e)throw Na.create("no-app",{appName:n});return e}function O0(){return Array.from(Hc.values())}function $i(n,e,t){let i=jk[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(c.join(" "));return}Po(new Pa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="firebase-heartbeat-database",Hk=1,Gc="firebase-heartbeat-store";let Qg=null;function LA(){return Qg||(Qg=ok(qk,Hk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Na.create("idb-open",{originalErrorMessage:n.message})})),Qg}async function Gk(n){try{const t=(await LA()).transaction(Gc),i=await t.objectStore(Gc).get(UA(n));return await t.done,i}catch(e){if(e instanceof Si)Ms.warn(e.message);else{const t=Na.create("idb-get",{originalErrorMessage:e?.message});Ms.warn(t.message)}}}async function k0(n,e){try{const i=(await LA()).transaction(Gc,"readwrite");await i.objectStore(Gc).put(e,UA(n)),await i.done}catch(t){if(t instanceof Si)Ms.warn(t.message);else{const i=Na.create("idb-set",{originalErrorMessage:t?.message});Ms.warn(i.message)}}}function UA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1024,Kk=30;class Yk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=M0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Kk){const a=Zk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ms.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=M0(),{heartbeatsToSend:t,unsentEntries:i}=Qk(this._heartbeatsCache.heartbeats),a=dd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ms.warn(e),""}}}function M0(){return new Date().toISOString().substring(0,10)}function Qk(n,e=$k){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),P0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),P0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Xk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VO()?LO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Gk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function P0(n){return dd(JSON.stringify({version:2,heartbeats:n})).length}function Zk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){Po(new Pa("platform-logger",e=>new ck(e),"PRIVATE")),Po(new Pa("heartbeat",e=>new Yk(e),"PRIVATE")),$i(by,x0,n),$i(by,x0,"esm2020"),$i("fire-js","")}Wk("");function jA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jk=jA,zA=new sf("auth","Firebase",jA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new d_("@firebase/auth");function e2(n,...e){md.logLevel<=mt.WARN&&md.warn(`Auth (${$o}): ${n}`,...e)}function Yh(n,...e){md.logLevel<=mt.ERROR&&md.error(`Auth (${$o}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n,...e){throw y_(n,...e)}function Ei(n,...e){return y_(n,...e)}function g_(n,e,t){const i={...Jk(),[e]:t};return new sf("auth","Firebase",i).create(e,{appName:n.name})}function Ds(n){return g_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t2(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ti(n,"argument-error"),g_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function y_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return zA.create(n,...e)}function Qe(n,e,...t){if(!n)throw y_(e,...t)}function Rs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yh(e),new Error(e)}function Ps(n,e){n||Rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(){return typeof self<"u"&&self.location?.href||""}function n2(){return V0()==="http:"||V0()==="https:"}function V0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n2()||OO()||"connection"in navigator)?navigator.onLine:!0}function i2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ps(t>e,"Short delay should be less than long delay!"),this.isMobile=NO()||kO()}get(){return r2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(n,e){Ps(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o2=new of(3e4,6e4);function Ga(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Bs(n,e,t,i,a={}){return FA(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=af({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return DO()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Go(n.emulatorConfig.host)&&(p.credentials="include"),BA.fetch()(await qA(n,n.config.apiHost,t,h),p)})}async function FA(n,e,t){n._canInitEmulator=!1;const i={...s2,...e};try{const a=new u2(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Lh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Lh(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Lh(n,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw g_(n,y,p);ti(n,y)}}catch(a){if(a instanceof Si)throw a;ti(n,"network-request-failed",{message:String(a)})}}async function lf(n,e,t,i,a={}){const l=await Bs(n,e,t,i,a);return"mfaPendingCredential"in l&&ti(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function qA(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?__(n.config,a):`${n.config.apiScheme}://${a}`;return a2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function l2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),o2.get())})}}function Lh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ei(n,e,i);return a.customData._tokenResponse=t,a}function L0(n){return n!==void 0&&n.enterprise!==void 0}class c2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function f2(n,e){return Bs(n,"GET","/v2/recaptchaConfig",Ga(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(n,e){return Bs(n,"POST","/v1/accounts:delete",e)}async function pd(n,e){return Bs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d2(n,e=!1){const t=on(n),i=await t.getIdToken(e),a=v_(i);Qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Oc(Xg(a.auth_time)),issuedAtTime:Oc(Xg(a.iat)),expirationTime:Oc(Xg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Xg(n){return Number(n)*1e3}function v_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const a=IA(t);return a?JSON.parse(a):(Yh("Failed to decode base64 JWT payload"),null)}catch(a){return Yh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function U0(n){const e=v_(n);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Si&&m2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function m2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(n){const e=n.auth,t=await n.getIdToken(),i=await Xl(n,pd(e,{idToken:t}));Qe(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?HA(a.providerUserInfo):[],c=y2(n.providerData,l),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,p=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Ry(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function g2(n){const e=on(n);await gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y2(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function HA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(n,e){const t=await FA(n,{},async()=>{const i=af({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await qA(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:i};return n.emulatorConfig&&Go(n.emulatorConfig.host)&&(m.credentials="include"),BA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function v2(n,e){return Bs(n,"POST","/v2/accounts:revokeToken",Ga(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=U0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await _2(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Gl;return i&&(Qe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(n,e){Qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _i{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new p2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ry(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Xl(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d2(this,e)}reload(){return g2(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await Xl(this,h2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:A,providerData:D,stsTokenManager:V}=t;Qe(T&&V,e,"internal-error");const z=Gl.fromJSON(this.name,V);Qe(typeof T=="string",e,"internal-error"),_a(i,e.name),_a(a,e.name),Qe(typeof b=="boolean",e,"internal-error"),Qe(typeof A=="boolean",e,"internal-error"),_a(l,e.name),_a(c,e.name),_a(h,e.name),_a(m,e.name),_a(p,e.name),_a(y,e.name);const U=new _i({uid:T,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:z,createdAt:p,lastLoginAt:y});return D&&Array.isArray(D)&&(U.providerData=D.map(Z=>({...Z}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,i=!1){const a=new Gl;a.updateFromServerResponse(t);const l=new _i({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await gd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?HA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Gl;h.updateFromIdToken(i);const m=new _i({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ry(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;function Cs(n){Ps(n instanceof Function,"Expected a class definition");let e=j0.get(n);return e?(Ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,j0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}GA.type="NONE";const z0=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n,e,t){return`firebase:${n}:${e}:${t}`}class $l{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Qh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pd(this.auth,{idToken:e}).catch(()=>{});return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new $l(Cs(z0),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Cs(z0);const c=Qh(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(c);if(y){let T;if(typeof y=="string"){const b=await pd(e,{idToken:y}).catch(()=>{});if(!b)break;T=await _i._fromGetAccountInfoResponse(e,b,y)}else T=_i._fromJSON(e,y);p!==l&&(h=T),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new $l(l,e,i):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new $l(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($A(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZA(e))return"Blackberry";if(WA(e))return"Webos";if(KA(e))return"Safari";if((e.includes("chrome/")||YA(e))&&!e.includes("edge/"))return"Chrome";if(XA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function $A(n=Qn()){return/firefox\//i.test(n)}function KA(n=Qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YA(n=Qn()){return/crios\//i.test(n)}function QA(n=Qn()){return/iemobile/i.test(n)}function XA(n=Qn()){return/android/i.test(n)}function ZA(n=Qn()){return/blackberry/i.test(n)}function WA(n=Qn()){return/webos/i.test(n)}function E_(n=Qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E2(n=Qn()){return E_(n)&&!!window.navigator?.standalone}function T2(){return MO()&&document.documentMode===10}function JA(n=Qn()){return E_(n)||XA(n)||WA(n)||ZA(n)||/windows phone/i.test(n)||QA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n,e=[]){let t;switch(n){case"Browser":t=B0(Qn());break;case"Worker":t=`${B0(Qn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const m=e(l);c(m)}catch(m){h(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(n,e={}){return Bs(n,"GET","/v2/passwordPolicy",Ga(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=6;class A2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??S2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new b2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $l.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pd(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(Ds(this));const t=e?on(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w2(this),t=new A2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sf("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await v2(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cs(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await $l.create(this,[Cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&e2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function $a(n){return on(n)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=FO(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C2(n){tm=n}function tR(n){return tm.loadJS(n)}function I2(){return tm.recaptchaEnterpriseScript}function N2(){return tm.gapiScript}function x2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class D2{constructor(){this.enterprise=new O2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class O2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const k2="recaptcha-enterprise",nR="NO_RECAPTCHA";class M2{constructor(e){this.type=k2,this.auth=$a(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{f2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new c2(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{h(m)})})}function a(l,c,h){const m=window.grecaptcha;L0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(nR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D2().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!t&&L0(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=I2();m.length!==0&&(m+=h),tR(m).then(()=>{a(h,l,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function q0(n,e,t,i=!1,a=!1){const l=new M2(n);let c;if(a)c=nR;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Cy(n,e,t,i,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await q0(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await q0(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n,e){const t=em(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Mo(l,e??{}))return a;ti(a,"already-initialized")}return t.initialize({options:e})}function V2(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Cs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function L2(n,e,t){const i=$a(n);Qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=rR(e),{host:c,port:h}=U2(e),m=h===null?"":`:${h}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Qe(Mo(p,i.config.emulator)&&Mo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Go(c)?(f_(`${l}//${c}${m}`),h_("Auth",!0)):j2()}function rR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function U2(n){const e=rR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:H0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:H0(c)}}}function H0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function j2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,t){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}async function z2(n,e){return Bs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(n,e){return lf(n,"POST","/v1/accounts:signInWithPassword",Ga(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(n,e){return lf(n,"POST","/v1/accounts:signInWithEmailLink",Ga(n,e))}async function q2(n,e){return lf(n,"POST","/v1/accounts:signInWithEmailLink",Ga(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends T_{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new $c(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new $c(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cy(e,t,"signInWithPassword",B2);case"emailLink":return F2(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cy(e,i,"signUpPassword",z2);case"emailLink":return q2(e,{idToken:t,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(n,e){return lf(n,"POST","/v1/accounts:signInWithIdp",Ga(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="http://localhost";class Vo extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Vo(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Kl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Kl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kl(e,t)}buildRequest(){const e={requestUri:H2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=af(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $2(n){const e=Sc(Ac(n)).link,t=e?Sc(Ac(e)).deep_link_id:null,i=Sc(Ac(n)).deep_link_id;return(i?Sc(Ac(i)).link:null)||i||t||e||n}class b_{constructor(e){const t=Sc(Ac(e)),i=t.apiKey??null,a=t.oobCode??null,l=G2(t.mode??null);Qe(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$2(e);try{return new b_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this.providerId=fu.PROVIDER_ID}static credential(e,t){return $c._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=b_.parseLink(t);return Qe(i,"argument-error"),$c._fromEmailAndCode(e,i.code,i.tenantId)}}fu.PROVIDER_ID="password";fu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends w_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends uf{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends uf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return qi.credential(t,i)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends uf{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sa.credential(e.oauthAccessToken)}catch{return null}}}Sa.GITHUB_SIGN_IN_METHOD="github.com";Sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends uf{constructor(){super("twitter.com")}static credential(e,t){return Vo._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Aa.credential(t,i)}catch{return null}}}Aa.TWITTER_SIGN_IN_METHOD="twitter.com";Aa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(n,e){return lf(n,"POST","/v1/accounts:signUp",Ga(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await _i._fromIdTokenResponse(e,i,a),c=G0(i);return new Lo({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=G0(i);return new Lo({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function G0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends Si{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new yd(e,t,i,a)}}function iR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(n,l,e,i):l})}async function Y2(n,e,t=!1){const i=await Xl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Lo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(n,e,t=!1){const{auth:i}=n;if(gr(i.app))return Promise.reject(Ds(i));const a="reauthenticate";try{const l=await Xl(n,iR(i,a,e,n),t);Qe(l.idToken,i,"internal-error");const c=v_(l.idToken);Qe(c,i,"internal-error");const{sub:h}=c;return Qe(n.uid===h,i,"user-mismatch"),Lo._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ti(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(n,e,t=!1){if(gr(n.app))return Promise.reject(Ds(n));const i="signIn",a=await iR(n,i,e),l=await Lo._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function X2(n,e){return sR($a(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(n){const e=$a(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z2(n,e,t){if(gr(n.app))return Promise.reject(Ds(n));const i=$a(n),c=await Cy(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K2).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&aR(n),m}),h=await Lo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function W2(n,e,t){return gr(n.app)?Promise.reject(Ds(n)):X2(on(n),fu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&aR(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(n,e){return Bs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=on(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Xl(i,J2(i.auth,l));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const h=i.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function eM(n,e,t,i){return on(n).onIdTokenChanged(e,t,i)}function tM(n,e,t){return on(n).beforeAuthStateChanged(e,t)}function nM(n,e,t,i){return on(n).onAuthStateChanged(e,t,i)}function rM(n){return on(n).signOut()}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=1e3,sM=10;class uR extends lR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);T2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,sM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},iM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uR.type="LOCAL";const aM=uR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR extends lR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cR.type="SESSION";const fR=cR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new nm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async p=>p(t.origin,l)),m=await oM(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const p=S_("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const b=T;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function uM(n){Ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function cM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fM(){return navigator?.serviceWorker?.controller||null}function hM(){return hR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebaseLocalStorageDb",dM=1,vd="firebaseLocalStorage",mR="fbase_key";class cf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rm(n,e){return n.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function mM(){const n=indexedDB.deleteDatabase(dR);return new cf(n).toPromise()}function Iy(){const n=indexedDB.open(dR,dM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(vd,{keyPath:mR})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(vd)?e(i):(i.close(),await mM(),e(await Iy()))})})}async function $0(n,e,t){const i=rm(n,!0).put({[mR]:e,value:t});return new cf(i).toPromise()}async function pM(n,e){const t=rm(n,!1).get(e),i=await new cf(t).toPromise();return i===void 0?null:i.value}function K0(n,e){const t=rm(n,!0).delete(e);return new cf(t).toPromise()}const gM=800,yM=3;class pR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Iy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>yM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nm._getInstance(hM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cM(),!this.activeServiceWorker)return;this.sender=new lM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Iy();return await $0(e,_d,"1"),await K0(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>$0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>pM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=rm(a,!1).getAll();return new cf(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pR.type="LOCAL";const _M=pR;new of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n,e){return e?Cs(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends T_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vM(n){return sR(n.auth,new A_(n),n.bypassAuthState)}function EM(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),Q2(t,new A_(n),n.bypassAuthState)}async function TM(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),Y2(t,new A_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vM;case"linkViaPopup":case"linkViaRedirect":return TM;case"reauthViaPopup":case"reauthViaRedirect":return EM;default:ti(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new of(2e3,1e4);async function wM(n,e,t){if(gr(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const i=$a(n);t2(n,e,w_);const a=gR(i,t);return new Co(i,"signInViaPopup",e,a).executeNotNull()}class Co extends yR{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=S_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bM.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="pendingRedirect",Xh=new Map;class AM extends yR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const i=await RM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RM(n,e){const t=NM(e),i=IM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function CM(n,e){Xh.set(n._key(),e)}function IM(n){return Cs(n._redirectPersistence)}function NM(n){return Qh(SM,n.config.apiKey,n.name)}async function xM(n,e,t=!1){if(gr(n.app))return Promise.reject(Ds(n));const i=$a(n),a=gR(i,e),c=await new AM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=600*1e3;class OM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!_R(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ei(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y0(e))}saveEventToCache(e){this.cachedEventUids.add(Y0(e)),this.lastProcessedEventTime=Date.now()}}function Y0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _R({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function kM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _R(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(n,e={}){return Bs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VM=/^https?/;async function LM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await MM(n);for(const t of e)try{if(UM(t))return}catch{}ti(n,"unauthorized-domain")}function UM(n){const e=Ay(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!VM.test(t))return!1;if(PM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new of(3e4,6e4);function Q0(){const n=Ki().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zM(n){return new Promise((e,t)=>{function i(){Q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q0(),t(Ei(n,"network-request-failed"))},timeout:jM.get()})}if(Ki().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ki().gapi?.load)i();else{const a=x2("iframefcb");return Ki()[a]=()=>{gapi.load?i():t(Ei(n,"network-request-failed"))},tR(`${N2()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function BM(n){return Zh=Zh||zM(n),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new of(5e3,15e3),qM="__/auth/iframe",HM="emulator/auth/iframe",GM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KM(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?__(e,HM):`https://${n.config.authDomain}/${qM}`,i={apiKey:e.apiKey,appName:n.name,v:$o},a=$M.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${af(i).slice(1)}`}async function YM(n){const e=await BM(n),t=Ki().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:KM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GM,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ei(n,"network-request-failed"),h=Ki().setTimeout(()=>{l(c)},FM.get());function m(){Ki().clearTimeout(h),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XM=500,ZM=600,WM="_blank",JM="http://localhost";class X0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eP(n,e,t,i=XM,a=ZM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m={...QM,width:i.toString(),height:a.toString(),top:l,left:c},p=Qn().toLowerCase();t&&(h=YA(p)?WM:t),$A(p)&&(e=e||JM,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[A,D])=>`${b}${A}=${D},`,"");if(E2(p)&&h!=="_self")return tP(e||"",h),new X0(null);const T=window.open(e||"",h,y);Qe(T,n,"popup-blocked");try{T.focus()}catch{}return new X0(T)}function tP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__/auth/handler",rP="emulator/auth/handler",iP=encodeURIComponent("fac");async function Z0(n,e,t,i,a,l){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$o,eventId:a};if(e instanceof w_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",BO(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries({}))c[y]=T}if(e instanceof uf){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await n._getAppCheckToken(),p=m?`#${iP}=${encodeURIComponent(m)}`:"";return`${sP(n)}?${af(h).slice(1)}${p}`}function sP({config:n}){return n.emulator?__(n,rP):`https://${n.authDomain}/${nP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="webStorageSupport";class aP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fR,this._completeRedirectFn=xM,this._overrideRedirectResult=CM}async _openPopup(e,t,i,a){Ps(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Z0(e,t,i,Ay(),a);return eP(e,l,S_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Z0(e,t,i,Ay(),a);return uM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ps(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await YM(e),i=new OM(e);return t.register("authEvent",a=>(Qe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zg,{type:Zg},a=>{const l=a?.[0]?.[Zg];l!==void 0&&t(!!l),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JA()||KA()||E_()}}const oP=aP;var W0="@firebase/auth",J0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cP(n){Po(new Pa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eR(n)},p=new R2(i,a,l,m);return V2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Po(new Pa("auth-internal",e=>{const t=$a(e.getProvider("auth").getImmediate());return(i=>new lP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(W0,J0,uP(n)),$i(W0,J0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=300,hP=OA("authIdTokenMaxAge")||fP;let ew=null;const dP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>hP)return;const a=t?.token;ew!==a&&(ew=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function mP(n=p_()){const e=em(n,"auth");if(e.isInitialized())return e.getImmediate();const t=P2(n,{popupRedirectResolver:oP,persistence:[_M,aM,fR]}),i=OA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=dP(l.toString());tM(t,c,()=>c(t.currentUser)),eM(t,h=>c(h))}}const a=NA("auth");return a&&L2(t,`http://${a}`),t}function pP(){return document.getElementsByTagName("head")?.[0]??document}C2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ei("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",pP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cP("Browser");var gP="firebase",yP="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(gP,yP,"app");var tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xa,vR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function x(){}x.prototype=R.prototype,C.D=R.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(B,L,P){for(var I=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)I[xe-2]=arguments[xe];return R.prototype[L].apply(B,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,x){x||(x=0);var B=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)B[L]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(L=0;16>L;++L)B[L]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=C.g[0],x=C.g[1],L=C.g[2];var P=C.g[3],I=R+(P^x&(L^P))+B[0]+3614090360&4294967295;R=x+(I<<7&4294967295|I>>>25),I=P+(L^R&(x^L))+B[1]+3905402710&4294967295,P=R+(I<<12&4294967295|I>>>20),I=L+(x^P&(R^x))+B[2]+606105819&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(R^L&(P^R))+B[3]+3250441966&4294967295,x=L+(I<<22&4294967295|I>>>10),I=R+(P^x&(L^P))+B[4]+4118548399&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(L^R&(x^L))+B[5]+1200080426&4294967295,P=R+(I<<12&4294967295|I>>>20),I=L+(x^P&(R^x))+B[6]+2821735955&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(R^L&(P^R))+B[7]+4249261313&4294967295,x=L+(I<<22&4294967295|I>>>10),I=R+(P^x&(L^P))+B[8]+1770035416&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(L^R&(x^L))+B[9]+2336552879&4294967295,P=R+(I<<12&4294967295|I>>>20),I=L+(x^P&(R^x))+B[10]+4294925233&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(R^L&(P^R))+B[11]+2304563134&4294967295,x=L+(I<<22&4294967295|I>>>10),I=R+(P^x&(L^P))+B[12]+1804603682&4294967295,R=x+(I<<7&4294967295|I>>>25),I=P+(L^R&(x^L))+B[13]+4254626195&4294967295,P=R+(I<<12&4294967295|I>>>20),I=L+(x^P&(R^x))+B[14]+2792965006&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(R^L&(P^R))+B[15]+1236535329&4294967295,x=L+(I<<22&4294967295|I>>>10),I=R+(L^P&(x^L))+B[1]+4129170786&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(R^x))+B[6]+3225465664&4294967295,P=R+(I<<9&4294967295|I>>>23),I=L+(R^x&(P^R))+B[11]+643717713&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(L^P))+B[0]+3921069994&4294967295,x=L+(I<<20&4294967295|I>>>12),I=R+(L^P&(x^L))+B[5]+3593408605&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(R^x))+B[10]+38016083&4294967295,P=R+(I<<9&4294967295|I>>>23),I=L+(R^x&(P^R))+B[15]+3634488961&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(L^P))+B[4]+3889429448&4294967295,x=L+(I<<20&4294967295|I>>>12),I=R+(L^P&(x^L))+B[9]+568446438&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(R^x))+B[14]+3275163606&4294967295,P=R+(I<<9&4294967295|I>>>23),I=L+(R^x&(P^R))+B[3]+4107603335&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(L^P))+B[8]+1163531501&4294967295,x=L+(I<<20&4294967295|I>>>12),I=R+(L^P&(x^L))+B[13]+2850285829&4294967295,R=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(R^x))+B[2]+4243563512&4294967295,P=R+(I<<9&4294967295|I>>>23),I=L+(R^x&(P^R))+B[7]+1735328473&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^R&(L^P))+B[12]+2368359562&4294967295,x=L+(I<<20&4294967295|I>>>12),I=R+(x^L^P)+B[5]+4294588738&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^L)+B[8]+2272392833&4294967295,P=R+(I<<11&4294967295|I>>>21),I=L+(P^R^x)+B[11]+1839030562&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^R)+B[14]+4259657740&4294967295,x=L+(I<<23&4294967295|I>>>9),I=R+(x^L^P)+B[1]+2763975236&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^L)+B[4]+1272893353&4294967295,P=R+(I<<11&4294967295|I>>>21),I=L+(P^R^x)+B[7]+4139469664&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^R)+B[10]+3200236656&4294967295,x=L+(I<<23&4294967295|I>>>9),I=R+(x^L^P)+B[13]+681279174&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^L)+B[0]+3936430074&4294967295,P=R+(I<<11&4294967295|I>>>21),I=L+(P^R^x)+B[3]+3572445317&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^R)+B[6]+76029189&4294967295,x=L+(I<<23&4294967295|I>>>9),I=R+(x^L^P)+B[9]+3654602809&4294967295,R=x+(I<<4&4294967295|I>>>28),I=P+(R^x^L)+B[12]+3873151461&4294967295,P=R+(I<<11&4294967295|I>>>21),I=L+(P^R^x)+B[15]+530742520&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^R)+B[2]+3299628645&4294967295,x=L+(I<<23&4294967295|I>>>9),I=R+(L^(x|~P))+B[0]+4096336452&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~L))+B[7]+1126891415&4294967295,P=R+(I<<10&4294967295|I>>>22),I=L+(R^(P|~x))+B[14]+2878612391&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~R))+B[5]+4237533241&4294967295,x=L+(I<<21&4294967295|I>>>11),I=R+(L^(x|~P))+B[12]+1700485571&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~L))+B[3]+2399980690&4294967295,P=R+(I<<10&4294967295|I>>>22),I=L+(R^(P|~x))+B[10]+4293915773&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~R))+B[1]+2240044497&4294967295,x=L+(I<<21&4294967295|I>>>11),I=R+(L^(x|~P))+B[8]+1873313359&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~L))+B[15]+4264355552&4294967295,P=R+(I<<10&4294967295|I>>>22),I=L+(R^(P|~x))+B[6]+2734768916&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~R))+B[13]+1309151649&4294967295,x=L+(I<<21&4294967295|I>>>11),I=R+(L^(x|~P))+B[4]+4149444226&4294967295,R=x+(I<<6&4294967295|I>>>26),I=P+(x^(R|~L))+B[11]+3174756917&4294967295,P=R+(I<<10&4294967295|I>>>22),I=L+(R^(P|~x))+B[2]+718787259&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~R))+B[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(L+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+P&4294967295}i.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var x=R-this.blockSize,B=this.B,L=this.h,P=0;P<R;){if(L==0)for(;P<=x;)a(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<R;)if(B[L++]=C.charCodeAt(P++),L==this.blockSize){a(this,B),L=0;break}}else for(;P<R;)if(B[L++]=C[P++],L==this.blockSize){a(this,B),L=0;break}}this.h=L,this.o+=R},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var x=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=x&255,x/=256;for(this.u(C),C=Array(16),R=x=0;4>R;++R)for(var B=0;32>B;B+=8)C[x++]=this.g[R]>>>B&255;return C};function l(C,R){var x=h;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=R(C)}function c(C,R){this.h=R;for(var x=[],B=!0,L=C.length-1;0<=L;L--){var P=C[L]|0;B&&P==R||(x[L]=P,B=!1)}this.g=x}var h={};function m(C){return-128<=C&&128>C?l(C,function(R){return new c([R|0],0>R?-1:0)}):new c([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return T;if(0>C)return z(p(-C));for(var R=[],x=1,B=0;C>=x;B++)R[B]=C/x|0,x*=4294967296;return new c(R,0)}function y(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return z(y(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(R,8)),B=T,L=0;L<C.length;L+=8){var P=Math.min(8,C.length-L),I=parseInt(C.substring(L,L+P),R);8>P?(P=p(Math.pow(R,P)),B=B.j(P).add(p(I))):(B=B.j(x),B=B.add(p(I)))}return B}var T=m(0),b=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(V(this))return-z(this).m();for(var C=0,R=1,x=0;x<this.g.length;x++){var B=this.i(x);C+=(0<=B?B:4294967296+B)*R,R*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(V(this))return"-"+z(this).toString(C);for(var R=p(Math.pow(C,6)),x=this,B="";;){var L=ne(x,R).g;x=U(x,L.j(R));var P=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=L,D(x))return P+B;for(;6>P.length;)P="0"+P;B=P+B}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function V(C){return C.h==-1}n.l=function(C){return C=U(this,C),V(C)?-1:D(C)?0:1};function z(C){for(var R=C.g.length,x=[],B=0;B<R;B++)x[B]=~C.g[B];return new c(x,~C.h).add(b)}n.abs=function(){return V(this)?z(this):this},n.add=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],B=0,L=0;L<=R;L++){var P=B+(this.i(L)&65535)+(C.i(L)&65535),I=(P>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);B=I>>>16,P&=65535,I&=65535,x[L]=I<<16|P}return new c(x,x[x.length-1]&-2147483648?-1:0)};function U(C,R){return C.add(z(R))}n.j=function(C){if(D(this)||D(C))return T;if(V(this))return V(C)?z(this).j(z(C)):z(z(this).j(C));if(V(C))return z(this.j(z(C)));if(0>this.l(A)&&0>C.l(A))return p(this.m()*C.m());for(var R=this.g.length+C.g.length,x=[],B=0;B<2*R;B++)x[B]=0;for(B=0;B<this.g.length;B++)for(var L=0;L<C.g.length;L++){var P=this.i(B)>>>16,I=this.i(B)&65535,xe=C.i(L)>>>16,Fe=C.i(L)&65535;x[2*B+2*L]+=I*Fe,Z(x,2*B+2*L),x[2*B+2*L+1]+=P*Fe,Z(x,2*B+2*L+1),x[2*B+2*L+1]+=I*xe,Z(x,2*B+2*L+1),x[2*B+2*L+2]+=P*xe,Z(x,2*B+2*L+2)}for(B=0;B<R;B++)x[B]=x[2*B+1]<<16|x[2*B];for(B=R;B<2*R;B++)x[B]=0;return new c(x,0)};function Z(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function H(C,R){this.g=C,this.h=R}function ne(C,R){if(D(R))throw Error("division by zero");if(D(C))return new H(T,T);if(V(C))return R=ne(z(C),R),new H(z(R.g),z(R.h));if(V(R))return R=ne(C,z(R)),new H(z(R.g),R.h);if(30<C.g.length){if(V(C)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var x=b,B=R;0>=B.l(C);)x=K(x),B=K(B);var L=M(x,1),P=M(B,1);for(B=M(B,2),x=M(x,2);!D(B);){var I=P.add(B);0>=I.l(C)&&(L=L.add(x),P=I),B=M(B,1),x=M(x,1)}return R=U(C,L.j(R)),new H(L,R)}for(L=T;0<=C.l(R);){for(x=Math.max(1,Math.floor(C.m()/R.m())),B=Math.ceil(Math.log(x)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),P=p(x),I=P.j(R);V(I)||0<I.l(C);)x-=B,P=p(x),I=P.j(R);D(P)&&(P=b),L=L.add(P),C=U(C,I)}return new H(L,C)}n.A=function(C){return ne(this,C).h},n.and=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],B=0;B<R;B++)x[B]=this.i(B)&C.i(B);return new c(x,this.h&C.h)},n.or=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],B=0;B<R;B++)x[B]=this.i(B)|C.i(B);return new c(x,this.h|C.h)},n.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],B=0;B<R;B++)x[B]=this.i(B)^C.i(B);return new c(x,this.h^C.h)};function K(C){for(var R=C.g.length+1,x=[],B=0;B<R;B++)x[B]=C.i(B)<<1|C.i(B-1)>>>31;return new c(x,C.h)}function M(C,R){var x=R>>5;R%=32;for(var B=C.g.length-x,L=[],P=0;P<B;P++)L[P]=0<R?C.i(P+x)>>>R|C.i(P+x+1)<<32-R:C.i(P+x);return new c(L,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vR=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,xa=c}).apply(typeof tw<"u"?tw:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ER,Rc,TR,Wh,Ny,bR,wR,SR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,v){return f==Array.prototype||f==Object.prototype||(f[_]=v.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var _=0;_<f.length;++_){var v=f[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(f,_){if(_)e:{var v=i;f=f.split(".");for(var S=0;S<f.length-1;S++){var X=f[S];if(!(X in v))break e;v=v[X]}f=f[f.length-1],S=v[f],_=_(S),_!=S&&_!=null&&e(v,f,{configurable:!0,writable:!0,value:_})}}function l(f,_){f instanceof String&&(f+="");var v=0,S=!1,X={next:function(){if(!S&&v<f.length){var se=v++;return{value:_(se,f[se]),done:!1}}return S=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}a("Array.prototype.values",function(f){return f||function(){return l(this,function(_,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,v){return f.call.apply(f.bind,arguments)}function T(f,_,v){if(!f)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,S),f.apply(_,X)}}return function(){return f.apply(_,arguments)}}function b(f,_,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,b.apply(null,arguments)}function A(f,_){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function D(f,_){function v(){}v.prototype=_.prototype,f.aa=_.prototype,f.prototype=new v,f.prototype.constructor=f,f.Qb=function(S,X,se){for(var be=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)be[yt-2]=arguments[yt];return _.prototype[X].apply(S,be)}}function V(f){const _=f.length;if(0<_){const v=Array(_);for(let S=0;S<_;S++)v[S]=f[S];return v}return[]}function z(f,_){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(m(S)){const X=f.length||0,se=S.length||0;f.length=X+se;for(let be=0;be<se;be++)f[X+be]=S[be]}else f.push(S)}}class U{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Z(f){return/^[\s\xa0]*$/.test(f)}function H(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function ne(f){return ne[" "](f),f}ne[" "]=function(){};var K=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function M(f,_,v){for(const S in f)_.call(v,f[S],S,f)}function C(f,_){for(const v in f)_.call(void 0,f[v],v,f)}function R(f){const _={};for(const v in f)_[v]=f[v];return _}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,_){let v,S;for(let X=1;X<arguments.length;X++){S=arguments[X];for(v in S)f[v]=S[v];for(let se=0;se<x.length;se++)v=x[se],Object.prototype.hasOwnProperty.call(S,v)&&(f[v]=S[v])}}function L(f){var _=1;f=f.split(":");const v=[];for(;0<_&&f.length;)v.push(f.shift()),_--;return f.length&&v.push(f.join(":")),v}function P(f){h.setTimeout(()=>{throw f},0)}function I(){var f=Ke;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class xe{constructor(){this.h=this.g=null}add(_,v){const S=Fe.get();S.set(_,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Fe=new U(()=>new Q,f=>f.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,Se=!1,Ke=new xe,j=()=>{const f=h.Promise.resolve(void 0);pe=()=>{f.then(le)}};var le=()=>{for(var f;f=I();){try{f.h.call(f.g)}catch(v){P(v)}var _=Fe;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}Se=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var ke=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const v=()=>{};h.addEventListener("test",v,_),h.removeEventListener("test",v,_)}catch{}return f})();function Je(f,_){if(me.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var v=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(K){e:{try{ne(_.nodeName);var X=!0;break e}catch{}X=!1}X||(_=null)}}else v=="mouseover"?_=f.fromElement:v=="mouseout"&&(_=f.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:He[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Je.aa.h.call(this)}}D(Je,me);var He={2:"touch",3:"pen",4:"mouse"};Je.prototype.h=function(){Je.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var $t="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function qn(f,_,v,S,X){this.listener=f,this.proxy=null,this.src=_,this.type=v,this.capture=!!S,this.ha=X,this.key=++Rt,this.da=this.fa=!1}function Ot(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function wn(f){this.src=f,this.g={},this.h=0}wn.prototype.add=function(f,_,v,S,X){var se=f.toString();f=this.g[se],f||(f=this.g[se]=[],this.h++);var be=ai(f,_,S,X);return-1<be?(_=f[be],v||(_.fa=!1)):(_=new qn(_,this.src,se,!!S,X),_.fa=v,f.push(_)),_};function vr(f,_){var v=_.type;if(v in f.g){var S=f.g[v],X=Array.prototype.indexOf.call(S,_,void 0),se;(se=0<=X)&&Array.prototype.splice.call(S,X,1),se&&(Ot(_),f.g[v].length==0&&(delete f.g[v],f.h--))}}function ai(f,_,v,S){for(var X=0;X<f.length;++X){var se=f[X];if(!se.da&&se.listener==_&&se.capture==!!v&&se.ha==S)return X}return-1}var Sn="closure_lm_"+(1e6*Math.random()|0),Ai={};function qs(f,_,v,S,X){if(Array.isArray(_)){for(var se=0;se<_.length;se++)qs(f,_[se],v,S,X);return null}return v=ye(v),f&&f[$t]?f.K(_,v,p(S)?!!S.capture:!1,X):kn(f,_,v,!1,S,X)}function kn(f,_,v,S,X,se){if(!_)throw Error("Invalid event type");var be=p(X)?!!X.capture:!!X,yt=we(f);if(yt||(f[Sn]=yt=new wn(f)),v=yt.add(_,v,S,be,se),v.proxy)return v;if(S=Xo(),v.proxy=S,S.src=f,S.listener=v,f.addEventListener)ke||(X=be),X===void 0&&(X=!1),f.addEventListener(_.toString(),S,X);else if(f.attachEvent)f.attachEvent(J(_.toString()),S);else if(f.addListener&&f.removeListener)f.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Xo(){function f(v){return _.call(f.src,f.listener,v)}const _=ae;return f}function Ri(f,_,v,S,X){if(Array.isArray(_))for(var se=0;se<_.length;se++)Ri(f,_[se],v,S,X);else S=p(S)?!!S.capture:!!S,v=ye(v),f&&f[$t]?(f=f.i,_=String(_).toString(),_ in f.g&&(se=f.g[_],v=ai(se,v,S,X),-1<v&&(Ot(se[v]),Array.prototype.splice.call(se,v,1),se.length==0&&(delete f.g[_],f.h--)))):f&&(f=we(f))&&(_=f.g[_.toString()],f=-1,_&&(f=ai(_,v,S,X)),(v=-1<f?_[f]:null)&&q(v))}function q(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[$t])vr(_.i,f);else{var v=f.type,S=f.proxy;_.removeEventListener?_.removeEventListener(v,S,f.capture):_.detachEvent?_.detachEvent(J(v),S):_.addListener&&_.removeListener&&_.removeListener(S),(v=we(_))?(vr(v,f),v.h==0&&(v.src=null,_[Sn]=null)):Ot(f)}}}function J(f){return f in Ai?Ai[f]:Ai[f]="on"+f}function ae(f,_){if(f.da)f=!0;else{_=new Je(_,this);var v=f.listener,S=f.ha||f.src;f.fa&&q(f),f=v.call(S,_)}return f}function we(f){return f=f[Sn],f instanceof wn?f:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(f){return typeof f=="function"?f:(f[Te]||(f[Te]=function(_){return f.handleEvent(_)}),f[Te])}function Ee(){_e.call(this),this.i=new wn(this),this.M=this,this.F=null}D(Ee,_e),Ee.prototype[$t]=!0,Ee.prototype.removeEventListener=function(f,_,v,S){Ri(this,f,_,v,S)};function Ce(f,_){var v,S=f.F;if(S)for(v=[];S;S=S.F)v.push(S);if(f=f.M,S=_.type||_,typeof _=="string")_=new me(_,f);else if(_ instanceof me)_.target=_.target||f;else{var X=_;_=new me(S,f),B(_,X)}if(X=!0,v)for(var se=v.length-1;0<=se;se--){var be=_.g=v[se];X=st(be,S,!0,_)&&X}if(be=_.g=f,X=st(be,S,!0,_)&&X,X=st(be,S,!1,_)&&X,v)for(se=0;se<v.length;se++)be=_.g=v[se],X=st(be,S,!1,_)&&X}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var v=f.g[_],S=0;S<v.length;S++)Ot(v[S]);delete f.g[_],f.h--}}this.F=null},Ee.prototype.K=function(f,_,v,S){return this.i.add(String(f),_,!1,v,S)},Ee.prototype.L=function(f,_,v,S){return this.i.add(String(f),_,!0,v,S)};function st(f,_,v,S){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var X=!0,se=0;se<_.length;++se){var be=_[se];if(be&&!be.da&&be.capture==v){var yt=be.listener,yn=be.ha||be.src;be.fa&&vr(f.i,be),X=yt.call(yn,S)!==!1&&X}}return X&&!S.defaultPrevented}function Tt(f,_,v){if(typeof f=="function")v&&(f=b(f,v));else if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function oi(f){f.g=Tt(()=>{f.g=null,f.i&&(f.i=!1,oi(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class en extends _e{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(f){_e.call(this),this.h=f,this.g={}}D(Vr,_e);var sr=[];function ar(f){M(f.g,function(_,v){this.g.hasOwnProperty(v)&&q(_)},f),f.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),ar(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=h.JSON.stringify,Lr=h.JSON.parse,or=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function li(){}li.prototype.h=null;function rs(f){return f.h||(f.h=f.i())}function Xa(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ui(){me.call(this,"d")}D(ui,me);function Hs(){me.call(this,"c")}D(Hs,me);var Zn={},Ci=null;function Ii(){return Ci=Ci||new Ee}Zn.La="serverreachability";function Gs(f){me.call(this,Zn.La,f)}D(Gs,me);function F(f){const _=Ii();Ce(_,new Gs(_))}Zn.STAT_EVENT="statevent";function Y(f,_){me.call(this,Zn.STAT_EVENT,f),this.stat=_}D(Y,me);function te(f){const _=Ii();Ce(_,new Y(_,f))}Zn.Ma="timingevent";function he(f,_){me.call(this,Zn.Ma,f),this.size=_}D(he,me);function ge(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function Ie(){this.g=!0}Ie.prototype.xa=function(){this.g=!1};function je(f,_,v,S,X,se){f.info(function(){if(f.g)if(se)for(var be="",yt=se.split("&"),yn=0;yn<yt.length;yn++){var _t=yt[yn].split("=");if(1<_t.length){var Cn=_t[0];_t=_t[1];var _n=Cn.split("_");be=2<=_n.length&&_n[1]=="type"?be+(Cn+"="+_t+"&"):be+(Cn+"=redacted&")}}else be=null;else be=se;return"XMLHTTP REQ ("+S+") [attempt "+X+"]: "+_+`
`+v+`
`+be})}function Me(f,_,v,S,X,se,be){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+X+"]: "+_+`
`+v+`
`+se+" "+be})}function Pe(f,_,v,S){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ve(f,v)+(S?" "+S:"")})}function Ge(f,_){f.info(function(){return"TIMEOUT: "+_})}Ie.prototype.info=function(){};function Ve(f,_){if(!f.g)return _;if(!_)return null;try{var v=JSON.parse(_);if(v){for(f=0;f<v.length;f++)if(Array.isArray(v[f])){var S=v[f];if(!(2>S.length)){var X=S[1];if(Array.isArray(X)&&!(1>X.length)){var se=X[0];if(se!="noop"&&se!="stop"&&se!="close")for(var be=1;be<X.length;be++)X[be]=""}}}}return Xn(v)}catch{return _}}var Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},at={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bt;function jt(){}D(jt,li),jt.prototype.g=function(){return new XMLHttpRequest},jt.prototype.i=function(){return{}},bt=new jt;function Ct(f,_,v,S){this.j=f,this.i=_,this.l=v,this.R=S||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new et}function et(){this.i=null,this.g="",this.h=!1}var It={},lr={};function Mn(f,_,v){f.L=1,f.v=Ja(br(_)),f.m=v,f.P=!0,An(f,null)}function An(f,_){f.F=Date.now(),Er(f),f.A=br(f.v);var v=f.A,S=f.R;Array.isArray(S)||(S=[String(S)]),bu(v.i,"t",S),f.C=0,v=f.j.J,f.h=new et,f.g=Nf(f.j,v?_:null,!f.m),0<f.O&&(f.M=new en(b(f.Y,f,f.g),f.O)),_=f.U,v=f.g,S=f.ca;var X="readystatechange";Array.isArray(X)||(X&&(sr[0]=X.toString()),X=sr);for(var se=0;se<X.length;se++){var be=qs(v,X[se],S||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),F(),je(f.i,f.u,f.A,f.l,f.R,f.m)}Ct.prototype.ca=function(f){f=f.target;const _=this.M;_&&qr(f)==3?_.j():this.Y(f)},Ct.prototype.Y=function(f){try{if(f==this.g)e:{const _n=qr(this.g);var _=this.g.Ba();const fs=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||Tf(this.g)))){this.J||_n!=4||_==7||(_==8||0>=fs?F(3):F(2)),Tr(this);var v=this.g.Z();this.X=v;t:if(Wn(this)){var S=Tf(this.g);f="";var X=S.length,se=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ze(this),Jn(this);var be="";break t}this.h.i=new h.TextDecoder}for(_=0;_<X;_++)this.h.h=!0,f+=this.h.i.decode(S[_],{stream:!(se&&_==X-1)});S.length=0,this.h.g+=f,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=v==200,Me(this.i,this.u,this.A,this.l,this.R,_n,v),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,yn=this.g;if((yt=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(yt)){var _t=yt;break t}}_t=null}if(v=_t)Pe(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kt(this,v);else{this.o=!1,this.s=3,te(12),Ze(this),Jn(this);break e}}if(this.P){v=!0;let Pn;for(;!this.J&&this.C<be.length;)if(Pn=$s(this,be),Pn==lr){_n==4&&(this.s=4,te(14),v=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==It){this.s=4,te(15),Pe(this.i,this.l,be,"[Invalid Chunk]"),v=!1;break}else Pe(this.i,this.l,Pn,null),Kt(this,Pn);if(Wn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||be.length!=0||this.h.h||(this.s=1,te(16),v=!1),this.o=this.o&&v,!v)Pe(this.i,this.l,be,"[Invalid Chunked Response]"),Ze(this),Jn(this);else if(0<be.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),oo(Cn),Cn.M=!0,te(11))}}else Pe(this.i,this.l,be,null),Kt(this,be);_n==4&&Ze(this),this.o&&!this.J&&(_n==4?Rf(this.j,this):(this.o=!1,Er(this)))}else Lm(this.g),v==400&&0<be.indexOf("Unknown SID")?(this.s=3,te(12)):(this.s=0,te(13)),Ze(this),Jn(this)}}}catch{}finally{}};function Wn(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function $s(f,_){var v=f.C,S=_.indexOf(`
`,v);return S==-1?lr:(v=Number(_.substring(v,S)),isNaN(v)?It:(S+=1,S+v>_.length?lr:(_=_.slice(S,S+v),f.C=S+v,_)))}Ct.prototype.cancel=function(){this.J=!0,Ze(this)};function Er(f){f.S=Date.now()+f.I,jr(f,f.I)}function jr(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ge(b(f.ba,f),_)}function Tr(f){f.B&&(h.clearTimeout(f.B),f.B=null)}Ct.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ge(this.i,this.A),this.L!=2&&(F(),te(17)),Ze(this),this.s=2,Jn(this)):jr(this,this.S-f)};function Jn(f){f.j.G==0||f.J||Rf(f.j,f)}function Ze(f){Tr(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,ar(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Kt(f,_){try{var v=f.j;if(v.G!=0&&(v.g==f||Ks(v.h,f))){if(!f.K&&Ks(v.h,f)&&v.G==3){try{var S=v.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var X=S;if(X[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<f.F)sl(v),rl(v);else break e;Cu(v),te(18)}}else v.za=X[1],0<v.za-v.T&&37500>X[2]&&v.F&&v.v==0&&!v.C&&(v.C=ge(b(v.Za,v),6e3));if(1>=ci(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else cs(v,11)}else if((f.K||v.g==f)&&sl(v),!Z(_))for(X=v.Da.g.parse(_),_=0;_<X.length;_++){let _t=X[_];if(v.T=_t[0],_t=_t[1],v.G==2)if(_t[0]=="c"){v.K=_t[1],v.ia=_t[2];const Cn=_t[3];Cn!=null&&(v.la=Cn,v.j.info("VER="+v.la));const _n=_t[4];_n!=null&&(v.Aa=_n,v.j.info("SVER="+v.Aa));const fs=_t[5];fs!=null&&typeof fs=="number"&&0<fs&&(S=1.5*fs,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Pn=f.g;if(Pn){const Pi=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var se=S.h;se.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(Ys(se,se.h),se.h=null))}if(S.D){const Nu=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(S.ya=Nu,Pt(S.I,S.D,Nu))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-f.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var be=f;if(S.qa=If(S,S.J?S.ia:null,S.W),be.K){tr(S.h,be);var yt=be,yn=S.L;yn&&(yt.I=yn),yt.B&&(Tr(yt),Er(yt)),S.g=be}else Sf(S);0<v.i.length&&il(v)}else _t[0]!="stop"&&_t[0]!="close"||cs(v,7);else v.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?cs(v,7):Au(v):_t[0]!="noop"&&v.l&&v.l.ta(_t),v.v=0)}}F(4)}catch{}}var is=class{constructor(f,_){this.g=f,this.map=_}};function er(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ft(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ci(f){return f.h?1:f.g?f.g.size:0}function Ks(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ys(f,_){f.g?f.g.add(_):f.h=_}function tr(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}er.prototype.cancel=function(){if(this.i=_u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function _u(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const v of f.g.values())_=_.concat(v.D);return _}return V(f.i)}function km(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(m(f)){for(var _=[],v=f.length,S=0;S<v;S++)_.push(f[S]);return _}_=[],v=0;for(S in f)_[v++]=f[S];return _}function Zo(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(m(f)||typeof f=="string"){var _=[];f=f.length;for(var v=0;v<f;v++)_.push(v);return _}_=[],v=0;for(const S in f)_[v++]=S;return _}}}function vu(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(m(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var v=Zo(f),S=km(f),X=S.length,se=0;se<X;se++)_.call(void 0,S[se],v&&v[se],f)}var Za=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mm(f,_){if(f){f=f.split("&");for(var v=0;v<f.length;v++){var S=f[v].indexOf("="),X=null;if(0<=S){var se=f[v].substring(0,S);X=f[v].substring(S+1)}else se=f[v];_(se,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ln(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ln){this.h=f.h,Wa(this,f.j),this.o=f.o,this.g=f.g,Qs(this,f.s),this.l=f.l;var _=f.i,v=new as;v.i=_.i,_.g&&(v.g=new Map(_.g),v.h=_.h),ss(this,v),this.m=f.m}else f&&(_=String(f).match(Za))?(this.h=!1,Wa(this,_[1]||"",!0),this.o=zr(_[2]||""),this.g=zr(_[3]||"",!0),Qs(this,_[4]),this.l=zr(_[5]||"",!0),ss(this,_[6]||"",!0),this.m=zr(_[7]||"")):(this.h=!1,this.i=new as(null,this.h))}ln.prototype.toString=function(){var f=[],_=this.j;_&&f.push(eo(_,Eu,!0),":");var v=this.g;return(v||_=="file")&&(f.push("//"),(_=this.o)&&f.push(eo(_,Eu,!0),"@"),f.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&f.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&f.push("/"),f.push(eo(v,v.charAt(0)=="/"?Pm:Tu,!0))),(v=this.i.toString())&&f.push("?",v),(v=this.m)&&f.push("#",eo(v,Wo)),f.join("")};function br(f){return new ln(f)}function Wa(f,_,v){f.j=v?zr(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Qs(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function ss(f,_,v){_ instanceof as?(f.i=_,vf(f.i,f.h)):(v||(_=eo(_,Vm)),f.i=new as(_,f.h))}function Pt(f,_,v){f.i.set(_,v)}function Ja(f){return Pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function zr(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function eo(f,_,v){return typeof f=="string"?(f=encodeURI(f).replace(_,_f),v&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _f(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Eu=/[#\/\?@]/g,Tu=/[#\?:]/g,Pm=/[#\?]/g,Vm=/[#\?@]/g,Wo=/#/g;function as(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Br(f){f.g||(f.g=new Map,f.h=0,f.i&&Mm(f.i,function(_,v){f.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}n=as.prototype,n.add=function(f,_){Br(this),this.i=null,f=Ni(this,f);var v=this.g.get(f);return v||this.g.set(f,v=[]),v.push(_),this.h+=1,this};function os(f,_){Br(f),_=Ni(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function ls(f,_){return Br(f),_=Ni(f,_),f.g.has(_)}n.forEach=function(f,_){Br(this),this.g.forEach(function(v,S){v.forEach(function(X){f.call(_,X,S,this)},this)},this)},n.na=function(){Br(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),v=[];for(let S=0;S<_.length;S++){const X=f[S];for(let se=0;se<X.length;se++)v.push(_[S])}return v},n.V=function(f){Br(this);let _=[];if(typeof f=="string")ls(this,f)&&(_=_.concat(this.g.get(Ni(this,f))));else{f=Array.from(this.g.values());for(let v=0;v<f.length;v++)_=_.concat(f[v])}return _},n.set=function(f,_){return Br(this),this.i=null,f=Ni(this,f),ls(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function bu(f,_,v){os(f,_),0<v.length&&(f.i=null,f.g.set(Ni(f,_),V(v)),f.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var v=0;v<_.length;v++){var S=_[v];const se=encodeURIComponent(String(S)),be=this.V(S);for(S=0;S<be.length;S++){var X=se;be[S]!==""&&(X+="="+encodeURIComponent(String(be[S]))),f.push(X)}}return this.i=f.join("&")};function Ni(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function vf(f,_){_&&!f.j&&(Br(f),f.i=null,f.g.forEach(function(v,S){var X=S.toLowerCase();S!=X&&(os(this,S),bu(this,X,v))},f)),f.j=_}function to(f,_){const v=new Ie;if(h.Image){const S=new Image;S.onload=A(Fr,v,"TestLoadImage: loaded",!0,_,S),S.onerror=A(Fr,v,"TestLoadImage: error",!1,_,S),S.onabort=A(Fr,v,"TestLoadImage: abort",!1,_,S),S.ontimeout=A(Fr,v,"TestLoadImage: timeout",!1,_,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else _(!1)}function fi(f,_){const v=new Ie,S=new AbortController,X=setTimeout(()=>{S.abort(),Fr(v,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:S.signal}).then(se=>{clearTimeout(X),se.ok?Fr(v,"TestPingServer: ok",!0,_):Fr(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(X),Fr(v,"TestPingServer: error",!1,_)})}function Fr(f,_,v,S,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),S(v)}catch{}}function no(){this.g=new or}function xi(f,_,v){const S=v||"";try{vu(f,function(X,se){let be=X;p(X)&&(be=Xn(X)),_.push(S+se+"="+encodeURIComponent(be))})}catch(X){throw _.push(S+"type="+encodeURIComponent("_badmap")),X}}function Xs(f){this.l=f.Ub||null,this.j=f.eb||!1}D(Xs,li),Xs.prototype.g=function(){return new us(this.l,this.j)},Xs.prototype.i=(function(f){return function(){return f}})({});function us(f,_){Ee.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(us,Ee),n=us.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Oi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function wu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Di(this):Oi(this),this.readyState==3&&wu(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Di(this))},n.Qa=function(f){this.g&&(this.response=f,Di(this))},n.ga=function(){this.g&&Di(this)};function Di(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Oi(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,f.push(v[0]+": "+v[1]),v=_.next();return f.join(`\r
`)};function Oi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Su(f){let _="";return M(f,function(v,S){_+=S,_+=":",_+=v,_+=`\r
`}),_}function Rn(f,_,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Su(v),typeof f=="string"?v!=null&&encodeURIComponent(String(v)):Pt(f,_,v))}function xt(f){Ee.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(xt,Ee);var Jo=/^https?$/i,ro=["POST","PUT"];n=xt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bt.g(),this.v=this.o?rs(this.o):rs(bt),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(se){Ef(this,se);return}if(f=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var X in S)v.set(X,S[X]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const se of S.keys())v.set(se,S.get(se));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(se=>se.toLowerCase()=="content-type"),X=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ro,_,void 0))||S||X||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,be]of v)this.g.setRequestHeader(se,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{io(this),this.u=!0,this.g.send(f),this.u=!1}catch(se){Ef(this,se)}};function Ef(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,el(f),ki(f)}function el(f){f.A||(f.A=!0,Ce(f,"complete"),Ce(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ce(this,"complete"),Ce(this,"abort"),ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),xt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tl(this):this.bb())},n.bb=function(){tl(this)};function tl(f){if(f.h&&typeof c<"u"&&(!f.v[1]||qr(f)!=4||f.Z()!=2)){if(f.u&&qr(f)==4)Tt(f.Ea,0,f);else if(Ce(f,"readystatechange"),qr(f)==4){f.h=!1;try{const be=f.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var v;if(!(v=_)){var S;if(S=be===0){var X=String(f.D).match(Za)[1]||null;!X&&h.self&&h.self.location&&(X=h.self.location.protocol.slice(0,-1)),S=!Jo.test(X?X.toLowerCase():"")}v=S}if(v)Ce(f,"complete"),Ce(f,"success");else{f.m=6;try{var se=2<qr(f)?f.g.statusText:""}catch{se=""}f.l=se+" ["+f.Z()+"]",el(f)}}finally{ki(f)}}}}function ki(f,_){if(f.g){io(f);const v=f.g,S=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Ce(f,"ready");try{v.onreadystatechange=S}catch{}}}function io(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function qr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Lr(_)}};function Tf(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Lm(f){const _={};f=(f.g&&2<=qr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<f.length;S++){if(Z(f[S]))continue;var v=L(f[S]);const X=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const se=_[X]||[];_[X]=se,se.push(v)}C(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(f,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[f]||_}function nl(f){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,f),this.cb=so("retryDelaySeedMs",1e4,f),this.Wa=so("forwardChannelMaxRetries",2,f),this.wa=so("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new er(f&&f.concurrentRequestLimit),this.Da=new no,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nl.prototype,n.la=8,n.G=1,n.connect=function(f,_,v,S){te(0),this.W=f,this.H=_||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=If(this,null,this.W),il(this)};function Au(f){if(bf(f),f.G==3){var _=f.U++,v=br(f.I);if(Pt(v,"SID",f.K),Pt(v,"RID",_),Pt(v,"TYPE","terminate"),ao(f,v),_=new Ct(f,f.j,_),_.L=2,_.v=Ja(br(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=_.v,v=!0),v||(_.g=Nf(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Er(_)}Cf(f)}function rl(f){f.g&&(oo(f),f.g.cancel(),f.g=null)}function bf(f){rl(f),f.u&&(h.clearTimeout(f.u),f.u=null),sl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function il(f){if(!Ft(f.h)&&!f.s){f.s=!0;var _=f.Ga;pe||j(),Se||(pe(),Se=!0),Ke.add(_,f),f.B=0}}function Um(f,_){return ci(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ge(b(f.Ga,f,_),Iu(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const X=new Ct(this,this.j,f);let se=this.o;if(this.S&&(se?(se=R(se),B(se,this.S)):se=this.S),this.m!==null||this.O||(X.H=se,se=null),this.P)e:{for(var _=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=v;break e}if(_===4096||v===this.i.length-1){_=v+1;break e}}_=1e3}else _=1e3;_=wf(this,X,_),v=br(this.I),Pt(v,"RID",f),Pt(v,"CVER",22),this.D&&Pt(v,"X-HTTP-Session-Id",this.D),ao(this,v),se&&(this.O?_="headers="+encodeURIComponent(String(Su(se)))+"&"+_:this.m&&Rn(v,this.m,se)),Ys(this.h,X),this.Ua&&Pt(v,"TYPE","init"),this.P?(Pt(v,"$req",_),Pt(v,"SID","null"),X.T=!0,Mn(X,v,null)):Mn(X,v,_),this.G=2}}else this.G==3&&(f?Ru(this,f):this.i.length==0||Ft(this.h)||Ru(this))};function Ru(f,_){var v;_?v=_.l:v=f.U++;const S=br(f.I);Pt(S,"SID",f.K),Pt(S,"RID",v),Pt(S,"AID",f.T),ao(f,S),f.m&&f.o&&Rn(S,f.m,f.o),v=new Ct(f,f.j,v,f.B+1),f.m===null&&(v.H=f.o),_&&(f.i=_.D.concat(f.i)),_=wf(f,v,1e3),v.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ys(f.h,v),Mn(v,S,_)}function ao(f,_){f.H&&M(f.H,function(v,S){Pt(_,S,v)}),f.l&&vu({},function(v,S){Pt(_,S,v)})}function wf(f,_,v){v=Math.min(f.i.length,v);var S=f.l?b(f.l.Na,f.l,f):null;e:{var X=f.i;let se=-1;for(;;){const be=["count="+v];se==-1?0<v?(se=X[0].g,be.push("ofs="+se)):se=0:be.push("ofs="+se);let yt=!0;for(let yn=0;yn<v;yn++){let _t=X[yn].g;const Cn=X[yn].map;if(_t-=se,0>_t)se=Math.max(0,X[yn].g-100),yt=!1;else try{xi(Cn,be,"req"+_t+"_")}catch{S&&S(Cn)}}if(yt){S=be.join("&");break e}}}return f=f.i.splice(0,v),_.D=f,S}function Sf(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;pe||j(),Se||(pe(),Se=!0),Ke.add(_,f),f.v=0}}function Cu(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ge(b(f.Fa,f),Iu(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ge(b(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,te(10),rl(this),Af(this))};function oo(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Af(f){f.g=new Ct(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=br(f.qa);Pt(_,"RID","rpc"),Pt(_,"SID",f.K),Pt(_,"AID",f.T),Pt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Pt(_,"TO",f.ja),Pt(_,"TYPE","xmlhttp"),ao(f,_),f.m&&f.o&&Rn(_,f.m,f.o),f.L&&(f.g.I=f.L);var v=f.g;f=f.ia,v.L=1,v.v=Ja(br(_)),v.m=null,v.P=!0,An(v,f)}n.Za=function(){this.C!=null&&(this.C=null,rl(this),Cu(this),te(19))};function sl(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Rf(f,_){var v=null;if(f.g==_){sl(f),oo(f),f.g=null;var S=2}else if(Ks(f.h,_))v=_.D,tr(f.h,_),S=1;else return;if(f.G!=0){if(_.o)if(S==1){v=_.m?_.m.length:0,_=Date.now()-_.F;var X=f.B;S=Ii(),Ce(S,new he(S,v)),il(f)}else Sf(f);else if(X=_.s,X==3||X==0&&0<_.X||!(S==1&&Um(f,_)||S==2&&Cu(f)))switch(v&&0<v.length&&(_=f.h,_.i=_.i.concat(v)),X){case 1:cs(f,5);break;case 4:cs(f,10);break;case 3:cs(f,6);break;default:cs(f,2)}}}function Iu(f,_){let v=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(v*=2),v*_}function cs(f,_){if(f.j.info("Error code "+_),_==2){var v=b(f.fb,f),S=f.Xa;const X=!S;S=new ln(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Wa(S,"https"),Ja(S),X?to(S.toString(),v):fi(S.toString(),v)}else te(2);f.G=0,f.l&&f.l.sa(_),Cf(f),bf(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),te(2)):(this.j.info("Failed to ping google.com"),te(1))};function Cf(f){if(f.G=0,f.ka=[],f.l){const _=_u(f.h);(_.length!=0||f.i.length!=0)&&(z(f.ka,_),z(f.ka,f.i),f.h.i.length=0,V(f.i),f.i.length=0),f.l.ra()}}function If(f,_,v){var S=v instanceof ln?br(v):new ln(v);if(S.g!="")_&&(S.g=_+"."+S.g),Qs(S,S.s);else{var X=h.location;S=X.protocol,_=_?_+"."+X.hostname:X.hostname,X=+X.port;var se=new ln(null);S&&Wa(se,S),_&&(se.g=_),X&&Qs(se,X),v&&(se.l=v),S=se}return v=f.D,_=f.ya,v&&_&&Pt(S,v,_),Pt(S,"VER",f.la),ao(f,S),S}function Nf(f,_,v){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new xt(new Xs({eb:v})):new xt(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xf(){}n=xf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function al(){}al.prototype.g=function(f,_){return new nr(f,_)};function nr(f,_){Ee.call(this),this.g=new nl(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!Z(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Z(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Mi(this)}D(nr,Ee),nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){Au(this.g)},nr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var v={};v.__data__=f,f=v}else this.u&&(v={},v.__data__=Xn(f),f=v);_.i.push(new is(_.Ya++,f)),_.G==3&&il(_)},nr.prototype.N=function(){this.g.l=null,delete this.j,Au(this.g),delete this.g,nr.aa.N.call(this)};function Df(f){ui.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const v in _){f=v;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}D(Df,ui);function Of(){Hs.call(this),this.status=1}D(Of,Hs);function Mi(f){this.g=f}D(Mi,xf),Mi.prototype.ua=function(){Ce(this.g,"a")},Mi.prototype.ta=function(f){Ce(this.g,new Df(f))},Mi.prototype.sa=function(f){Ce(this.g,new Of)},Mi.prototype.ra=function(){Ce(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,SR=function(){return new al},wR=function(){return Ii()},bR=Zn,Ny={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,Wh=Le,at.COMPLETE="complete",TR=at,Xa.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Rc=Xa,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,ER=xt}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const nw="@firebase/firestore",rw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new d_("@firebase/firestore");function Ul(){return Uo.logLevel}function Ne(n,...e){if(Uo.logLevel<=mt.DEBUG){const t=e.map(R_);Uo.debug(`Firestore (${hu}): ${n}`,...t)}}function Vs(n,...e){if(Uo.logLevel<=mt.ERROR){const t=e.map(R_);Uo.error(`Firestore (${hu}): ${n}`,...t)}}function Zl(n,...e){if(Uo.logLevel<=mt.WARN){const t=e.map(R_);Uo.warn(`Firestore (${hu}): ${n}`,...t)}}function R_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,AR(n,i,t)}function AR(n,e,t){let i=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vs(i),new Error(i)}function Dt(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||AR(e,a,i)}function it(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _P{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kn.UNAUTHENTICATED)))}shutdown(){}}class vP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EP{constructor(e){this.t=e,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Dt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Os,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Os)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Dt(typeof i.accessToken=="string",31837,{l:i}),new RR(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string",2055,{h:e}),new Kn(e)}}class TP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new TP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Dt(this.o===void 0,3512);const i=l=>{l.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=SP(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function pt(n,e){return n<e?-1:n>e?1:0}function xy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return Wg(a)===Wg(l)?pt(a,l):Wg(a)?1:-1}return pt(n.length,e.length)}const AP=55296,RP=57343;function Wg(n){const e=n.charCodeAt(0);return e>=AP&&e<=RP}function Wl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__name__";class Bi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Bi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return pt(e.length,t.length)}static compareSegments(e,t){const i=Bi.isNumericId(e),a=Bi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class Ht extends Bi{construct(e,t,i){return new Ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ht(t)}static emptyPath(){return new Ht([])}}const CP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Bi{construct(e,t,i){return new Bn(e,t,i)}static isValidIdentifier(e){return CP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sw}static keyField(){return new Bn([sw])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(l(),a++)}if(l(),c)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Ht.fromString(e))}static fromName(e){return new qe(Ht.fromString(e).popFirst(5))}static empty(){return new qe(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IP(n,e,t,i){if(e===!0&&i===!0)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aw(n){if(!qe.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ow(n){if(qe.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function IR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function im(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe(12329,{type:typeof n})}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=im(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NP(n,e){if(e<=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e){const t={typeString:n};return e&&(t.value=e),t}function ff(n,e){if(!IR(n))throw new Ae(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ae(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=-62135596800,uw=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*uw);return new Gt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lw)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uw}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ff(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:gn("string",Gt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new Gt(0,0))}static max(){return new tt(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=-1;function xP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=tt.fromTimestamp(i===1e9?new Gt(t+1,0):new Gt(t,i));return new Va(a,qe.empty(),e)}function DP(n){return new Va(n.readTime,n.key,Kc)}class Va{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Va(tt.min(),qe.empty(),Kc)}static max(){return new Va(tt.max(),qe.empty(),Kc)}}function OP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(n.documentKey,e.documentKey),t!==0?t:pt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==kP)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,i)=>{t(e)}))}static reject(e){return new de(((t,i)=>{i(e)}))}static waitFor(e){return new de(((t,i)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=de.resolve(!1);for(const i of e)t=t.next((a=>a?de.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new de(((i,a)=>{const l=e.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{c[p]=y,++h,h===l&&i(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new de(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function PP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=-1;function am(n){return n==null}function Ed(n){return n===0&&1/n==-1/0}function VP(n){return typeof n=="number"&&Number.isInteger(n)&&!Ed(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="";function LP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cw(e)),e=UP(n.get(t),e);return cw(e)}function UP(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case NR:t+="";break;default:t+=l}}return t}function cw(n){return n+NR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ka(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t){this.comparator=e,this.root=t||zn.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jh(this.root,e,this.comparator,!0)}}class jh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??zn.RED,this.left=a??zn.EMPTY,this.right=l??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new zn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return zn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hw(this.data.getIterator())}getIteratorFrom(e){return new hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class hw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Dr([])}unionWith(e){let t=new Tn(Bn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new DR("Invalid base64 string: "+l):l}})(e);return new Fn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(n){if(Dt(!!n,39018),typeof n=="string"){let e=0;const t=jP.exec(n);if(Dt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rn(n.seconds),nanos:rn(n.nanos)}}function rn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ua(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="server_timestamp",kR="__type__",MR="__previous_value__",PR="__local_write_time__";function N_(n){return(n?.mapValue?.fields||{})[kR]?.stringValue===OR}function om(n){const e=n.mapValue.fields[MR];return N_(e)?om(e):e}function Yc(n){const e=La(n.mapValue.fields[PR].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t,i,a,l,c,h,m,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const Td="(default)";class Qc{constructor(e,t){this.projectId=e,this.database=t||Td}static empty(){return new Qc("","")}get isDefaultDatabase(){return this.database===Td}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="__type__",BP="__max__",zh={mapValue:{}},LR="__vector__",bd="value";function ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N_(n)?4:qP(n)?9007199254740991:FP(n)?10:11:Xe(28295,{value:n})}function es(n,e){if(n===e)return!0;const t=ja(n);if(t!==ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yc(n).isEqual(Yc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=La(a.timestampValue),h=La(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Ua(a.bytesValue).isEqual(Ua(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return rn(a.geoPointValue.latitude)===rn(l.geoPointValue.latitude)&&rn(a.geoPointValue.longitude)===rn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return rn(a.integerValue)===rn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=rn(a.doubleValue),h=rn(l.doubleValue);return c===h?Ed(c)===Ed(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Wl(n.arrayValue.values||[],e.arrayValue.values||[],es);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(fw(c)!==fw(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!es(c[m],h[m])))return!1;return!0})(n,e);default:return Xe(52216,{left:n})}}function Xc(n,e){return(n.values||[]).find((t=>es(t,e)))!==void 0}function Jl(n,e){if(n===e)return 0;const t=ja(n),i=ja(e);if(t!==i)return pt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return pt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=rn(l.integerValue||l.doubleValue),m=rn(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return dw(n.timestampValue,e.timestampValue);case 4:return dw(Yc(n),Yc(e));case 5:return xy(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ua(l),m=Ua(c);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const y=pt(h[p],m[p]);if(y!==0)return y}return pt(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=pt(rn(l.latitude),rn(c.latitude));return h!==0?h:pt(rn(l.longitude),rn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mw(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},m=c.fields||{},p=h[bd]?.arrayValue,y=m[bd]?.arrayValue,T=pt(p?.values?.length||0,y?.values?.length||0);return T!==0?T:mw(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===zh.mapValue&&c===zh.mapValue)return 0;if(l===zh.mapValue)return 1;if(c===zh.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let T=0;T<m.length&&T<y.length;++T){const b=xy(m[T],y[T]);if(b!==0)return b;const A=Jl(h[m[T]],p[y[T]]);if(A!==0)return A}return pt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Xe(23264,{he:t})}}function dw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pt(n,e);const t=La(n),i=La(e),a=pt(t.seconds,i.seconds);return a!==0?a:pt(t.nanos,i.nanos)}function mw(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Jl(t[a],i[a]);if(l)return l}return pt(t.length,i.length)}function eu(n){return Dy(n)}function Dy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=La(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ua(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return qe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Dy(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Dy(t.fields[c])}`;return a+"}"})(n.mapValue):Xe(61005,{value:n})}function Jh(n){switch(ja(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=om(n);return e?16+Jh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ua(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Jh(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ka(i.fields,((l,c)=>{a+=l.length+Jh(c)})),a})(n.mapValue);default:throw Xe(13486,{value:n})}}function pw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Oy(n){return!!n&&"integerValue"in n}function x_(n){return!!n&&"arrayValue"in n}function gw(n){return!!n&&"nullValue"in n}function yw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ed(n){return!!n&&"mapValue"in n}function FP(n){return(n?.mapValue?.fields||{})[VR]?.stringValue===LR}function kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ka(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=kc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(n.arrayValue.values[t]);return e}return{...n}}function qP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=Bn.emptyPath(),i={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=h.popLast()}c?i[h.lastSegment()]=kc(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];ed(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ka(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new yr(kc(this.value))}}function UR(n){const e=[];return Ka(n.fields,((t,i)=>{const a=new Bn([t]);if(ed(i)){const l=UR(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,i,a,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Yn(e,0,tt.min(),tt.min(),tt.min(),yr.empty(),0)}static newFoundDocument(e,t,i,a){return new Yn(e,1,t,tt.min(),i,a,0)}static newNoDocument(e,t){return new Yn(e,2,t,tt.min(),tt.min(),yr.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,tt.min(),tt.min(),yr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.position=e,this.inclusive=t}}function _w(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=qe.comparator(qe.fromName(c.referenceValue),t.key):i=Jl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function vw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!es(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function HP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{}class pn extends jR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $P(e,t,i):t==="array-contains"?new QP(e,i):t==="in"?new XP(e,i):t==="not-in"?new ZP(e,i):t==="array-contains-any"?new WP(e,i):new pn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new KP(e,i):new YP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jl(t,this.value)):t!==null&&ja(this.value)===ja(t)&&this.matchesComparison(Jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends jR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ti(e,t)}matches(e){return zR(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zR(n){return n.op==="and"}function BR(n){return GP(n)&&zR(n)}function GP(n){for(const e of n.filters)if(e instanceof Ti)return!1;return!0}function ky(n){if(n instanceof pn)return n.field.canonicalString()+n.op.toString()+eu(n.value);if(BR(n))return n.filters.map((e=>ky(e))).join(",");{const e=n.filters.map((t=>ky(t))).join(",");return`${n.op}(${e})`}}function FR(n,e){return n instanceof pn?(function(i,a){return a instanceof pn&&i.op===a.op&&i.field.isEqual(a.field)&&es(i.value,a.value)})(n,e):n instanceof Ti?(function(i,a){return a instanceof Ti&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,h)=>l&&FR(c,a.filters[h])),!0):!1})(n,e):void Xe(19439)}function qR(n){return n instanceof pn?(function(t){return`${t.field.canonicalString()} ${t.op} ${eu(t.value)}`})(n):n instanceof Ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(qR).join(" ,")+"}"})(n):"Filter"}class $P extends pn{constructor(e,t,i){super(e,t,i),this.key=qe.fromName(i.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class KP extends pn{constructor(e,t){super(e,"in",t),this.keys=HR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YP extends pn{constructor(e,t){super(e,"not-in",t),this.keys=HR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HR(n,e){return(e.arrayValue?.values||[]).map((t=>qe.fromName(t.referenceValue)))}class QP extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return x_(t)&&Xc(t.arrayValue,this.value)}}class XP extends pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xc(this.value.arrayValue,t)}}class ZP extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xc(this.value.arrayValue,t)}}class WP extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!x_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Xc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t=null,i=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function Ew(n,e=null,t=[],i=[],a=null,l=null,c=null){return new JP(n,e,t,i,a,l,c)}function D_(n){const e=it(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ky(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),am(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>eu(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>eu(i))).join(",")),e.Te=t}return e.Te}function O_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vw(n.startAt,e.startAt)&&vw(n.endAt,e.endAt)}function My(n){return qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t=null,i=[],a=[],l=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eV(n,e,t,i,a,l,c,h){return new pu(n,e,t,i,a,l,c,h)}function lm(n){return new pu(n)}function Tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GR(n){return n.collectionGroup!==null}function Mc(n){const e=it(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Tn(Bn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Zc(l,i))})),t.has(Bn.keyField().canonicalString())||e.Ie.push(new Zc(Bn.keyField(),i))}return e.Ie}function Yi(n){const e=it(n);return e.Ee||(e.Ee=tV(e,Mc(n))),e.Ee}function tV(n,e){if(n.limitType==="F")return Ew(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Zc(a.field,l)}));const t=n.endAt?new wd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new wd(n.startAt.position,n.startAt.inclusive):null;return Ew(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Py(n,e){const t=n.filters.concat([e]);return new pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sd(n,e,t){return new pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function um(n,e){return O_(Yi(n),Yi(e))&&n.limitType===e.limitType}function $R(n){return`${D_(Yi(n))}|lt:${n.limitType}`}function jl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>qR(a))).join(", ")}]`),am(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>eu(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>eu(a))).join(",")),`Target(${i})`})(Yi(n))}; limitType=${n.limitType})`}function cm(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):qe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Mc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,h,m){const p=_w(c,h,m);return c.inclusive?p<=0:p<0})(i.startAt,Mc(i),a)||i.endAt&&!(function(c,h,m){const p=_w(c,h,m);return c.inclusive?p>=0:p>0})(i.endAt,Mc(i),a))})(n,e)}function nV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KR(n){return(e,t)=>{let i=!1;for(const a of Mc(n)){const l=rV(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function rV(n,e,t){const i=n.field.isKeyField()?qe.comparator(e.key,t.key):(function(l,c,h){const m=c.data.field(l),p=h.data.field(l);return m!==null&&p!==null?Jl(m,p):Xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return xR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new Xt(qe.comparator);function Ls(){return iV}const YR=new Xt(qe.comparator);function Cc(...n){let e=YR;for(const t of n)e=e.insert(t.key,t);return e}function QR(n){let e=YR;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Io(){return Pc()}function XR(){return Pc()}function Pc(){return new Ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const sV=new Xt(qe.comparator),aV=new Tn(qe.comparator);function gt(...n){let e=aV;for(const t of n)e=e.add(t);return e}const oV=new Tn(pt);function lV(){return oV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function ZR(n){return{integerValue:""+n}}function uV(n,e){return VP(e)?ZR(e):k_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function cV(n,e,t){return n instanceof Wc?(function(a,l){const c={fields:{[kR]:{stringValue:OR},[PR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&N_(l)&&(l=om(l)),l&&(c.fields[MR]=l),{mapValue:c}})(t,e):n instanceof Jc?JR(n,e):n instanceof ef?e1(n,e):(function(a,l){const c=WR(a,l),h=bw(c)+bw(a.Ae);return Oy(c)&&Oy(a.Ae)?ZR(h):k_(a.serializer,h)})(n,e)}function fV(n,e,t){return n instanceof Jc?JR(n,e):n instanceof ef?e1(n,e):t}function WR(n,e){return n instanceof Ad?(function(i){return Oy(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Wc extends fm{}class Jc extends fm{constructor(e){super(),this.elements=e}}function JR(n,e){const t=t1(e);for(const i of n.elements)t.some((a=>es(a,i)))||t.push(i);return{arrayValue:{values:t}}}class ef extends fm{constructor(e){super(),this.elements=e}}function e1(n,e){let t=t1(e);for(const i of n.elements)t=t.filter((a=>!es(a,i)));return{arrayValue:{values:t}}}class Ad extends fm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bw(n){return rn(n.integerValue||n.doubleValue)}function t1(n){return x_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,t){this.field=e,this.transform=t}}function dV(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Jc&&a instanceof Jc||i instanceof ef&&a instanceof ef?Wl(i.elements,a.elements,es):i instanceof Ad&&a instanceof Ad?es(i.Ae,a.Ae):i instanceof Wc&&a instanceof Wc})(n.transform,e.transform)}class mV{constructor(e,t){this.version=e,this.transformResults=t}}class Jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hm{}function n1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new M_(n.key,Jr.none()):new hf(n.key,n.data,Jr.none());{const t=n.data,i=yr.empty();let a=new Tn(Bn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ya(n.key,i,new Dr(a.toArray()),Jr.none())}}function pV(n,e,t){n instanceof hf?(function(a,l,c){const h=a.value.clone(),m=Sw(a.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ya?(function(a,l,c){if(!td(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Sw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(r1(a)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Vc(n,e,t,i){return n instanceof hf?(function(l,c,h,m){if(!td(l.precondition,c))return h;const p=l.value.clone(),y=Aw(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ya?(function(l,c,h,m){if(!td(l.precondition,c))return h;const p=Aw(l.fieldTransforms,m,c),y=c.data;return y.setAll(r1(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,c,h){return td(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function gV(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=WR(i.transform,a||null);l!=null&&(t===null&&(t=yr.empty()),t.set(i.field,l))}return t||null}function ww(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Wl(i,a,((l,c)=>dV(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hf extends hm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ya extends hm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function r1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Sw(n,e,t){const i=new Map;Dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);i.set(l.field,fV(c,h,t[a]))}return i}function Aw(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,cV(l,c,e))}return i}class M_ extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yV extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&pV(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Vc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Vc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=XR();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const m=n1(c,h);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(tt.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gt())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((t,i)=>ww(t,i)))&&Wl(this.baseMutations,e.baseMutations,((t,i)=>ww(t,i)))}}class P_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return sV})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new P_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,Et;function TV(n){switch(n){case ue.OK:return Xe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Xe(15467,{code:n})}}function i1(n){if(n===void 0)return Vs("GRPC error has no .code"),ue.UNKNOWN;switch(n){case hn.OK:return ue.OK;case hn.CANCELLED:return ue.CANCELLED;case hn.UNKNOWN:return ue.UNKNOWN;case hn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case hn.INTERNAL:return ue.INTERNAL;case hn.UNAVAILABLE:return ue.UNAVAILABLE;case hn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case hn.NOT_FOUND:return ue.NOT_FOUND;case hn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case hn.ABORTED:return ue.ABORTED;case hn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case hn.DATA_LOSS:return ue.DATA_LOSS;default:return Xe(39323,{code:n})}}(Et=hn||(hn={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=new xa([4294967295,4294967295],0);function Rw(n){const e=bV().encode(n),t=new vR;return t.update(e),new Uint8Array(t.digest())}function Cw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xa([t,i],0),new xa([a,l],0)]}class V_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ic(`Invalid padding: ${t}`);if(i<0)throw new Ic(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xa.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(xa.fromNumber(i)));return a.compare(wV)===1&&(a=new xa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Rw(e),[i,a]=Cw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new V_(l,a,t);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=Rw(e),[i,a]=Cw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,df.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dm(tt.min(),a,new Xt(pt),Ls(),gt())}}class df{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new df(i,t,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class s1{constructor(e,t){this.targetId=e,this.Ce=t}}class a1{constructor(e,t,i=Fn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Iw{constructor(){this.ve=0,this.Fe=Nw(),this.Me=Fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),t=gt(),i=gt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Xe(38017,{changeType:l})}})),new df(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Nw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ls(),this.Je=Bh(),this.He=Bh(),this.Ye=new Xt(pt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(My(l))if(i===0){const c=new qe(l.path);this.et(t,c,Yn.newNoDocument(c,tt.min()))}else Dt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=Ua(i).toUint8Array()}catch(m){if(m instanceof DR)return Zl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new V_(c,a,l)}catch(m){return Zl(m instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&My(h.target)){const m=new qe(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Yn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=gt();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new dm(e,t,this.Ye,this.je,i);return this.je=Ls(),this.Je=Bh(),this.He=Bh(),this.Ye=new Xt(pt),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Iw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tn(pt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tn(pt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bh(){return new Xt(qe.comparator)}function Nw(){return new Xt(qe.comparator)}const AV={asc:"ASCENDING",desc:"DESCENDING"},RV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CV={and:"AND",or:"OR"};class IV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vy(n,e){return n.useProto3Json||am(e)?e:{value:e}}function Rd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NV(n,e){return Rd(n,e.toTimestamp())}function Qi(n){return Dt(!!n,49232),tt.fromTimestamp((function(t){const i=La(t);return new Gt(i.seconds,i.nanos)})(n))}function L_(n,e){return Ly(n,e).canonicalString()}function Ly(n,e){const t=(function(a){return new Ht(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function l1(n){const e=Ht.fromString(n);return Dt(d1(e),10190,{key:e.toString()}),e}function Uy(n,e){return L_(n.databaseId,e.path)}function Jg(n,e){const t=l1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(c1(t))}function u1(n,e){return L_(n.databaseId,e)}function xV(n){const e=l1(n);return e.length===4?Ht.emptyPath():c1(e)}function jy(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c1(n){return Dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function xw(n,e,t){return{name:Uy(n,e),fields:t.value.mapValue.fields}}function DV(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(Dt(y===void 0||typeof y=="string",58123),Fn.fromBase64String(y||"")):(Dt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Fn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(p){const y=p.code===void 0?ue.UNKNOWN:i1(p.code);return new Ae(y,p.message||"")})(c);t=new a1(i,a,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Jg(n,i.document.name),l=Qi(i.document.updateTime),c=i.document.createTime?Qi(i.document.createTime):tt.min(),h=new yr({mapValue:{fields:i.document.fields}}),m=Yn.newFoundDocument(a,l,c,h),p=i.targetIds||[],y=i.removedTargetIds||[];t=new nd(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Jg(n,i.document),l=i.readTime?Qi(i.readTime):tt.min(),c=Yn.newNoDocument(a,l),h=i.removedTargetIds||[];t=new nd([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Jg(n,i.document),l=i.removedTargetIds||[];t=new nd([],l,a,null)}else{if(!("filter"in e))return Xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new EV(a,l),h=i.targetId;t=new s1(h,c)}}return t}function OV(n,e){let t;if(e instanceof hf)t={update:xw(n,e.key,e.value)};else if(e instanceof M_)t={delete:Uy(n,e.key)};else if(e instanceof Ya)t={update:xw(n,e.key,e.data),updateMask:BV(e.fieldMask)};else{if(!(e instanceof yV))return Xe(16599,{Vt:e.type});t={verify:Uy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const h=c.transform;if(h instanceof Wc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ef)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ad)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Xe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:NV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Xe(27497)})(n,e.precondition)),t}function kV(n,e){return n&&n.length>0?(Dt(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Qi(a.updateTime):Qi(l);return c.isEqual(tt.min())&&(c=Qi(l)),new mV(c,a.transformResults||[])})(t,e)))):[]}function MV(n,e){return{documents:[u1(n,e.path)]}}function PV(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=u1(n,a);const l=(function(p){if(p.length!==0)return h1(Ti.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(b){return{field:zl(b.field),direction:UV(b.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Vy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function VV(n){let e=xV(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Dt(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(T){const b=f1(T);return b instanceof Ti&&BR(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((b=>(function(D){return new Zc(Bl(D.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(b)))})(t.orderBy));let h=null;t.limit&&(h=(function(T){let b;return b=typeof T=="object"?T.value:T,am(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(T){const b=!!T.before,A=T.values||[];return new wd(A,b)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const b=!T.before,A=T.values||[];return new wd(A,b)})(t.endAt)),eV(e,a,c,l,h,"F",m,p)}function LV(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function f1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Bl(t.unaryFilter.field);return pn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Bl(t.unaryFilter.field);return pn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bl(t.unaryFilter.field);return pn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Bl(t.unaryFilter.field);return pn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return pn.create(Bl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ti.create(t.compositeFilter.filters.map((i=>f1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}})(t.compositeFilter.op))})(n):Xe(30097,{filter:n})}function UV(n){return AV[n]}function jV(n){return RV[n]}function zV(n){return CV[n]}function zl(n){return{fieldPath:n.canonicalString()}}function Bl(n){return Bn.fromServerFormat(n.fieldPath)}function h1(n){return n instanceof pn?(function(t){if(t.op==="=="){if(yw(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NAN"}};if(gw(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yw(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NAN"}};if(gw(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(t.field),op:jV(t.op),value:t.value}}})(n):n instanceof Ti?(function(t){const i=t.getFilters().map((a=>h1(a)));return i.length===1?i[0]:{compositeFilter:{op:zV(t.op),filters:i}}})(n):Xe(54877,{filter:n})}function BV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function d1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t,i,a,l=tt.min(),c=tt.min(),h=Fn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.yt=e}}function qV(n){const e=VV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.Cn=new GV}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Va.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Va.min())}updateCollectionGroup(e,t,i){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class GV{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Tn(Ht.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Tn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m1=41943040;class mr{static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(m1,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tu(0)}static cr(){return new tu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="LruGarbageCollector",$V=1048576;function kw([n,e],[t,i]){const a=pt(n,t);return a===0?pt(e,i):a}class KV{constructor(e){this.Ir=e,this.buffer=new Tn(kw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();kw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YV{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(Ow,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mu(t)?Ne(Ow,"Ignoring IndexedDB error during garbage collection: ",t):await du(t)}await this.Vr(3e5)}))}}class QV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(sm.ce);const i=new KV(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Dw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,h,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,h=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(p=Date.now(),Ul()<=mt.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function XV(n,e){return new QV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?de.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Vc(i.mutation,a,Dr.empty(),Gt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,gt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=gt()){const a=Io();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Cc();return l.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Io();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,gt())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,i,a){let l=Ls();const c=Pc(),h=(function(){return Pc()})();return t.forEach(((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Ya)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Vc(y.mutation,p,y.mutation.getFieldMask(),Gt.now())):c.set(p.key,Dr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>c.set(p,y))),t.forEach(((p,y)=>h.set(p,new WV(y,c.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=Pc();let a=new Xt(((c,h)=>c-h)),l=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Dr.empty();y=h.applyToLocalView(p,y),i.set(m,y);const T=(a.get(h.batchId)||gt()).add(m);a=a.insert(h.batchId,T)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,y=m.value,T=XR();y.forEach((b=>{if(!l.has(b)){const A=n1(t.get(b),i.get(b));A!==null&&T.set(b,A),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return de.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return qe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):de.resolve(Io());let h=Kc,m=l;return c.next((p=>de.forEach(p,((y,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),l.get(y)?de.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,gt()))).next((y=>({batchId:h,changes:QR(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next((i=>{let a=Cc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Cc();return this.indexManager.getCollectionParents(e,l).next((h=>de.forEach(h,(m=>{const p=(function(T,b){return new pu(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((y=>{y.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,Yn.newInvalidDocument(y)))}));let h=Cc();return c.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&Vc(y.mutation,p,Dr.empty(),Gt.now()),cm(t,p)&&(h=h.insert(m,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Qi(a.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:qV(a.bundledQuery),readTime:Qi(a.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.overlays=new Xt(qe.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Io();return de.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),de.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),de.resolve()}getOverlaysForCollection(e,t,i){const a=Io(),l=t.length+1,c=new qe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return de.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Xt(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=Io(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Io(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>h.set(p,y))),!(h.size()>=a)););return de.resolve(h)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new vV(t,i));let l=this.qr.get(t);l===void 0&&(l=gt(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.Qr=new Tn(On.$r),this.Ur=new Tn(On.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new On(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new On(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new qe(new Ht([])),i=new On(t,e),a=new On(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new qe(new Ht([])),i=new On(t,e),a=new On(t,e+1);let l=gt();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new On(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class On{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return qe.comparator(e.key,t.key)||pt(e.Yr,t.Yr)}static Kr(e,t){return pt(e.Yr,t.Yr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tn(On.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _V(l,t,i,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new On(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?I_:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new On(t,0),a=new On(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Tn(pt);return t.forEach((a=>{const l=new On(a,0),c=new On(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{i=i.add(h.Yr)}))})),de.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;qe.isDocumentKey(l)||(l=l.child(""));const c=new On(new qe(l),0);let h=new Tn(pt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Yr)),!0)}),c),de.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return de.forEach(t.mutations,(a=>{const l=new On(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new On(t,0),a=this.Zr.firstAfterOrEqual(i);return de.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.ri=e,this.docs=(function(){return new Xt(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return de.resolve(i?i.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let i=Ls();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Yn.newInvalidDocument(a))})),de.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Ls();const c=t.path,h=new qe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||OP(DP(y),i)<=0||(a.has(y.key)||cm(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Xe(9500)}ii(e,t){return de.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sL(this)}getSize(e){return de.resolve(this.size)}}class sL extends ZV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.persistence=e,this.si=new Ko((t=>D_(t)),O_),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.oi=0,this._i=new U_,this.targetCount=0,this.ai=tu.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),de.waitFor(l).next((()=>a))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return de.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),de.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return de.resolve(i)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t){this.ui={},this.overlays={},this.ci=new sm(0),this.li=!1,this.li=!0,this.hi=new nL,this.referenceDelegate=e(this),this.Pi=new aL(this),this.indexManager=new HV,this.remoteDocumentCache=(function(a){return new iL(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new FV(t),this.Ii=new eL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new rL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Ne("MemoryPersistence","Starting transaction:",e);const a=new oL(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return de.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class oL extends MP{constructor(e){super(),this.currentSequenceNumber=e}}class j_{constructor(e){this.persistence=e,this.Ri=new U_,this.Vi=null}static mi(e){return new j_(e)}get fi(){if(this.Vi)return this.Vi;throw Xe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),de.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(i=>{const a=qe.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,tt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Cd{constructor(e,t){this.persistence=e,this.pi=new Ko((i=>LP(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=XV(this,t)}static mi(e,t){return new Cd(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?de.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(i++,l.removeEntry(c,tt.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jh(e.data.value)),t}br(e,t,i){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return de.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=gt(),a=gt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new z_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PO()?8:PP(Qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new lL;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Ul()<=mt.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(Ul()<=mt.DEBUG&&Ne("QueryEngine","Query:",jl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Ul()<=mt.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(t))):de.resolve())}ys(e,t){if(Tw(t))return de.resolve(null);let i=Yi(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Sd(t,null,"F"),i=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=gt(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.Ds(t,h);return this.Cs(t,p,c,m.readTime)?this.ys(e,Sd(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,i,a){return Tw(t)||a.isEqual(tt.min())?de.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?de.resolve(null):(Ul()<=mt.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jl(t)),this.vs(e,c,t,xP(a,Kc)).next((h=>h)))}))}Ds(e,t){let i=new Tn(KR(e));return t.forEach(((a,l)=>{cm(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return Ul()<=mt.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",jl(t)),this.ps.getDocumentsMatchingQuery(e,t,Va.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="LocalStore",cL=3e8;class fL{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Xt(pt),this.xs=new Ko((l=>D_(l)),O_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function hL(n,e,t,i){return new fL(n,e,t,i)}async function g1(n,e){const t=it(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],h=[];let m=gt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){h.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:h})))}))}))}function dL(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,p,y){const T=p.batch,b=T.keys();let A=de.resolve();return b.forEach((D=>{A=A.next((()=>y.getEntry(m,D))).next((V=>{const z=p.docVersions.get(D);Dt(z!==null,48541),V.version.compareTo(z)<0&&(T.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let m=gt();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function y1(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function mL(n,e){const t=it(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((y,T)=>{const b=a.get(T);if(!b)return;h.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,T))));let A=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(Fn.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),a=a.insert(T,A),(function(V,z,U){return V.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=cL?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(b,A,y)&&h.push(t.Pi.updateTargetData(l,A))}));let m=Ls(),p=gt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(pL(l,c,e.documentUpdates).next((y=>{m=y.ks,p=y.qs}))),!i.isEqual(tt.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(y)}return de.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function pL(n,e,t){let i=gt(),a=gt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Ls();return t.forEach(((h,m)=>{const p=l.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(tt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Ne(B_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function gL(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=I_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yL(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,de.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new Ca(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function zy(n,e,t){const i=it(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!mu(c))throw c;Ne(B_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Mw(n,e,t){const i=it(n);let a=tt.min(),l=gt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,y){const T=it(m),b=T.xs.get(y);return b!==void 0?de.resolve(T.Ms.get(b)):T.Pi.getTargetData(p,y)})(i,c,Yi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:tt.min(),t?l:gt()))).next((h=>(_L(i,nV(e),h),{documents:h,Qs:l})))))}function _L(n,e,t){let i=n.Os.get(e)||tt.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class Pw{constructor(){this.activeTargetIds=lV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vL{constructor(){this.Mo=new Pw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="ConnectivityMonitor";class Lw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(Vw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(Vw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function By(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="RestConnection",TL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Td?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=By(),h=this.zo(e,t.toUriEncodedString());Ne(ey,`Sending RPC '${e}' ${c}:`,h,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(h),y=Go(p);return this.Jo(e,h,m,i,y).then((T=>(Ne(ey,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Zl(ey,`RPC '${e}' ${c} failed with error: `,T,"url: ",h,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=TL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class SL extends bL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=By();return new Promise(((h,m)=>{const p=new ER;p.setWithCredentials(!0),p.listenOnce(TR.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wh.NO_ERROR:const T=p.getResponseJson();Ne($n,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),h(T);break;case Wh.TIMEOUT:Ne($n,`RPC '${e}' ${c} timed out`),m(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const b=p.getStatus();if(Ne($n,`RPC '${e}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A?.error;if(D&&D.status&&D.message){const V=(function(U){const Z=U.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Z)>=0?Z:ue.UNKNOWN})(D.status);m(new Ae(V,D.message))}else m(new Ae(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ne($n,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);Ne($n,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=By(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=SR(),h=wR(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=l.join("");Ne($n,`Creating RPC '${e}' stream ${a}: ${y}`,m);const T=c.createWebChannel(y,m);this.I_(T);let b=!1,A=!1;const D=new wL({Yo:z=>{A?Ne($n,`Not sending because RPC '${e}' stream ${a} is closed:`,z):(b||(Ne($n,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),Ne($n,`RPC '${e}' stream ${a} sending:`,z),T.send(z))},Zo:()=>T.close()}),V=(z,U,Z)=>{z.listen(U,(H=>{try{Z(H)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return V(T,Rc.EventType.OPEN,(()=>{A||(Ne($n,`RPC '${e}' stream ${a} transport opened.`),D.o_())})),V(T,Rc.EventType.CLOSE,(()=>{A||(A=!0,Ne($n,`RPC '${e}' stream ${a} transport closed`),D.a_(),this.E_(T))})),V(T,Rc.EventType.ERROR,(z=>{A||(A=!0,Zl($n,`RPC '${e}' stream ${a} transport errored. Name:`,z.name,"Message:",z.message),D.a_(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))})),V(T,Rc.EventType.MESSAGE,(z=>{if(!A){const U=z.data[0];Dt(!!U,16349);const Z=U,H=Z?.error||Z[0]?.error;if(H){Ne($n,`RPC '${e}' stream ${a} received error:`,H);const ne=H.status;let K=(function(R){const x=hn[R];if(x!==void 0)return i1(x)})(ne),M=H.message;K===void 0&&(K=ue.INTERNAL,M="Unknown error status: "+ne+" with message "+H.message),A=!0,D.a_(new Ae(K,M)),T.close()}else Ne($n,`RPC '${e}' stream ${a} received:`,U),D.u_(U)}})),V(h,bR.STAT_EVENT,(z=>{z.stat===Ny.PROXY?Ne($n,`RPC '${e}' stream ${a} detected buffering proxy`):z.stat===Ny.NOPROXY&&Ne($n,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ty(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(n){return new IV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="PersistentStream";class v1{constructor(e,t,i,a,l,c,h,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Vs(t.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(Uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ne(Uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AL extends v1{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DV(this.serializer,e),i=(function(l){if(!("targetChange"in l))return tt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?Qi(c.readTime):tt.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=jy(this.serializer),t.addTarget=(function(l,c){let h;const m=c.target;if(h=My(m)?{documents:MV(l,m)}:{query:PV(l,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=o1(l,c.resumeToken);const p=Vy(l,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(tt.min())>0){h.readTime=Rd(l,c.snapshotVersion.toTimestamp());const p=Vy(l,c.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const i=LV(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=jy(this.serializer),t.removeTarget=e,this.q_(t)}}class RL extends v1{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=kV(e.writeResults,e.commitTime),i=Qi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>OV(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{}class IL extends CL{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Ly(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ue.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Ly(t,i),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vs(t),this.aa=!1):Ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class xL{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Yo(this)&&(Ne(jo,"Restarting streams for network reachability change."),await(async function(m){const p=it(m);p.Ea.add(4),await mf(p),p.Ra.set("Unknown"),p.Ea.delete(4),await pm(p)})(this))}))})),this.Ra=new NL(i,a)}}async function pm(n){if(Yo(n))for(const e of n.da)await e(!0)}async function mf(n){for(const e of n.da)await e(!1)}function E1(n,e){const t=it(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),G_(t)?H_(t):gu(t).O_()&&q_(t,e))}function F_(n,e){const t=it(n),i=gu(t);t.Ia.delete(e),i.O_()&&T1(t,e),t.Ia.size===0&&(i.O_()?i.L_():Yo(t)&&t.Ra.set("Unknown"))}function q_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gu(n).Y_(e)}function T1(n,e){n.Va.Ue(e),gu(n).Z_(e)}function H_(n){n.Va=new SV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),gu(n).start(),n.Ra.ua()}function G_(n){return Yo(n)&&!gu(n).x_()&&n.Ia.size>0}function Yo(n){return it(n).Ea.size===0}function b1(n){n.Va=void 0}async function DL(n){n.Ra.set("Online")}async function OL(n){n.Ia.forEach(((e,t)=>{q_(n,e)}))}async function kL(n,e){b1(n),G_(n)?(n.Ra.ha(e),H_(n)):n.Ra.set("Unknown")}async function ML(n,e,t){if(n.Ra.set("Online"),e instanceof a1&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(i){Ne(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Id(n,i)}else if(e instanceof nd?n.Va.Ze(e):e instanceof s1?n.Va.st(e):n.Va.tt(e),!t.isEqual(tt.min()))try{const i=await y1(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Fn.EMPTY_BYTE_STRING,y.snapshotVersion)),T1(l,m);const T=new Ca(y.target,m,p,y.sequenceNumber);q_(l,T)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){Ne(jo,"Failed to raise snapshot:",i),await Id(n,i)}}async function Id(n,e,t){if(!mu(e))throw e;n.Ea.add(1),await mf(n),n.Ra.set("Offline"),t||(t=()=>y1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ne(jo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await pm(n)}))}function w1(n,e){return e().catch((t=>Id(n,t,e)))}async function gm(n){const e=it(n),t=za(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:I_;for(;PL(e);)try{const a=await gL(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,VL(e,a)}catch(a){await Id(e,a)}S1(e)&&A1(e)}function PL(n){return Yo(n)&&n.Ta.length<10}function VL(n,e){n.Ta.push(e);const t=za(n);t.O_()&&t.X_&&t.ea(e.mutations)}function S1(n){return Yo(n)&&!za(n).x_()&&n.Ta.length>0}function A1(n){za(n).start()}async function LL(n){za(n).ra()}async function UL(n){const e=za(n);for(const t of n.Ta)e.ea(t.mutations)}async function jL(n,e,t){const i=n.Ta.shift(),a=P_.from(i,e,t);await w1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await gm(n)}async function zL(n,e){e&&za(n).X_&&await(async function(i,a){if((function(c){return TV(c)&&c!==ue.ABORTED})(a.code)){const l=i.Ta.shift();za(i).B_(),await w1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await gm(i)}})(n,e),S1(n)&&A1(n)}async function jw(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Ne(jo,"RemoteStore received new credentials");const i=Yo(t);t.Ea.add(3),await mf(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pm(t)}async function BL(n,e){const t=it(n);e?(t.Ea.delete(2),await pm(t)):e||(t.Ea.add(2),await mf(t),t.Ra.set("Unknown"))}function gu(n){return n.ma||(n.ma=(function(t,i,a){const l=it(t);return l.sa(),new AL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:DL.bind(null,n),t_:OL.bind(null,n),r_:kL.bind(null,n),H_:ML.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),G_(n)?H_(n):n.Ra.set("Unknown")):(await n.ma.stop(),b1(n))}))),n.ma}function za(n){return n.fa||(n.fa=(function(t,i,a){const l=it(t);return l.sa(),new RL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:LL.bind(null,n),r_:zL.bind(null,n),ta:UL.bind(null,n),na:jL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await gm(n)):(await n.fa.stop(),n.Ta.length>0&&(Ne(jo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,h=new $_(e,t,c,a,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function K_(n,e){if(Vs("AsyncQueue",`${e}: ${n}`),mu(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||qe.comparator(t.key,i.key):(t,i)=>qe.comparator(t.key,i.key),this.keyedMap=Cc(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.ga=new Xt(qe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class nu{constructor(e,t,i,a,l,c,h,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new nu(e,t,Yl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qL{constructor(){this.queries=Bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=it(t),l=a.queries;a.queries=Bw(),l.forEach(((c,h)=>{for(const m of h.Sa)m.onError(i)}))})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function Bw(){return new Ko((n=>$R(n)),um)}async function Y_(n,e){const t=it(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new FL,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=K_(c,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&X_(t)}async function Q_(n,e){const t=it(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function HL(n,e){const t=it(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(i=!0);c.wa=a}}i&&X_(t)}function GL(n,e,t){const i=it(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function X_(n){n.Ca.forEach((e=>{e.next()}))}var Fy,Fw;(Fw=Fy||(Fy={})).Ma="default",Fw.Cache="cache";class Z_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new nu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.key=e}}class C1{constructor(e){this.key=e}}class $L{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gt(),this.mutatedKeys=gt(),this.eu=KR(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new zw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,T)=>{const b=a.get(y),A=cm(this.query,T)?T:null,D=!!b&&this.mutatedKeys.has(b.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let z=!1;b&&A?b.data.isEqual(A.data)?D!==V&&(i.track({type:3,doc:A}),z=!0):this.su(b,A)||(i.track({type:2,doc:A}),z=!0,(m&&this.eu(A,m)>0||p&&this.eu(A,p)<0)&&(h=!0)):!b&&A?(i.track({type:0,doc:A}),z=!0):b&&!A&&(i.track({type:1,doc:b}),z=!0,(m||p)&&(h=!0)),z&&(A?(c=c.add(A),l=V?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,T)=>(function(A,D){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Rt:z})}};return V(A)-V(D)})(y.type,T.type)||this.eu(y.doc,T.doc))),this.ou(i),a=a??!1;const h=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,c.length!==0||p?{snapshot:new nu(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new C1(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new R1(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const W_="SyncEngine";class KL{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class YL{constructor(e){this.key=e,this.hu=!1}}class QL{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ko((h=>$R(h)),um),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(qe.comparator),this.Au=new Map,this.Ru=new U_,this.Vu={},this.mu=new Map,this.fu=tu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XL(n,e,t=!0){const i=k1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await I1(i,e,t,!0),a}async function ZL(n,e){const t=k1(n);await I1(t,e,!0,!1)}async function I1(n,e,t,i){const a=await yL(n.localStore,Yi(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await WL(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&E1(n.remoteStore,a),h}async function WL(n,e,t,i,a){n.pu=(T,b,A)=>(async function(V,z,U,Z){let H=z.view.ru(U);H.Cs&&(H=await Mw(V.localStore,z.query,!1).then((({documents:C})=>z.view.ru(C,H))));const ne=Z&&Z.targetChanges.get(z.targetId),K=Z&&Z.targetMismatches.get(z.targetId)!=null,M=z.view.applyChanges(H,V.isPrimaryClient,ne,K);return Hw(V,z.targetId,M.au),M.snapshot})(n,T,b,A);const l=await Mw(n.localStore,e,!0),c=new $L(e,l.Qs),h=c.ru(l.documents),m=df.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,m);Hw(n,t,p.au);const y=new KL(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function JL(n,e,t){const i=it(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!um(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await zy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&F_(i.remoteStore,a.targetId),qy(i,a.targetId)})).catch(du)):(qy(i,a.targetId),await zy(i.localStore,a.targetId,!0))}async function e4(n,e){const t=it(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),F_(t.remoteStore,i.targetId))}async function t4(n,e,t){const i=l4(n);try{const a=await(function(c,h){const m=it(c),p=Gt.now(),y=h.reduce(((A,D)=>A.add(D.key)),gt());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let D=Ls(),V=gt();return m.Ns.getEntries(A,y).next((z=>{D=z,D.forEach(((U,Z)=>{Z.isValidDocument()||(V=V.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,D))).next((z=>{T=z;const U=[];for(const Z of h){const H=gV(Z,T.get(Z.key).overlayedDocument);H!=null&&U.push(new Ya(Z.key,H,UR(H.value.mapValue),Jr.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,U,h)})).next((z=>{b=z;const U=z.applyToLocalDocumentSet(T,V);return m.documentOverlayCache.saveOverlays(A,z.batchId,U)}))})).then((()=>({batchId:b.batchId,changes:QR(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,h,m){let p=c.Vu[c.currentUser.toKey()];p||(p=new Xt(pt)),p=p.insert(h,m),c.Vu[c.currentUser.toKey()]=p})(i,a.batchId,t),await pf(i,a.changes),await gm(i.remoteStore)}catch(a){const l=K_(a,"Failed to persist write");t.reject(l)}}async function N1(n,e){const t=it(n);try{const i=await mL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Dt(c.hu,14607):a.removedDocuments.size>0&&(Dt(c.hu,42227),c.hu=!1))})),await pf(t,i,e)}catch(i){await du(i)}}function qw(n,e,t){const i=it(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const m=it(c);m.onlineState=h;let p=!1;m.queries.forEach(((y,T)=>{for(const b of T.Sa)b.va(h)&&(p=!0)})),p&&X_(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function n4(n,e,t){const i=it(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new Xt(qe.comparator);c=c.insert(l,Yn.newNoDocument(l,tt.min()));const h=gt().add(l),m=new dm(tt.min(),new Map,new Xt(pt),c,h);await N1(i,m),i.du=i.du.remove(l),i.Au.delete(e),J_(i)}else await zy(i.localStore,e,!1).then((()=>qy(i,e,t))).catch(du)}async function r4(n,e){const t=it(n),i=e.batch.batchId;try{const a=await dL(t.localStore,e);D1(t,i,null),x1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await pf(t,a)}catch(a){await du(a)}}async function i4(n,e,t){const i=it(n);try{const a=await(function(c,h){const m=it(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,h).next((T=>(Dt(T!==null,37113),y=T.keys(),m.mutationQueue.removeMutationBatch(p,T)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);D1(i,e,t),x1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await pf(i,a)}catch(a){await du(a)}}function x1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function D1(n,e,t){const i=it(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function qy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||O1(n,i)}))}function O1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(F_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),J_(n))}function Hw(n,e,t){for(const i of t)i instanceof R1?(n.Ru.addReference(i.key,e),s4(n,i)):i instanceof C1?(Ne(W_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||O1(n,i.key)):Xe(19791,{wu:i})}function s4(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(Ne(W_,"New document in limbo: "+t),n.Eu.add(i),J_(n))}function J_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new qe(Ht.fromString(e)),i=n.fu.next();n.Au.set(i,new YL(t)),n.du=n.du.insert(t,i),E1(n.remoteStore,new Ca(Yi(lm(t.path)),i,"TargetPurposeLimboResolution",sm.ce))}}async function pf(n,e,t){const i=it(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,m)=>{c.push(i.pu(m,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const y=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(p){a.push(p);const y=z_.As(m.targetId,p);l.push(y)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(m,p){const y=it(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>de.forEach(p,(b=>de.forEach(b.Es,(A=>y.persistence.referenceDelegate.addReference(T,b.targetId,A))).next((()=>de.forEach(b.ds,(A=>y.persistence.referenceDelegate.removeReference(T,b.targetId,A)))))))))}catch(T){if(!mu(T))throw T;Ne(B_,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const A=y.Ms.get(b),D=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(D);y.Ms=y.Ms.insert(b,V)}}})(i.localStore,l))}async function a4(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Ne(W_,"User change. New user:",e.toKey());const i=await g1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new Ae(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pf(t,i.Ls)}}function o4(n,e){const t=it(n),i=t.Au.get(e);if(i&&i.hu)return gt().add(i.key);{let a=gt();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function k1(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n4.bind(null,e),e.Pu.H_=HL.bind(null,e.eventManager),e.Pu.yu=GL.bind(null,e.eventManager),e}function l4(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i4.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hL(this.persistence,new uL,e.initialUser,this.serializer)}Cu(e){return new p1(j_.mi,this.serializer)}Du(e){return new vL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class u4 extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Dt(this.persistence.referenceDelegate instanceof Cd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new YV(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new p1((i=>Cd.mi(i,t)),this.serializer)}}class Hy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=a4.bind(null,this.syncEngine),await BL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qL})()}createDatastore(e){const t=mm(e.databaseInfo.databaseId),i=(function(l){return new SL(l)})(e.databaseInfo);return(function(l,c,h,m){return new IL(l,c,h,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,h){return new xL(i,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>qw(this.syncEngine,t,0)),(function(){return Lw.v()?new Lw:new EL})())}createSyncEngine(e,t){return(function(a,l,c,h,m,p,y){const T=new QL(a,l,c,h,m,p);return y&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=it(t);Ne(jo,"RemoteStore shutting down."),i.Ea.add(5),await mf(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hy.provider={build:()=>new Hy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="FirestoreClient";class c4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Kn.UNAUTHENTICATED,this.clientId=C_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Ne(Ba,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Ne(Ba,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=K_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ny(n,e){n.asyncQueue.verifyOperationInProgress(),Ne(Ba,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await g1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Gw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await f4(n);Ne(Ba,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>jw(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>jw(e.remoteStore,a))),n._onlineComponents=e}async function f4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ne(Ba,"Using user provided OfflineComponentProvider");try{await ny(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ue.FAILED_PRECONDITION||a.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Zl("Error using user provided cache. Falling back to memory cache: "+t),await ny(n,new Nd)}}else Ne(Ba,"Using default OfflineComponentProvider"),await ny(n,new u4(void 0));return n._offlineComponents}async function M1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ne(Ba,"Using user provided OnlineComponentProvider"),await Gw(n,n._uninitializedComponentsProvider._online)):(Ne(Ba,"Using default OnlineComponentProvider"),await Gw(n,new Hy))),n._onlineComponents}function h4(n){return M1(n).then((e=>e.syncEngine))}async function xd(n){const e=await M1(n),t=e.eventManager;return t.onListen=XL.bind(null,e.syncEngine),t.onUnlisten=JL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=e4.bind(null,e.syncEngine),t}function d4(n,e,t={}){const i=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,p){const y=new ev({next:b=>{y.Nu(),c.enqueueAndForget((()=>Q_(l,T)));const A=b.docs.has(h);!A&&b.fromCache?p.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&m&&m.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Z_(lm(h.path),y,{includeMetadataChanges:!0,qa:!0});return Y_(l,T)})(await xd(n),n.asyncQueue,e,t,i))),i.promise}function m4(n,e,t={}){const i=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,p){const y=new ev({next:b=>{y.Nu(),c.enqueueAndForget((()=>Q_(l,T))),b.fromCache&&m.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Z_(h,y,{includeMetadataChanges:!0,qa:!0});return Y_(l,T)})(await xd(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firestore.googleapis.com",Kw=!0;class Yw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V1,this.ssl=Kw}else this.host=e.host,this.ssl=e.ssl??Kw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$V)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ym{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _P;switch(i.type){case"firstParty":return new bP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=$w.get(t);i&&(Ne("ComponentProvider","Removing Datastore"),$w.delete(t),i.terminate())})(this),Promise.resolve()}}function p4(n,e,t,i={}){n=_r(n,ym);const a=Go(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(f_(`https://${h}`),h_("Firestore",!0)),l.host!==V1&&l.host!==h&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:i};if(!Mo(m,c)&&(n._setSettings(m),i.mockUserToken)){let p,y;if(typeof i.mockUserToken=="string")p=i.mockUserToken,y=Kn.MOCK_USER;else{p=kA(i.mockUserToken,n._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Kn(T)}n._authCredentials=new vP(new RR(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ff(t,Jt._jsonSchema))return new Jt(e,i||null,new qe(Ht.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:gn("string",Jt._jsonSchemaVersion),referencePath:gn("string")};class Da extends Fs{constructor(e,t,i){super(e,t,lm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new qe(e))}withConverter(e){return new Da(this.firestore,e,this._path)}}function ni(n,e,...t){if(n=on(n),CR("collection","path",e),n instanceof ym){const i=Ht.fromString(e,...t);return ow(i),new Da(n,null,i)}{if(!(n instanceof Jt||n instanceof Da))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ht.fromString(e,...t));return ow(i),new Da(n.firestore,null,i)}}function ii(n,e,...t){if(n=on(n),arguments.length===1&&(e=C_.newId()),CR("doc","path",e),n instanceof ym){const i=Ht.fromString(e,...t);return aw(i),new Jt(n,null,new qe(i))}{if(!(n instanceof Jt||n instanceof Da))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ht.fromString(e,...t));return aw(i),new Jt(n.firestore,n instanceof Da?n.converter:null,new qe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="AsyncQueue";class Xw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _1(this,"async_queue_retry"),this._c=()=>{const i=ty();i&&Ne(Qw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ty();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ty();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mu(e))throw e;Ne(Qw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vs("INTERNAL UNHANDLED ERROR: ",Zw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=$_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Xe(47125,{Pc:Zw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Us extends ym{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Xw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xw(e),this._firestoreClient=void 0,await e}}}function g4(n,e){const t=typeof n=="object"?n:p_(),i=typeof n=="string"?n:Td,a=em(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=xA("firestore");l&&p4(a,...l)}return a}function _m(n){if(n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||y4(n),n._firestoreClient}function y4(n){const e=n._freezeSettings(),t=(function(a,l,c,h){return new zP(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,P1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new c4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Fn.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wr(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ff(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:gn("string",Wr._jsonSchemaVersion),bytes:gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(ff(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:gn("string",Xi._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ff(e,Zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zi(e.vectorValues);throw new Ae(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:gn("string",Zi._jsonSchemaVersion),vectorValues:gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^__.*__$/;class v4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new hf(e,this.data,t,this.fieldTransforms)}}class L1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function U1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ac:n})}}class tv{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(U1(this.Ac)&&_4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||mm(e)}Cc(e,t,i,a=!1){return new tv({Ac:e,methodName:t,Dc:i,path:Bn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tm(n){const e=n._freezeSettings(),t=mm(n._databaseId);return new E4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j1(n,e,t,i,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);rv("Data must be an object, but it was:",c,i);const h=z1(i,c);let m,p;if(l.merge)m=new Dr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const b=Gy(e,T,t);if(!c.contains(b))throw new Ae(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);F1(y,b)||y.push(b)}m=new Dr(y),p=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,p=c.fieldTransforms;return new v4(new yr(h),m,p)}class bm extends Em{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}class nv extends Em{_toFieldTransform(e){return new hV(e.path,new Wc)}isEqual(e){return e instanceof nv}}function T4(n,e,t,i){const a=n.Cc(1,e,t);rv("Data must be an object, but it was:",a,i);const l=[],c=yr.empty();Ka(i,((m,p)=>{const y=iv(e,m,t);p=on(p);const T=a.yc(y);if(p instanceof bm)l.push(y);else{const b=gf(p,T);b!=null&&(l.push(y),c.set(y,b))}}));const h=new Dr(l);return new L1(c,h,a.fieldTransforms)}function b4(n,e,t,i,a,l){const c=n.Cc(1,e,t),h=[Gy(e,i,t)],m=[a];if(l.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)h.push(Gy(e,l[b])),m.push(l[b+1]);const p=[],y=yr.empty();for(let b=h.length-1;b>=0;--b)if(!F1(p,h[b])){const A=h[b];let D=m[b];D=on(D);const V=c.yc(A);if(D instanceof bm)p.push(A);else{const z=gf(D,V);z!=null&&(p.push(A),y.set(A,z))}}const T=new Dr(p);return new L1(y,T,c.fieldTransforms)}function w4(n,e,t,i=!1){return gf(t,n.Cc(i?4:3,e))}function gf(n,e){if(B1(n=on(n)))return rv("Unsupported field value:",e,n),z1(n,e);if(n instanceof Em)return(function(i,a){if(!U1(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const h of i){let m=gf(h,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=on(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uV(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Gt.fromDate(i);return{timestampValue:Rd(a.serializer,l)}}if(i instanceof Gt){const l=new Gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rd(a.serializer,l)}}if(i instanceof Xi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wr)return{bytesValue:o1(a.serializer,i._byteString)};if(i instanceof Jt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:L_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Zi)return(function(c,h){return{mapValue:{fields:{[VR]:{stringValue:LR},[bd]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return k_(h.serializer,p)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${im(i)}`)})(n,e)}function z1(n,e){const t={};return xR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(n,((i,a)=>{const l=gf(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function B1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof Xi||n instanceof Wr||n instanceof Jt||n instanceof Em||n instanceof Zi)}function rv(n,e,t){if(!B1(t)||!IR(t)){const i=im(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Gy(n,e,t){if((e=on(e))instanceof vm)return e._internalPath;if(typeof e=="string")return iv(n,e);throw Dd("Field path arguments must be of type string or ",n,!1,void 0,t)}const S4=new RegExp("[~\\*/\\[\\]]");function iv(n,e,t){if(e.search(S4)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vm(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dd(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new Ae(ue.INVALID_ARGUMENT,h+n+m)}function F1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class A4 extends q1{data(){return super.data()}}function wm(n,e){return typeof e=="string"?iv(n,e):e instanceof vm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sv{}class av extends sv{}function ru(n,e,...t){let i=[];e instanceof sv&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof ov)).length,h=l.filter((m=>m instanceof Sm)).length;if(c>1||c>0&&h>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Sm extends av{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Sm(e,t,i)}_apply(e){const t=this._parse(e);return G1(e._query,t),new Fs(e.firestore,e.converter,Py(e._query,t))}_parse(e){const t=Tm(e.firestore);return(function(l,c,h,m,p,y,T){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){tS(T,y);const D=[];for(const V of T)D.push(eS(m,l,V));b={arrayValue:{values:D}}}else b=eS(m,l,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||tS(T,y),b=w4(h,c,T,y==="in"||y==="not-in");return pn.create(p,y,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Od(n,e,t){const i=e,a=wm("where",n);return Sm._create(a,i,t)}class ov extends sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ov(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const m of h)G1(c,m),c=Py(c,m)})(e._query,t),new Fs(e.firestore,e.converter,Py(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lv extends av{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lv(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(l,c)})(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new pu(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Am(n,e="asc"){const t=e,i=wm("orderBy",n);return lv._create(i,t)}class uv extends av{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new uv(e,t,i)}_apply(e){return new Fs(e.firestore,e.converter,Sd(e._query,this._limit,this._limitType))}}function Jw(n){return NP("limit",n),uv._create("limit",n,"F")}function eS(n,e,t){if(typeof(t=on(t))=="string"){if(t==="")throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GR(e)&&t.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ht.fromString(t));if(!qe.isDocumentKey(i))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pw(n,new qe(i))}if(t instanceof Jt)return pw(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${im(t)}.`)}function tS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G1(n,e){const t=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class R4{convertValue(e,t="none"){switch(ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ka(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[bd].arrayValue?.values?.map((i=>rn(i.doubleValue)));return new Zi(t)}convertGeoPoint(e){return new Xi(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=om(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const t=La(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ht.fromString(e);Dt(d1(i),9688,{name:e});const a=new Qc(i.get(1),i.get(3)),l=new qe(i.popFirst(5));return a.isEqual(t)||Vs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends q1{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(wm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:gn("string",xo._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class rd extends xo{data(e={}){return super.data(e)}}class Do{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Nc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new rd(this._firestore,this._userDataWriter,i.key,i,new Nc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const m=new rd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Nc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new rd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Nc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:C4(h.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=C_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(n){n=_r(n,Jt);const e=_r(n.firestore,Us);return d4(_m(e),n._key).then((t=>K1(e,n,t)))}Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:gn("string",Do._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class cv extends R4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function js(n){n=_r(n,Fs);const e=_r(n.firestore,Us),t=_m(e),i=new cv(e);return H1(n._query),m4(t,n._query).then((a=>new Do(e,i,n,a)))}function fv(n,e,t){n=_r(n,Jt);const i=_r(n.firestore,Us),a=$1(n.converter,e);return Rm(i,[j1(Tm(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Jr.none())])}function I4(n,e,t,...i){n=_r(n,Jt);const a=_r(n.firestore,Us),l=Tm(a);let c;return c=typeof(e=on(e))=="string"||e instanceof vm?b4(l,"updateDoc",n._key,e,t,i):T4(l,"updateDoc",n._key,e),Rm(a,[c.toMutation(n._key,Jr.exists(!0))])}function yu(n){return Rm(_r(n.firestore,Us),[new M_(n._key,Jr.none())])}function hv(n,e){const t=_r(n.firestore,Us),i=ii(n),a=$1(n.converter,e);return Rm(t,[j1(Tm(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Jr.exists(!1))]).then((()=>i))}function dv(n,...e){n=on(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ww(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ww(e[i])){const m=e[i];e[i]=m.next?.bind(m),e[i+1]=m.error?.bind(m),e[i+2]=m.complete?.bind(m)}let l,c,h;if(n instanceof Jt)c=_r(n.firestore,Us),h=lm(n._key.path),l={next:m=>{e[i]&&e[i](K1(c,n,m))},error:e[i+1],complete:e[i+2]};else{const m=_r(n,Fs);c=_r(m.firestore,Us),h=m._query;const p=new cv(c);l={next:y=>{e[i]&&e[i](new Do(c,p,m,y))},error:e[i+1],complete:e[i+2]},H1(n._query)}return(function(p,y,T,b){const A=new ev(b),D=new Z_(y,A,T);return p.asyncQueue.enqueueAndForget((async()=>Y_(await xd(p),D))),()=>{A.Nu(),p.asyncQueue.enqueueAndForget((async()=>Q_(await xd(p),D)))}})(_m(c),h,a,l)}function Rm(n,e){return(function(i,a){const l=new Os;return i.asyncQueue.enqueueAndForget((async()=>t4(await h4(i),a,l))),l.promise})(_m(n),e)}function K1(n,e,t){const i=t.docs.get(e._key),a=new cv(n);return new xo(n,a,e._key,i,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}function Qo(){return new nv("serverTimestamp")}(function(e,t=!0){(function(a){hu=a})($o),Po(new Pa("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Us(new EP(i.getProvider("auth-internal")),new wP(c,i.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(p.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),$i(nw,rw,e),$i(nw,rw,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="firebasestorage.googleapis.com",N4="storageBucket",x4=120*1e3,D4=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Si{constructor(e,t,i=0){super(ry(e),`Firebase Storage: ${t} (${ry(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ry(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function ry(n){return"storage/"+n}function O4(){const n="An unknown error occurred, please check the error payload for server response.";return new ns(ts.UNKNOWN,n)}function k4(){return new ns(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M4(){return new ns(ts.CANCELED,"User canceled the upload/download.")}function P4(n){return new ns(ts.INVALID_URL,"Invalid URL '"+n+"'.")}function V4(n){return new ns(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nS(n){return new ns(ts.INVALID_ARGUMENT,n)}function Q1(){return new ns(ts.APP_DELETED,"The Firebase app was deleted.")}function L4(n){return new ns(ts.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=vi.makeFromUrl(e,t)}catch{return new vi(e,"")}if(i.path==="")return i;throw V4(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function p(ne){ne.path_=decodeURIComponent(ne.path)}const y="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",A=new RegExp(`^https?://${T}/${y}/b/${a}/o${b}`,"i"),D={bucket:1,path:3},V=t===Y1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",U=new RegExp(`^https?://${V}/${a}/${z}`,"i"),H=[{regex:h,indices:m,postModify:l},{regex:A,indices:D,postModify:p},{regex:U,indices:{bucket:1,path:2},postModify:p}];for(let ne=0;ne<H.length;ne++){const K=H[ne],M=K.regex.exec(e);if(M){const C=M[K.indices.bucket];let R=M[K.indices.path];R||(R=""),i=new vi(C,R),K.postModify(i);break}}if(i==null)throw P4(e);return i}}class U4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n,e,t){let i=1,a=null,l=null,c=!1,h=0;function m(){return h===2}let p=!1;function y(...z){p||(p=!0,e.apply(null,z))}function T(z){a=setTimeout(()=>{a=null,n(A,m())},z)}function b(){l&&clearTimeout(l)}function A(z,...U){if(p){b();return}if(z){b(),y.call(null,z,...U);return}if(m()||c){b(),y.call(null,z,...U);return}i<64&&(i*=2);let H;h===1?(h=2,H=0):H=(i+Math.random())*1e3,T(H)}let D=!1;function V(z){D||(D=!0,b(),!p&&(a!==null?(z||(h=2),clearTimeout(a),T(0)):z||(h=1)))}return T(0),l=setTimeout(()=>{c=!0,V(!0)},t),V}function z4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(n){return n!==void 0}function rS(n,e,t,i){if(i<e)throw nS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw nS(`Invalid value for '${n}'. Expected ${t} or less.`)}function F4(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var kd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(kd||(kd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,t,i,a,l,c,h,m,p,y,T,b=!0,A=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=T,this.retry=b,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,V)=>{this.resolve_=D,this.reject_=V,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new qh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=h=>{const m=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const h=l.getErrorCode()===kd.NO_ERROR,m=l.getStatus();if(!h||q4(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===kd.ABORT;i(!1,new qh(!1,null,y));return}const p=this.successCodes_.indexOf(m)!==-1;i(!0,new qh(p,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());B4(m)?l(m):l()}catch(m){c(m)}else if(h!==null){const m=O4();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(a.canceled){const m=this.appDelete_?Q1():M4();c(m)}else{const m=k4();c(m)}};this.canceled_?t(!1,new qh(!1,null,!0)):this.backoffId_=j4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&z4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function G4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function $4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function K4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Y4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Q4(n,e,t,i,a,l,c=!0,h=!1){const m=F4(n.urlParams),p=n.url+m,y=Object.assign({},n.headers);return K4(y,e),G4(y,t),$4(y,l),Y4(y,i),new H4(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Z4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this._service=e,t instanceof vi?this._location=t:this._location=vi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Md(e,t)}get root(){const e=new vi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z4(this._location.path)}get storage(){return this._service}get parent(){const e=X4(this._location.path);if(e===null)return null;const t=new vi(this._location.bucket,e);return new Md(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw L4(e)}}function iS(n,e){const t=e?.[N4];return t==null?null:vi.makeFromBucketSpec(t,n)}function W4(n,e,t,i={}){n.host=`${e}:${t}`;const a=Go(e);a&&(f_(`https://${n.host}/b`),h_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:kA(l,n.app.options.projectId))}class J4{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=Y1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x4,this._maxUploadRetryTime=D4,this._requests=new Set,a!=null?this._bucket=vi.makeFromBucketSpec(a,this._host):this._bucket=iS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vi.makeFromBucketSpec(this._url,e):this._bucket=iS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Md(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new U4(Q1());{const c=Q4(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const sS="@firebase/storage",aS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="storage";function eU(n=p_(),e){n=on(n);const i=em(n,X1).getImmediate({identifier:e}),a=xA("storage");return a&&tU(i,...a),i}function tU(n,e,t,i={}){W4(n,e,t,i)}function nU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new J4(t,i,a,e,$o)}function rU(){Po(new Pa(X1,nU,"PUBLIC").setMultipleInstances(!0)),$i(sS,aS,""),$i(sS,aS,"esm2020")}rU();const iU={BASE_URL:"/marker_Map/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCOmZy57Cfn_3_e9k2cuibulAt8YEStg9k",VITE_FIREBASE_APP_ID:"1:124096398918:web:09625db777361e1f1fec47",VITE_FIREBASE_AUTH_DOMAIN:"markermap-a404e.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-K111KCDY0L",VITE_FIREBASE_MESSAGING_SENDER_ID:"124096398918",VITE_FIREBASE_PROJECT_ID:"markermap-a404e",VITE_FIREBASE_STORAGE_BUCKET:"markermap-a404e.appspot.com",VITE_YANDEX_MAPS_KEY:"4213f0d0-4c3e-472c-bca6-8f1530505928"};function Pl(n){const e=iU[n];if(!e)throw console.error(`[Firebase] Missing ${n} in .env.local`),new Error(`Missing env ${n}`);return e}const sU={apiKey:Pl("VITE_FIREBASE_API_KEY"),authDomain:Pl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Pl("VITE_FIREBASE_PROJECT_ID"),storageBucket:Pl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Pl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Pl("VITE_FIREBASE_APP_ID")},mv=O0().length?O0()[0]:VA(sU),Wi=mP(mv);new qi;const bn=g4(mv);eU(mv);function aU(n){return{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,emailVerified:n.emailVerified}}function Z1(n){return nM(Wi,e=>n(e?aU(e):null))}async function oU(){await rM(Wi)}function W1(){const n=Jy();return k.useEffect(()=>Z1(async t=>{if(!t){n(pO());return}if(!t.displayName&&Wi.currentUser){try{await Wi.currentUser.reload()}catch{}const i=Wi.currentUser;n(Hl({uid:i?.uid??t.uid,displayName:i?.displayName??null,email:i?.email??t.email??null,photoURL:i?.photoURL??null}));return}n(Hl(t))}),[n]),null}const J1="/marker_Map/assets/profile-Bdck8NFL.png";function lU(){const n=Or(a=>a.user.current),e=Or(a=>a.user.loading),t=wi(),i=a=>t.pathname===a?"is-active":"";return N.jsxs("div",{className:"app",children:[N.jsx(W1,{}),N.jsx("header",{className:"site-header",children:N.jsxs("div",{className:"site-header__inner",children:[N.jsx(Ns,{to:"/",className:"brand",children:N.jsx("span",{className:"brand__text",children:"markerMap"})}),N.jsxs("nav",{className:"nav",children:[N.jsx(dy,{className:`nav__link ${i("/")}`,to:"/",children:"Главная"}),N.jsx(dy,{className:`nav__link ${i("/create")}`,to:"/create",children:"Создать маршрут"})]}),N.jsx("div",{className:"userbox",children:e?N.jsx("div",{className:"spinner","aria-label":"Загрузка…"}):n?N.jsxs(Ns,{to:"/profile",className:"userbox__me",children:[N.jsx("img",{src:J1,alt:"avatar",className:"userbox__avatar"}),N.jsx("span",{className:"userbox__name",children:n.displayName??"Профиль"})]}):N.jsx(Ns,{to:"/auth",className:"btn btn-primary",children:"Войти / Регистрация"})})]})}),N.jsx("main",{className:"site-main",children:N.jsx(Yx,{})}),N.jsx("footer",{className:"site-footer",children:N.jsxs("small",{children:["© ",new Date().getFullYear()," markerMap"]})})]})}const zo="routes";function Pd(n){const e=n.data(),t=e.visibility==="public"||e.visibility==="unlisted"?e.visibility:e.isPublic?"public":"unlisted",i={};return typeof e.ownerDisplayName=="string"&&e.ownerDisplayName.trim()&&(i.ownerDisplayName=String(e.ownerDisplayName)),{id:n.id,title:String(e.title),city:String(e.city),days:Number(e.days),isPublic:!!e.isPublic,visibility:t,coverPhotoUrl:e.coverPhotoUrl?String(e.coverPhotoUrl):void 0,likesCount:Number(e.likesCount??0),ownerId:String(e.ownerId),createdAt:e.createdAt,updatedAt:e.updatedAt,...i}}function eC(n){return n instanceof Si&&n.code==="failed-precondition"&&/index/i.test(n.message)}async function uU(n){const e=Qo(),t=Wi.currentUser,i=t?.displayName&&t.displayName.trim()||(t?.email?t.email.split("@")[0]:"")||"Пользователь",a={title:n.title,city:n.city,days:n.days,visibility:n.visibility,isPublic:n.visibility==="public",ownerId:n.ownerId,ownerDisplayName:i,likesCount:0,commentsCount:0,favoritesCount:0,createdAt:e,updatedAt:e};return n.coverPhotoUrl&&(a.coverPhotoUrl=n.coverPhotoUrl),(await hv(ni(bn,zo),a)).id}async function oS(n){const e=ni(bn,"users",n,"favorites"),t=await js(e),i=new Set;return t.forEach(a=>i.add(a.id)),i}async function cU(n={}){const{city:e,sortBy:t="new",currentUserId:i,limit:a=20}=n,l=[Od("isPublic","==",!0)];e&&e.trim()&&l.push(Od("city","==",e.trim()));const c=t==="favorites"?Math.max(a*2,60):a;try{const h=ru(ni(bn,zo),...l,Am("createdAt","desc"),Jw(c)),p=(await js(h)).docs.map(Pd);if(t!=="favorites"||!i)return p.slice(0,a);const y=await oS(i);if(y.size===0)return p.slice(0,a);const T=[],b=[];for(const A of p)(y.has(A.id)?T:b).push(A);return[...T,...b].slice(0,a)}catch(h){if(!eC(h))throw h;const m=ru(ni(bn,zo),...l,Jw(200)),y=(await js(m)).docs.map(Pd);if(y.sort((D,V)=>V.createdAt.toMillis()-D.createdAt.toMillis()),t!=="favorites"||!i)return y.slice(0,a);const T=await oS(i);if(T.size===0)return y.slice(0,a);const b=[],A=[];for(const D of y)(T.has(D.id)?b:A).push(D);return[...b,...A].slice(0,a)}}async function fU(n){const e=ii(bn,zo,n),t=await Qa(e);if(!t.exists())return null;const i=t.data(),a=i.visibility==="public"||i.visibility==="unlisted"?i.visibility:i.isPublic?"public":"unlisted";return{id:t.id,title:String(i.title),city:String(i.city),days:Number(i.days),isPublic:!!i.isPublic,visibility:a,coverPhotoUrl:i.coverPhotoUrl?String(i.coverPhotoUrl):void 0,likesCount:Number(i.likesCount??0),ownerId:String(i.ownerId),createdAt:i.createdAt,updatedAt:i.updatedAt}}async function tC(n){await yu(ii(bn,zo,n))}async function hU(n){try{const e=ru(ni(bn,zo),Od("ownerId","==",n),Am("createdAt","desc"));return(await js(e)).docs.map(Pd)}catch(e){if(!eC(e))throw e;const t=ru(ni(bn,zo),Od("ownerId","==",n));return(await js(t)).docs.map(Pd).sort((a,l)=>l.createdAt.toMillis()-a.createdAt.toMillis())}}const Cm=n=>ni(bn,"routes",n,"likes");async function dU(n){return(await js(Cm(n))).size}function mU(n,e){return dv(Cm(n),t=>e(t.size))}async function pU(n,e){return(await Qa(ii(Cm(n),e))).exists()}async function gU(n,e){const t=ii(Cm(n),e);(await Qa(t)).exists()?await yu(t):await fv(t,{createdAt:Qo()})}const Im=(n,e)=>ni(bn,"routes",n,"comments",e,"likes");async function yU(n,e){return(await js(Im(n,e))).size}function _U(n,e,t){return dv(Im(n,e),i=>t(i.size))}async function vU(n,e,t){return(await Qa(ii(Im(n,e),t))).exists()}async function EU(n,e,t){const i=ii(Im(n,e),t);(await Qa(i)).exists()?await yu(i):await fv(i,{createdAt:Qo()})}const nC="/marker_Map/assets/notLiked-iiGSBy3W.png",rC="/marker_Map/assets/liked-CQs3aYNM.png";function iC({routeId:n}){const e=Or(p=>p.user.current),[t,i]=k.useState(0),[a,l]=k.useState(!1),[c,h]=k.useState(!1);k.useEffect(()=>{let p=null;return(async()=>{try{const y=await dU(n);i(y)}catch(y){console.error("[LikeButton] fetchRouteLikesCount failed:",y),i(0)}if(e?.uid)try{const y=await pU(n,e.uid);l(y)}catch(y){console.error("[LikeButton] isRouteLiked failed:",y),l(!1)}else l(!1);p=mU(n,y=>i(y))})(),()=>p?.()},[n,e?.uid]);async function m(){if(!e?.uid||c)return;h(!0);const p=a;l(!p),i(y=>Math.max(0,y+(p?-1:1)));try{await gU(n,e.uid)}catch(y){console.error("[LikeButton] toggleRouteLike failed:",y),l(p),i(T=>Math.max(0,T+(p?1:-1)))}finally{h(!1)}}return N.jsxs("button",{type:"button",className:`icon-btn like-btn${a?" is-active":""}`,onClick:m,"aria-label":a?"Убрать лайк":"Поставить лайк",title:a?"Убрать лайк":"Поставить лайк",disabled:!e||c,children:[N.jsx("img",{src:a?rC:nC,alt:"",className:"icon-img",draggable:!1}),N.jsx("span",{className:"like-count","aria-label":`Лайков: ${t}`,children:t})]})}const TU="users",bU="favorites";function pv(n,e){return ii(bn,TU,n,bU,e)}async function wU(n,e){return(await Qa(pv(n,e))).exists()}function SU(n,e,t){return dv(pv(n,e),i=>t(i.exists()))}async function AU(n,e){const t=pv(n,e);(await Qa(t)).exists()?await yu(t):await fv(t,{createdAt:Qo()})}const RU="/marker_Map/assets/notFavorite-C1GG1fQ2.png",CU="/marker_Map/assets/favorite-Vn1yFTFE.png";function sC({routeId:n}){const e=Or(h=>h.user.current),[t,i]=k.useState(!1),[a,l]=k.useState(!1);k.useEffect(()=>{let h=null;return(async()=>{if(!e?.uid){i(!1);return}try{i(await wU(e.uid,n))}catch(m){console.error("[Favorite] isFavorite failed:",m)}h=SU(e.uid,n,i)})(),()=>h?.()},[n,e?.uid]);async function c(){if(!e?.uid||a)return;l(!0);const h=t;i(!h);try{await AU(e.uid,n)}catch(m){console.error("[Favorite] toggle failed:",m),i(h)}finally{l(!1)}}return N.jsx("button",{type:"button",className:`icon-btn fav-btn${t?" is-active":""}`,onClick:c,title:t?"Убрать из избранного":"В избранное","aria-label":t?"Убрать из избранного":"Добавить в избранное",disabled:!e||a,children:N.jsx("img",{src:t?CU:RU,alt:"",className:"icon-img",draggable:!1})})}function IU(n,e=400){const[t,i]=k.useState(n);return k.useEffect(()=>{const a=window.setTimeout(()=>i(n),e);return()=>window.clearTimeout(a)},[n,e]),t}function NU(n){return typeof n=="object"&&n!==null&&"toDate"in n}function xU(n){return n>=1&&n<=3?`${n} дня`:`${n} дней`}function DU(){const n=Or(V=>V.user.current),[e,t]=k.useState([]),[i,a]=k.useState(""),[l,c]=k.useState("new"),[h,m]=k.useState(!1),[p,y]=k.useState(null),[T,b]=k.useState({}),A=IU(i.trim()),D=k.useCallback(async()=>{m(!0),y(null);try{const V=await cU({city:A||void 0,sortBy:l,currentUserId:n?.uid,limit:30});t(V)}catch(V){const z=V instanceof Error?V.message:String(V);y(z),t([]),console.error("[Home] listPublicRoutes failed:",V)}finally{m(!1)}},[A,l,n?.uid]);return k.useEffect(()=>{D()},[D]),k.useEffect(()=>{if(e.length===0)return;const z=Array.from(new Set(e.map(U=>U.ownerId))).filter(U=>!T[U]);z.length!==0&&(async()=>{const U={};await Promise.all(z.map(async Z=>{try{const H=await Qa(ii(bn,"users",Z));if(H.exists()){const ne=H.data();let K="";typeof ne.displayName=="string"&&ne.displayName.trim()?K=ne.displayName.trim():typeof ne.name=="string"&&ne.name.trim()?K=ne.name.trim():typeof ne.email=="string"&&(K=ne.email.split("@")[0]),U[Z]=K||"Пользователь"}else U[Z]="Пользователь"}catch{U[Z]="Пользователь"}})),Object.keys(U).length&&b(Z=>({...Z,...U}))})()},[e,T]),N.jsxs("div",{className:"home-wrap",children:[N.jsx("h1",{className:"home-title",children:"Главная"}),N.jsxs("div",{className:"home-toolbar",children:[N.jsx("input",{className:"home-input",placeholder:"Поиск по городу",value:i,onChange:V=>a(V.target.value)}),N.jsxs("select",{className:"home-input home-select",value:l,onChange:V=>c(V.target.value),children:[N.jsx("option",{value:"new",children:"Новые"}),N.jsx("option",{value:"favorites",children:"Избранные"})]})]}),h&&N.jsx("p",{className:"home-note",children:"Загрузка…"}),!h&&p&&N.jsxs("p",{className:"home-err",children:["Ошибка: ",p]}),!h&&!p&&e.length===0&&N.jsx("p",{className:"home-note",children:"Маршруты ещё не добавлены."}),!h&&!p&&e.length>0&&N.jsx("ul",{className:"home-grid",children:e.map(V=>{const z=NU(V.createdAt)?V.createdAt.toDate():void 0,U=z?z.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"—",Z=V.ownerDisplayName||T[V.ownerId]||"Пользователь";return N.jsxs("li",{className:"card",children:[V.coverPhotoUrl&&N.jsx(Ns,{to:`/route/${V.id}`,className:"card-cover-link","aria-label":V.title,children:N.jsx("img",{className:"card-cover",src:V.coverPhotoUrl,alt:V.title})}),N.jsxs("div",{className:"card-body",children:[N.jsx(Ns,{to:`/route/${V.id}`,className:"card-title",children:V.title}),N.jsxs("div",{className:"card-line muted",children:["Автор: ",Z]}),N.jsxs("div",{className:"card-line",children:[V.city||"—"," ",N.jsx("span",{className:"meta-dot",children:"•"})," ",xU(V.days)]}),N.jsx("div",{className:"card-line muted",children:U}),N.jsxs("div",{className:"card-actions",children:[N.jsx(iC,{routeId:V.id}),N.jsx(sC,{routeId:V.id})]})]})]},V.id)})})]})}var yf=n=>n.type==="checkbox",No=n=>n instanceof Date,ir=n=>n==null;const aC=n=>typeof n=="object";var an=n=>!ir(n)&&!Array.isArray(n)&&aC(n)&&!No(n),OU=n=>an(n)&&n.target?yf(n.target)?n.target.checked:n.target.value:n,kU=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,MU=(n,e)=>n.has(kU(e)),PU=n=>{const e=n.constructor&&n.constructor.prototype;return an(e)&&e.hasOwnProperty("isPrototypeOf")},gv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dn(n){let e;const t=Array.isArray(n),i=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(gv&&(n instanceof Blob||i))&&(t||an(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!PU(n))e=n;else for(const a in n)n.hasOwnProperty(a)&&(e[a]=Dn(n[a]));else return n;return e}var Nm=n=>/^\w*$/.test(n),mn=n=>n===void 0,yv=n=>Array.isArray(n)?n.filter(Boolean):[],_v=n=>yv(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Oe=(n,e,t)=>{if(!e||!an(n))return t;const i=(Nm(e)?[e]:_v(e)).reduce((a,l)=>ir(a)?a:a[l],n);return mn(i)||i===n?mn(n[e])?t:n[e]:i},Fi=n=>typeof n=="boolean",Bt=(n,e,t)=>{let i=-1;const a=Nm(e)?[e]:_v(e),l=a.length,c=l-1;for(;++i<l;){const h=a[i];let m=t;if(i!==c){const p=n[h];m=an(p)||Array.isArray(p)?p:isNaN(+a[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;n[h]=m,n=n[h]}};const lS={BLUR:"blur",FOCUS_OUT:"focusout"},gi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},As={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},VU=hr.createContext(null);VU.displayName="HookFormContext";var LU=(n,e,t,i=!0)=>{const a={defaultValues:e._defaultValues};for(const l in n)Object.defineProperty(a,l,{get:()=>{const c=l;return e._proxyFormState[c]!==gi.all&&(e._proxyFormState[c]=!i||gi.all),n[c]}});return a};const UU=typeof window<"u"?hr.useLayoutEffect:hr.useEffect;var Hi=n=>typeof n=="string",jU=(n,e,t,i,a)=>Hi(n)?(i&&e.watch.add(n),Oe(t,n,a)):Array.isArray(n)?n.map(l=>(i&&e.watch.add(l),Oe(t,l))):(i&&(e.watchAll=!0),t),$y=n=>ir(n)||!aC(n);function Ra(n,e,t=new WeakSet){if($y(n)||$y(e))return n===e;if(No(n)&&No(e))return n.getTime()===e.getTime();const i=Object.keys(n),a=Object.keys(e);if(i.length!==a.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const l of i){const c=n[l];if(!a.includes(l))return!1;if(l!=="ref"){const h=e[l];if(No(c)&&No(h)||an(c)&&an(h)||Array.isArray(c)&&Array.isArray(h)?!Ra(c,h,t):c!==h)return!1}}return!0}var oC=(n,e,t,i,a)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[i]:a||!0}}:{},Lc=n=>Array.isArray(n)?n:[n],uS=()=>{let n=[];return{get observers(){return n},next:a=>{for(const l of n)l.next&&l.next(a)},subscribe:a=>(n.push(a),{unsubscribe:()=>{n=n.filter(l=>l!==a)}}),unsubscribe:()=>{n=[]}}},dr=n=>an(n)&&!Object.keys(n).length,vv=n=>n.type==="file",yi=n=>typeof n=="function",Vd=n=>{if(!gv)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},lC=n=>n.type==="select-multiple",Ev=n=>n.type==="radio",zU=n=>Ev(n)||yf(n),iy=n=>Vd(n)&&n.isConnected;function BU(n,e){const t=e.slice(0,-1).length;let i=0;for(;i<t;)n=mn(n)?i++:n[e[i++]];return n}function FU(n){for(const e in n)if(n.hasOwnProperty(e)&&!mn(n[e]))return!1;return!0}function fn(n,e){const t=Array.isArray(e)?e:Nm(e)?[e]:_v(e),i=t.length===1?n:BU(n,t),a=t.length-1,l=t[a];return i&&delete i[l],a!==0&&(an(i)&&dr(i)||Array.isArray(i)&&FU(i))&&fn(n,t.slice(0,-1)),n}var uC=n=>{for(const e in n)if(yi(n[e]))return!0;return!1};function Ld(n,e={}){const t=Array.isArray(n);if(an(n)||t)for(const i in n)Array.isArray(n[i])||an(n[i])&&!uC(n[i])?(e[i]=Array.isArray(n[i])?[]:{},Ld(n[i],e[i])):ir(n[i])||(e[i]=!0);return e}function cC(n,e,t){const i=Array.isArray(n);if(an(n)||i)for(const a in n)Array.isArray(n[a])||an(n[a])&&!uC(n[a])?mn(e)||$y(t[a])?t[a]=Array.isArray(n[a])?Ld(n[a],[]):{...Ld(n[a])}:cC(n[a],ir(e)?{}:e[a],t[a]):t[a]=!Ra(n[a],e[a]);return t}var Ec=(n,e)=>cC(n,e,Ld(e));const cS={value:!1,isValid:!1},fS={value:!0,isValid:!0};var fC=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!mn(n[0].attributes.value)?mn(n[0].value)||n[0].value===""?fS:{value:n[0].value,isValid:!0}:fS:cS}return cS},hC=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:i})=>mn(n)?n:e?n===""?NaN:n&&+n:t&&Hi(n)?new Date(n):i?i(n):n;const hS={isValid:!1,value:null};var dC=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,hS):hS;function dS(n){const e=n.ref;return vv(e)?e.files:Ev(e)?dC(n.refs).value:lC(e)?[...e.selectedOptions].map(({value:t})=>t):yf(e)?fC(n.refs).value:hC(mn(e.value)?n.ref.value:e.value,n)}var qU=(n,e,t,i)=>{const a={};for(const l of n){const c=Oe(e,l);c&&Bt(a,l,c._f)}return{criteriaMode:t,names:[...n],fields:a,shouldUseNativeValidation:i}},Ud=n=>n instanceof RegExp,Tc=n=>mn(n)?n:Ud(n)?n.source:an(n)?Ud(n.value)?n.value.source:n.value:n,mS=n=>({isOnSubmit:!n||n===gi.onSubmit,isOnBlur:n===gi.onBlur,isOnChange:n===gi.onChange,isOnAll:n===gi.all,isOnTouch:n===gi.onTouched});const pS="AsyncFunction";var HU=n=>!!n&&!!n.validate&&!!(yi(n.validate)&&n.validate.constructor.name===pS||an(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===pS)),GU=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),gS=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(i=>n.startsWith(i)&&/^\.\w+/.test(n.slice(i.length))));const Uc=(n,e,t,i)=>{for(const a of t||Object.keys(n)){const l=Oe(n,a);if(l){const{_f:c,...h}=l;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],a)&&!i)return!0;if(c.ref&&e(c.ref,c.name)&&!i)return!0;if(Uc(h,e))break}else if(an(h)&&Uc(h,e))break}}};function yS(n,e,t){const i=Oe(n,t);if(i||Nm(t))return{error:i,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),c=Oe(e,l),h=Oe(n,l);if(c&&!Array.isArray(c)&&t!==l)return{name:t};if(h&&h.type)return{name:l,error:h};if(h&&h.root&&h.root.type)return{name:`${l}.root`,error:h.root};a.pop()}return{name:t}}var $U=(n,e,t,i)=>{t(n);const{name:a,...l}=n;return dr(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(c=>e[c]===(!i||gi.all))},KU=(n,e,t)=>!n||!e||n===e||Lc(n).some(i=>i&&(t?i===e:i.startsWith(e)||e.startsWith(i))),YU=(n,e,t,i,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||n):(t?i.isOnBlur:a.isOnBlur)?!n:(t?i.isOnChange:a.isOnChange)?n:!0,QU=(n,e)=>!yv(Oe(n,e)).length&&fn(n,e),XU=(n,e,t)=>{const i=Lc(Oe(n,t));return Bt(i,"root",e[t]),Bt(n,t,i),n},id=n=>Hi(n);function _S(n,e,t="validate"){if(id(n)||Array.isArray(n)&&n.every(id)||Fi(n)&&!n)return{type:t,message:id(n)?n:"",ref:e}}var Vl=n=>an(n)&&!Ud(n)?n:{value:n,message:""},vS=async(n,e,t,i,a,l)=>{const{ref:c,refs:h,required:m,maxLength:p,minLength:y,min:T,max:b,pattern:A,validate:D,name:V,valueAsNumber:z,mount:U}=n._f,Z=Oe(t,V);if(!U||e.has(V))return{};const H=h?h[0]:c,ne=P=>{a&&H.reportValidity&&(H.setCustomValidity(Fi(P)?"":P||""),H.reportValidity())},K={},M=Ev(c),C=yf(c),R=M||C,x=(z||vv(c))&&mn(c.value)&&mn(Z)||Vd(c)&&c.value===""||Z===""||Array.isArray(Z)&&!Z.length,B=oC.bind(null,V,i,K),L=(P,I,xe,Fe=As.maxLength,Q=As.minLength)=>{const pe=P?I:xe;K[V]={type:P?Fe:Q,message:pe,ref:c,...B(P?Fe:Q,pe)}};if(l?!Array.isArray(Z)||!Z.length:m&&(!R&&(x||ir(Z))||Fi(Z)&&!Z||C&&!fC(h).isValid||M&&!dC(h).isValid)){const{value:P,message:I}=id(m)?{value:!!m,message:m}:Vl(m);if(P&&(K[V]={type:As.required,message:I,ref:H,...B(As.required,I)},!i))return ne(I),K}if(!x&&(!ir(T)||!ir(b))){let P,I;const xe=Vl(b),Fe=Vl(T);if(!ir(Z)&&!isNaN(Z)){const Q=c.valueAsNumber||Z&&+Z;ir(xe.value)||(P=Q>xe.value),ir(Fe.value)||(I=Q<Fe.value)}else{const Q=c.valueAsDate||new Date(Z),pe=j=>new Date(new Date().toDateString()+" "+j),Se=c.type=="time",Ke=c.type=="week";Hi(xe.value)&&Z&&(P=Se?pe(Z)>pe(xe.value):Ke?Z>xe.value:Q>new Date(xe.value)),Hi(Fe.value)&&Z&&(I=Se?pe(Z)<pe(Fe.value):Ke?Z<Fe.value:Q<new Date(Fe.value))}if((P||I)&&(L(!!P,xe.message,Fe.message,As.max,As.min),!i))return ne(K[V].message),K}if((p||y)&&!x&&(Hi(Z)||l&&Array.isArray(Z))){const P=Vl(p),I=Vl(y),xe=!ir(P.value)&&Z.length>+P.value,Fe=!ir(I.value)&&Z.length<+I.value;if((xe||Fe)&&(L(xe,P.message,I.message),!i))return ne(K[V].message),K}if(A&&!x&&Hi(Z)){const{value:P,message:I}=Vl(A);if(Ud(P)&&!Z.match(P)&&(K[V]={type:As.pattern,message:I,ref:c,...B(As.pattern,I)},!i))return ne(I),K}if(D){if(yi(D)){const P=await D(Z,t),I=_S(P,H);if(I&&(K[V]={...I,...B(As.validate,I.message)},!i))return ne(I.message),K}else if(an(D)){let P={};for(const I in D){if(!dr(P)&&!i)break;const xe=_S(await D[I](Z,t),H,I);xe&&(P={...xe,...B(I,xe.message)},ne(xe.message),i&&(K[V]=P))}if(!dr(P)&&(K[V]={ref:H,...P},!i))return K}}return ne(!0),K};const ZU={mode:gi.onSubmit,reValidateMode:gi.onChange,shouldFocusError:!0};function WU(n={}){let e={...ZU,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:yi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},a=an(e.defaultValues)||an(e.values)?Dn(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:Dn(a),c={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,p=0;const y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let T={...y};const b={array:uS(),state:uS()},A=e.criteriaMode===gi.all,D=q=>J=>{clearTimeout(p),p=setTimeout(q,J)},V=async q=>{if(!e.disabled&&(y.isValid||T.isValid||q)){const J=e.resolver?dr((await C()).errors):await x(i,!0);J!==t.isValid&&b.state.next({isValid:J})}},z=(q,J)=>{!e.disabled&&(y.isValidating||y.validatingFields||T.isValidating||T.validatingFields)&&((q||Array.from(h.mount)).forEach(ae=>{ae&&(J?Bt(t.validatingFields,ae,J):fn(t.validatingFields,ae))}),b.state.next({validatingFields:t.validatingFields,isValidating:!dr(t.validatingFields)}))},U=(q,J=[],ae,we,Te=!0,ye=!0)=>{if(we&&ae&&!e.disabled){if(c.action=!0,ye&&Array.isArray(Oe(i,q))){const Ee=ae(Oe(i,q),we.argA,we.argB);Te&&Bt(i,q,Ee)}if(ye&&Array.isArray(Oe(t.errors,q))){const Ee=ae(Oe(t.errors,q),we.argA,we.argB);Te&&Bt(t.errors,q,Ee),QU(t.errors,q)}if((y.touchedFields||T.touchedFields)&&ye&&Array.isArray(Oe(t.touchedFields,q))){const Ee=ae(Oe(t.touchedFields,q),we.argA,we.argB);Te&&Bt(t.touchedFields,q,Ee)}(y.dirtyFields||T.dirtyFields)&&(t.dirtyFields=Ec(a,l)),b.state.next({name:q,isDirty:L(q,J),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Bt(l,q,J)},Z=(q,J)=>{Bt(t.errors,q,J),b.state.next({errors:t.errors})},H=q=>{t.errors=q,b.state.next({errors:t.errors,isValid:!1})},ne=(q,J,ae,we)=>{const Te=Oe(i,q);if(Te){const ye=Oe(l,q,mn(ae)?Oe(a,q):ae);mn(ye)||we&&we.defaultChecked||J?Bt(l,q,J?ye:dS(Te._f)):xe(q,ye),c.mount&&V()}},K=(q,J,ae,we,Te)=>{let ye=!1,Ee=!1;const Ce={name:q};if(!e.disabled){if(!ae||we){(y.isDirty||T.isDirty)&&(Ee=t.isDirty,t.isDirty=Ce.isDirty=L(),ye=Ee!==Ce.isDirty);const st=Ra(Oe(a,q),J);Ee=!!Oe(t.dirtyFields,q),st?fn(t.dirtyFields,q):Bt(t.dirtyFields,q,!0),Ce.dirtyFields=t.dirtyFields,ye=ye||(y.dirtyFields||T.dirtyFields)&&Ee!==!st}if(ae){const st=Oe(t.touchedFields,q);st||(Bt(t.touchedFields,q,ae),Ce.touchedFields=t.touchedFields,ye=ye||(y.touchedFields||T.touchedFields)&&st!==ae)}ye&&Te&&b.state.next(Ce)}return ye?Ce:{}},M=(q,J,ae,we)=>{const Te=Oe(t.errors,q),ye=(y.isValid||T.isValid)&&Fi(J)&&t.isValid!==J;if(e.delayError&&ae?(m=D(()=>Z(q,ae)),m(e.delayError)):(clearTimeout(p),m=null,ae?Bt(t.errors,q,ae):fn(t.errors,q)),(ae?!Ra(Te,ae):Te)||!dr(we)||ye){const Ee={...we,...ye&&Fi(J)?{isValid:J}:{},errors:t.errors,name:q};t={...t,...Ee},b.state.next(Ee)}},C=async q=>{z(q,!0);const J=await e.resolver(l,e.context,qU(q||h.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return z(q),J},R=async q=>{const{errors:J}=await C(q);if(q)for(const ae of q){const we=Oe(J,ae);we?Bt(t.errors,ae,we):fn(t.errors,ae)}else t.errors=J;return J},x=async(q,J,ae={valid:!0})=>{for(const we in q){const Te=q[we];if(Te){const{_f:ye,...Ee}=Te;if(ye){const Ce=h.array.has(ye.name),st=Te._f&&HU(Te._f);st&&y.validatingFields&&z([we],!0);const Tt=await vS(Te,h.disabled,l,A,e.shouldUseNativeValidation&&!J,Ce);if(st&&y.validatingFields&&z([we]),Tt[ye.name]&&(ae.valid=!1,J))break;!J&&(Oe(Tt,ye.name)?Ce?XU(t.errors,Tt,ye.name):Bt(t.errors,ye.name,Tt[ye.name]):fn(t.errors,ye.name))}!dr(Ee)&&await x(Ee,J,ae)}}return ae.valid},B=()=>{for(const q of h.unMount){const J=Oe(i,q);J&&(J._f.refs?J._f.refs.every(ae=>!iy(ae)):!iy(J._f.ref))&&$t(q)}h.unMount=new Set},L=(q,J)=>!e.disabled&&(q&&J&&Bt(l,q,J),!Ra(j(),a)),P=(q,J,ae)=>jU(q,h,{...c.mount?l:mn(J)?a:Hi(q)?{[q]:J}:J},ae,J),I=q=>yv(Oe(c.mount?l:a,q,e.shouldUnregister?Oe(a,q,[]):[])),xe=(q,J,ae={})=>{const we=Oe(i,q);let Te=J;if(we){const ye=we._f;ye&&(!ye.disabled&&Bt(l,q,hC(J,ye)),Te=Vd(ye.ref)&&ir(J)?"":J,lC(ye.ref)?[...ye.ref.options].forEach(Ee=>Ee.selected=Te.includes(Ee.value)):ye.refs?yf(ye.ref)?ye.refs.forEach(Ee=>{(!Ee.defaultChecked||!Ee.disabled)&&(Array.isArray(Te)?Ee.checked=!!Te.find(Ce=>Ce===Ee.value):Ee.checked=Te===Ee.value||!!Te)}):ye.refs.forEach(Ee=>Ee.checked=Ee.value===Te):vv(ye.ref)?ye.ref.value="":(ye.ref.value=Te,ye.ref.type||b.state.next({name:q,values:Dn(l)})))}(ae.shouldDirty||ae.shouldTouch)&&K(q,Te,ae.shouldTouch,ae.shouldDirty,!0),ae.shouldValidate&&Ke(q)},Fe=(q,J,ae)=>{for(const we in J){if(!J.hasOwnProperty(we))return;const Te=J[we],ye=q+"."+we,Ee=Oe(i,ye);(h.array.has(q)||an(Te)||Ee&&!Ee._f)&&!No(Te)?Fe(ye,Te,ae):xe(ye,Te,ae)}},Q=(q,J,ae={})=>{const we=Oe(i,q),Te=h.array.has(q),ye=Dn(J);Bt(l,q,ye),Te?(b.array.next({name:q,values:Dn(l)}),(y.isDirty||y.dirtyFields||T.isDirty||T.dirtyFields)&&ae.shouldDirty&&b.state.next({name:q,dirtyFields:Ec(a,l),isDirty:L(q,ye)})):we&&!we._f&&!ir(ye)?Fe(q,ye,ae):xe(q,ye,ae),gS(q,h)&&b.state.next({...t,name:q}),b.state.next({name:c.mount?q:void 0,values:Dn(l)})},pe=async q=>{c.mount=!0;const J=q.target;let ae=J.name,we=!0;const Te=Oe(i,ae),ye=st=>{we=Number.isNaN(st)||No(st)&&isNaN(st.getTime())||Ra(st,Oe(l,ae,st))},Ee=mS(e.mode),Ce=mS(e.reValidateMode);if(Te){let st,Tt;const oi=J.type?dS(Te._f):OU(q),en=q.type===lS.BLUR||q.type===lS.FOCUS_OUT,Vr=!GU(Te._f)&&!e.resolver&&!Oe(t.errors,ae)&&!Te._f.deps||YU(en,Oe(t.touchedFields,ae),t.isSubmitted,Ce,Ee),sr=gS(ae,h,en);Bt(l,ae,oi),en?(!J||!J.readOnly)&&(Te._f.onBlur&&Te._f.onBlur(q),m&&m(0)):Te._f.onChange&&Te._f.onChange(q);const ar=K(ae,oi,en),Xn=!dr(ar)||sr;if(!en&&b.state.next({name:ae,type:q.type,values:Dn(l)}),Vr)return(y.isValid||T.isValid)&&(e.mode==="onBlur"?en&&V():en||V()),Xn&&b.state.next({name:ae,...sr?{}:ar});if(!en&&sr&&b.state.next({...t}),e.resolver){const{errors:Lr}=await C([ae]);if(ye(oi),we){const or=yS(t.errors,i,ae),li=yS(Lr,i,or.name||ae);st=li.error,ae=li.name,Tt=dr(Lr)}}else z([ae],!0),st=(await vS(Te,h.disabled,l,A,e.shouldUseNativeValidation))[ae],z([ae]),ye(oi),we&&(st?Tt=!1:(y.isValid||T.isValid)&&(Tt=await x(i,!0)));we&&(Te._f.deps&&Ke(Te._f.deps),M(ae,Tt,st,ar))}},Se=(q,J)=>{if(Oe(t.errors,J)&&q.focus)return q.focus(),1},Ke=async(q,J={})=>{let ae,we;const Te=Lc(q);if(e.resolver){const ye=await R(mn(q)?q:Te);ae=dr(ye),we=q?!Te.some(Ee=>Oe(ye,Ee)):ae}else q?(we=(await Promise.all(Te.map(async ye=>{const Ee=Oe(i,ye);return await x(Ee&&Ee._f?{[ye]:Ee}:Ee)}))).every(Boolean),!(!we&&!t.isValid)&&V()):we=ae=await x(i);return b.state.next({...!Hi(q)||(y.isValid||T.isValid)&&ae!==t.isValid?{}:{name:q},...e.resolver||!q?{isValid:ae}:{},errors:t.errors}),J.shouldFocus&&!we&&Uc(i,Se,q?Te:h.mount),we},j=q=>{const J={...c.mount?l:a};return mn(q)?J:Hi(q)?Oe(J,q):q.map(ae=>Oe(J,ae))},le=(q,J)=>({invalid:!!Oe((J||t).errors,q),isDirty:!!Oe((J||t).dirtyFields,q),error:Oe((J||t).errors,q),isValidating:!!Oe(t.validatingFields,q),isTouched:!!Oe((J||t).touchedFields,q)}),_e=q=>{q&&Lc(q).forEach(J=>fn(t.errors,J)),b.state.next({errors:q?t.errors:{}})},me=(q,J,ae)=>{const we=(Oe(i,q,{_f:{}})._f||{}).ref,Te=Oe(t.errors,q)||{},{ref:ye,message:Ee,type:Ce,...st}=Te;Bt(t.errors,q,{...st,...J,ref:we}),b.state.next({name:q,errors:t.errors,isValid:!1}),ae&&ae.shouldFocus&&we&&we.focus&&we.focus()},ke=(q,J)=>yi(q)?b.state.subscribe({next:ae=>"values"in ae&&q(P(void 0,J),ae)}):P(q,J,!0),Je=q=>b.state.subscribe({next:J=>{KU(q.name,J.name,q.exact)&&$U(J,q.formState||y,kn,q.reRenderRoot)&&q.callback({values:{...l},...t,...J,defaultValues:a})}}).unsubscribe,He=q=>(c.mount=!0,T={...T,...q.formState},Je({...q,formState:T})),$t=(q,J={})=>{for(const ae of q?Lc(q):h.mount)h.mount.delete(ae),h.array.delete(ae),J.keepValue||(fn(i,ae),fn(l,ae)),!J.keepError&&fn(t.errors,ae),!J.keepDirty&&fn(t.dirtyFields,ae),!J.keepTouched&&fn(t.touchedFields,ae),!J.keepIsValidating&&fn(t.validatingFields,ae),!e.shouldUnregister&&!J.keepDefaultValue&&fn(a,ae);b.state.next({values:Dn(l)}),b.state.next({...t,...J.keepDirty?{isDirty:L()}:{}}),!J.keepIsValid&&V()},Rt=({disabled:q,name:J})=>{(Fi(q)&&c.mount||q||h.disabled.has(J))&&(q?h.disabled.add(J):h.disabled.delete(J))},qn=(q,J={})=>{let ae=Oe(i,q);const we=Fi(J.disabled)||Fi(e.disabled);return Bt(i,q,{...ae||{},_f:{...ae&&ae._f?ae._f:{ref:{name:q}},name:q,mount:!0,...J}}),h.mount.add(q),ae?Rt({disabled:Fi(J.disabled)?J.disabled:e.disabled,name:q}):ne(q,!0,J.value),{...we?{disabled:J.disabled||e.disabled}:{},...e.progressive?{required:!!J.required,min:Tc(J.min),max:Tc(J.max),minLength:Tc(J.minLength),maxLength:Tc(J.maxLength),pattern:Tc(J.pattern)}:{},name:q,onChange:pe,onBlur:pe,ref:Te=>{if(Te){qn(q,J),ae=Oe(i,q);const ye=mn(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,Ee=zU(ye),Ce=ae._f.refs||[];if(Ee?Ce.find(st=>st===ye):ye===ae._f.ref)return;Bt(i,q,{_f:{...ae._f,...Ee?{refs:[...Ce.filter(iy),ye,...Array.isArray(Oe(a,q))?[{}]:[]],ref:{type:ye.type,name:q}}:{ref:ye}}}),ne(q,!1,void 0,ye)}else ae=Oe(i,q,{}),ae._f&&(ae._f.mount=!1),(e.shouldUnregister||J.shouldUnregister)&&!(MU(h.array,q)&&c.action)&&h.unMount.add(q)}}},Ot=()=>e.shouldFocusError&&Uc(i,Se,h.mount),wn=q=>{Fi(q)&&(b.state.next({disabled:q}),Uc(i,(J,ae)=>{const we=Oe(i,ae);we&&(J.disabled=we._f.disabled||q,Array.isArray(we._f.refs)&&we._f.refs.forEach(Te=>{Te.disabled=we._f.disabled||q}))},0,!1))},vr=(q,J)=>async ae=>{let we;ae&&(ae.preventDefault&&ae.preventDefault(),ae.persist&&ae.persist());let Te=Dn(l);if(b.state.next({isSubmitting:!0}),e.resolver){const{errors:ye,values:Ee}=await C();t.errors=ye,Te=Dn(Ee)}else await x(i);if(h.disabled.size)for(const ye of h.disabled)fn(Te,ye);if(fn(t.errors,"root"),dr(t.errors)){b.state.next({errors:{}});try{await q(Te,ae)}catch(ye){we=ye}}else J&&await J({...t.errors},ae),Ot(),setTimeout(Ot);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dr(t.errors)&&!we,submitCount:t.submitCount+1,errors:t.errors}),we)throw we},ai=(q,J={})=>{Oe(i,q)&&(mn(J.defaultValue)?Q(q,Dn(Oe(a,q))):(Q(q,J.defaultValue),Bt(a,q,Dn(J.defaultValue))),J.keepTouched||fn(t.touchedFields,q),J.keepDirty||(fn(t.dirtyFields,q),t.isDirty=J.defaultValue?L(q,Dn(Oe(a,q))):L()),J.keepError||(fn(t.errors,q),y.isValid&&V()),b.state.next({...t}))},Sn=(q,J={})=>{const ae=q?Dn(q):a,we=Dn(ae),Te=dr(q),ye=Te?a:we;if(J.keepDefaultValues||(a=ae),!J.keepValues){if(J.keepDirtyValues){const Ee=new Set([...h.mount,...Object.keys(Ec(a,l))]);for(const Ce of Array.from(Ee))Oe(t.dirtyFields,Ce)?Bt(ye,Ce,Oe(l,Ce)):Q(Ce,Oe(ye,Ce))}else{if(gv&&mn(q))for(const Ee of h.mount){const Ce=Oe(i,Ee);if(Ce&&Ce._f){const st=Array.isArray(Ce._f.refs)?Ce._f.refs[0]:Ce._f.ref;if(Vd(st)){const Tt=st.closest("form");if(Tt){Tt.reset();break}}}}if(J.keepFieldsRef)for(const Ee of h.mount)Q(Ee,Oe(ye,Ee));else i={}}l=e.shouldUnregister?J.keepDefaultValues?Dn(a):{}:Dn(ye),b.array.next({values:{...ye}}),b.state.next({values:{...ye}})}h={mount:J.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!y.isValid||!!J.keepIsValid||!!J.keepDirtyValues,c.watch=!!e.shouldUnregister,b.state.next({submitCount:J.keepSubmitCount?t.submitCount:0,isDirty:Te?!1:J.keepDirty?t.isDirty:!!(J.keepDefaultValues&&!Ra(q,a)),isSubmitted:J.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Te?{}:J.keepDirtyValues?J.keepDefaultValues&&l?Ec(a,l):t.dirtyFields:J.keepDefaultValues&&q?Ec(a,q):J.keepDirty?t.dirtyFields:{},touchedFields:J.keepTouched?t.touchedFields:{},errors:J.keepErrors?t.errors:{},isSubmitSuccessful:J.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ai=(q,J)=>Sn(yi(q)?q(l):q,J),qs=(q,J={})=>{const ae=Oe(i,q),we=ae&&ae._f;if(we){const Te=we.refs?we.refs[0]:we.ref;Te.focus&&(Te.focus(),J.shouldSelect&&yi(Te.select)&&Te.select())}},kn=q=>{t={...t,...q}},Ri={control:{register:qn,unregister:$t,getFieldState:le,handleSubmit:vr,setError:me,_subscribe:Je,_runSchema:C,_focusError:Ot,_getWatch:P,_getDirty:L,_setValid:V,_setFieldArray:U,_setDisabledField:Rt,_setErrors:H,_getFieldArray:I,_reset:Sn,_resetDefaultValues:()=>yi(e.defaultValues)&&e.defaultValues().then(q=>{Ai(q,e.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:B,_disableForm:wn,_subjects:b,_proxyFormState:y,get _fields(){return i},get _formValues(){return l},get _state(){return c},set _state(q){c=q},get _defaultValues(){return a},get _names(){return h},set _names(q){h=q},get _formState(){return t},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:He,trigger:Ke,register:qn,handleSubmit:vr,watch:ke,setValue:Q,getValues:j,reset:Ai,resetField:ai,clearErrors:_e,unregister:$t,setError:me,setFocus:qs,getFieldState:le};return{...Ri,formControl:Ri}}function JU(n={}){const e=hr.useRef(void 0),t=hr.useRef(void 0),[i,a]=hr.useState({isDirty:!1,isValidating:!1,isLoading:yi(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:yi(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:i},n.defaultValues&&!yi(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:c,...h}=WU(n);e.current={...h,formState:i}}const l=e.current.control;return l._options=n,UU(()=>{const c=l._subscribe({formState:l._proxyFormState,callback:()=>a({...l._formState}),reRenderRoot:!0});return a(h=>({...h,isReady:!0})),l._formState.isReady=!0,c},[l]),hr.useEffect(()=>l._disableForm(n.disabled),[l,n.disabled]),hr.useEffect(()=>{n.mode&&(l._options.mode=n.mode),n.reValidateMode&&(l._options.reValidateMode=n.reValidateMode)},[l,n.mode,n.reValidateMode]),hr.useEffect(()=>{n.errors&&(l._setErrors(n.errors),l._focusError())},[l,n.errors]),hr.useEffect(()=>{n.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,n.shouldUnregister]),hr.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==i.isDirty&&l._subjects.state.next({isDirty:c})}},[l,i.isDirty]),hr.useEffect(()=>{n.values&&!Ra(n.values,t.current)?(l._reset(n.values,{keepFieldsRef:!0,...l._options.resetOptions}),t.current=n.values,a(c=>({...c}))):l._resetDefaultValues()},[l,n.values]),hr.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=LU(i,l),e.current}var At;(function(n){n.assertEqual=a=>{};function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const l={};for(const c of a)l[c]=c;return l},n.getValidEnumValues=a=>{const l=n.objectKeys(a).filter(h=>typeof a[a[h]]!="number"),c={};for(const h of l)c[h]=a[h];return n.objectValues(c)},n.objectValues=a=>n.objectKeys(a).map(function(l){return a[l]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const l=[];for(const c in a)Object.prototype.hasOwnProperty.call(a,c)&&l.push(c);return l},n.find=(a,l)=>{for(const c of a)if(l(c))return c},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function i(a,l=" | "){return a.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}n.joinValues=i,n.jsonStringifyReplacer=(a,l)=>typeof l=="bigint"?l.toString():l})(At||(At={}));var ES;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(ES||(ES={}));const Ue=At.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ea=n=>{switch(typeof n){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return Number.isNaN(n)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(n)?Ue.array:n===null?Ue.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ue.promise:typeof Map<"u"&&n instanceof Map?Ue.map:typeof Set<"u"&&n instanceof Set?Ue.set:typeof Date<"u"&&n instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},ve=At.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},i={_errors:[]},a=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(a);else if(c.code==="invalid_return_type")a(c.returnTypeError);else if(c.code==="invalid_arguments")a(c.argumentsError);else if(c.path.length===0)i._errors.push(t(c));else{let h=i,m=0;for(;m<c.path.length;){const p=c.path[m];m===c.path.length-1?(h[p]=h[p]||{_errors:[]},h[p]._errors.push(t(c))):h[p]=h[p]||{_errors:[]},h=h[p],m++}}};return a(this),i}static assert(e){if(!(e instanceof zs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,At.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const a of this.issues)if(a.path.length>0){const l=a.path[0];t[l]=t[l]||[],t[l].push(e(a))}else i.push(e(a));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}zs.create=n=>new zs(n);const Ky=(n,e)=>{let t;switch(n.code){case ve.invalid_type:n.received===Ue.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ve.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,At.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:t=`Unrecognized key(s) in object: ${At.joinValues(n.keys,", ")}`;break;case ve.invalid_union:t="Invalid input";break;case ve.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${At.joinValues(n.options)}`;break;case ve.invalid_enum_value:t=`Invalid enum value. Expected ${At.joinValues(n.options)}, received '${n.received}'`;break;case ve.invalid_arguments:t="Invalid function arguments";break;case ve.invalid_return_type:t="Invalid function return type";break;case ve.invalid_date:t="Invalid date";break;case ve.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:At.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ve.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ve.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ve.custom:t="Invalid input";break;case ve.invalid_intersection_types:t="Intersection results could not be merged";break;case ve.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ve.not_finite:t="Number must be finite";break;default:t=e.defaultError,At.assertNever(n)}return{message:t}};let e9=Ky;function t9(){return e9}const n9=n=>{const{data:e,path:t,errorMaps:i,issueData:a}=n,l=[...t,...a.path||[]],c={...a,path:l};if(a.message!==void 0)return{...a,path:l,message:a.message};let h="";const m=i.filter(p=>!!p).slice().reverse();for(const p of m)h=p(c,{data:e,defaultError:h}).message;return{...a,path:l,message:h}};function Re(n,e){const t=t9(),i=n9({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ky?void 0:Ky].filter(a=>!!a)});n.common.issues.push(i)}class Pr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const a of t){if(a.status==="aborted")return nt;a.status==="dirty"&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const a of t){const l=await a.key,c=await a.value;i.push({key:l,value:c})}return Pr.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const a of t){const{key:l,value:c}=a;if(l.status==="aborted"||c.status==="aborted")return nt;l.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof c.value<"u"||a.alwaysSet)&&(i[l.value]=c.value)}return{status:e.value,value:i}}}const nt=Object.freeze({status:"aborted"}),xc=n=>({status:"dirty",value:n}),si=n=>({status:"valid",value:n}),TS=n=>n.status==="aborted",bS=n=>n.status==="dirty",iu=n=>n.status==="valid",jd=n=>typeof Promise<"u"&&n instanceof Promise;var ze;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(ze||(ze={}));class Fa{constructor(e,t,i,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wS=(n,e)=>{if(iu(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new zs(n.common.issues);return this._error=t,this._error}}};function ft(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:a}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(c,h)=>{const{message:m}=n;return c.code==="invalid_enum_value"?{message:m??h.defaultError}:typeof h.data>"u"?{message:m??i??h.defaultError}:c.code!=="invalid_type"?{message:h.defaultError}:{message:m??t??h.defaultError}},description:a}}class wt{get description(){return this._def.description}_getType(e){return Ea(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Pr,ctx:{common:e.parent.common,data:e.data,parsedType:Ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(jd(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ea(e)},a=this._parseSync({data:e,path:i.path,parent:i});return wS(i,a)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ea(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return iu(i)?{value:i.value}:{issues:t.common.issues}}catch(i){i?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>iu(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ea(e)},a=this._parse({data:e,path:i.path,parent:i}),l=await(jd(a)?a:Promise.resolve(a));return wS(i,l)}refine(e,t){const i=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,l)=>{const c=e(a),h=()=>l.addIssue({code:ve.custom,...i(a)});return typeof Promise<"u"&&c instanceof Promise?c.then(m=>m?!0:(h(),!1)):c?!0:(h(),!1)})}refinement(e,t){return this._refinement((i,a)=>e(i)?!0:(a.addIssue(typeof t=="function"?t(i,a):t),!1))}_refinement(e){return new ou({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Oa.create(this,this._def)}nullable(){return lu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ji.create(this)}promise(){return qd.create(this,this._def)}or(e){return Bd.create([this,e],this._def)}and(e){return Fd.create(this,e,this._def)}transform(e){return new ou({...ft(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Qy({...ft(this._def),innerType:this,defaultValue:t,typeName:rt.ZodDefault})}brand(){return new A9({typeName:rt.ZodBranded,type:this,...ft(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Xy({...ft(this._def),innerType:this,catchValue:t,typeName:rt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Tv.create(this,e)}readonly(){return Zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const r9=/^c[^\s-]{8,}$/i,i9=/^[0-9a-z]+$/,s9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,a9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,o9=/^[a-z0-9_-]{21}$/i,l9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,u9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,c9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,f9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sy;const h9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,d9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,m9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,p9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,g9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,y9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,mC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_9=new RegExp(`^${mC}$`);function pC(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function v9(n){return new RegExp(`^${pC(n)}$`)}function E9(n){let e=`${mC}T${pC(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function T9(n,e){return!!((e==="v4"||!e)&&h9.test(n)||(e==="v6"||!e)&&m9.test(n))}function b9(n,e){if(!l9.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(i));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function w9(n,e){return!!((e==="v4"||!e)&&d9.test(n)||(e==="v6"||!e)&&p9.test(n))}class Is extends wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const l=this._getOrReturnCtx(e);return Re(l,{code:ve.invalid_type,expected:Ue.string,received:l.parsedType}),nt}const i=new Pr;let a;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),i.dirty());else if(l.kind==="max")e.data.length>l.value&&(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),i.dirty());else if(l.kind==="length"){const c=e.data.length>l.value,h=e.data.length<l.value;(c||h)&&(a=this._getOrReturnCtx(e,a),c?Re(a,{code:ve.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):h&&Re(a,{code:ve.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),i.dirty())}else if(l.kind==="email")c9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"email",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="emoji")sy||(sy=new RegExp(f9,"u")),sy.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"emoji",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="uuid")a9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"uuid",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="nanoid")o9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"nanoid",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="cuid")r9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"cuid",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="cuid2")i9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"cuid2",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="ulid")s9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"ulid",code:ve.invalid_string,message:l.message}),i.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Re(a,{validation:"url",code:ve.invalid_string,message:l.message}),i.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"regex",code:ve.invalid_string,message:l.message}),i.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),i.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.invalid_string,validation:{startsWith:l.value},message:l.message}),i.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.invalid_string,validation:{endsWith:l.value},message:l.message}),i.dirty()):l.kind==="datetime"?E9(l).test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.invalid_string,validation:"datetime",message:l.message}),i.dirty()):l.kind==="date"?_9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.invalid_string,validation:"date",message:l.message}),i.dirty()):l.kind==="time"?v9(l).test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.invalid_string,validation:"time",message:l.message}),i.dirty()):l.kind==="duration"?u9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"duration",code:ve.invalid_string,message:l.message}),i.dirty()):l.kind==="ip"?T9(e.data,l.version)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"ip",code:ve.invalid_string,message:l.message}),i.dirty()):l.kind==="jwt"?b9(e.data,l.alg)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"jwt",code:ve.invalid_string,message:l.message}),i.dirty()):l.kind==="cidr"?w9(e.data,l.version)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"cidr",code:ve.invalid_string,message:l.message}),i.dirty()):l.kind==="base64"?g9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"base64",code:ve.invalid_string,message:l.message}),i.dirty()):l.kind==="base64url"?y9.test(e.data)||(a=this._getOrReturnCtx(e,a),Re(a,{validation:"base64url",code:ve.invalid_string,message:l.message}),i.dirty()):At.assertNever(l);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(a=>e.test(a),{validation:t,code:ve.invalid_string,...ze.errToObj(i)})}_addCheck(e){return new Is({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ze.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ze.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ze.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ze.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ze.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ze.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ze.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ze.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ze.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ze.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ze.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ze.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ze.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ze.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ze.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ze.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ze.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ze.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ze.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ze.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ze.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ze.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ze.errToObj(t)})}nonempty(e){return this.min(1,ze.errToObj(e))}trim(){return new Is({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Is({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Is({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Is.create=n=>new Is({checks:[],typeName:rt.ZodString,coerce:n?.coerce??!1,...ft(n)});function S9(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,a=t>i?t:i,l=Number.parseInt(n.toFixed(a).replace(".","")),c=Number.parseInt(e.toFixed(a).replace(".",""));return l%c/10**a}class Bo extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const l=this._getOrReturnCtx(e);return Re(l,{code:ve.invalid_type,expected:Ue.number,received:l.parsedType}),nt}let i;const a=new Pr;for(const l of this._def.checks)l.kind==="int"?At.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.invalid_type,expected:"integer",received:"float",message:l.message}),a.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),a.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),a.dirty()):l.kind==="multipleOf"?S9(e.data,l.value)!==0&&(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.not_multiple_of,multipleOf:l.value,message:l.message}),a.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.not_finite,message:l.message}),a.dirty()):At.assertNever(l);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ze.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ze.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ze.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ze.toString(t))}setLimit(e,t,i,a){return new Bo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:ze.toString(a)}]})}_addCheck(e){return new Bo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ze.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ze.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ze.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ze.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ze.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ze.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&At.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Bo.create=n=>new Bo({checks:[],typeName:rt.ZodNumber,coerce:n?.coerce||!1,...ft(n)});class Fo extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ue.bigint)return this._getInvalidInput(e);let i;const a=new Pr;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),a.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),a.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Re(i,{code:ve.not_multiple_of,multipleOf:l.value,message:l.message}),a.dirty()):At.assertNever(l);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Re(t,{code:ve.invalid_type,expected:Ue.bigint,received:t.parsedType}),nt}gte(e,t){return this.setLimit("min",e,!0,ze.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ze.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ze.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ze.toString(t))}setLimit(e,t,i,a){return new Fo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:ze.toString(a)}]})}_addCheck(e){return new Fo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ze.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ze.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Fo.create=n=>new Fo({checks:[],typeName:rt.ZodBigInt,coerce:n?.coerce??!1,...ft(n)});class zd extends wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Ue.boolean,received:i.parsedType}),nt}return si(e.data)}}zd.create=n=>new zd({typeName:rt.ZodBoolean,coerce:n?.coerce||!1,...ft(n)});class su extends wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const l=this._getOrReturnCtx(e);return Re(l,{code:ve.invalid_type,expected:Ue.date,received:l.parsedType}),nt}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return Re(l,{code:ve.invalid_date}),nt}const i=new Pr;let a;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),i.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(a=this._getOrReturnCtx(e,a),Re(a,{code:ve.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),i.dirty()):At.assertNever(l);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ze.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ze.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}su.create=n=>new su({checks:[],coerce:n?.coerce||!1,typeName:rt.ZodDate,...ft(n)});class SS extends wt{_parse(e){if(this._getType(e)!==Ue.symbol){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Ue.symbol,received:i.parsedType}),nt}return si(e.data)}}SS.create=n=>new SS({typeName:rt.ZodSymbol,...ft(n)});class AS extends wt{_parse(e){if(this._getType(e)!==Ue.undefined){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Ue.undefined,received:i.parsedType}),nt}return si(e.data)}}AS.create=n=>new AS({typeName:rt.ZodUndefined,...ft(n)});class RS extends wt{_parse(e){if(this._getType(e)!==Ue.null){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Ue.null,received:i.parsedType}),nt}return si(e.data)}}RS.create=n=>new RS({typeName:rt.ZodNull,...ft(n)});class CS extends wt{constructor(){super(...arguments),this._any=!0}_parse(e){return si(e.data)}}CS.create=n=>new CS({typeName:rt.ZodAny,...ft(n)});class IS extends wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return si(e.data)}}IS.create=n=>new IS({typeName:rt.ZodUnknown,...ft(n)});class qa extends wt{_parse(e){const t=this._getOrReturnCtx(e);return Re(t,{code:ve.invalid_type,expected:Ue.never,received:t.parsedType}),nt}}qa.create=n=>new qa({typeName:rt.ZodNever,...ft(n)});class NS extends wt{_parse(e){if(this._getType(e)!==Ue.undefined){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Ue.void,received:i.parsedType}),nt}return si(e.data)}}NS.create=n=>new NS({typeName:rt.ZodVoid,...ft(n)});class Ji extends wt{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),a=this._def;if(t.parsedType!==Ue.array)return Re(t,{code:ve.invalid_type,expected:Ue.array,received:t.parsedType}),nt;if(a.exactLength!==null){const c=t.data.length>a.exactLength.value,h=t.data.length<a.exactLength.value;(c||h)&&(Re(t,{code:c?ve.too_big:ve.too_small,minimum:h?a.exactLength.value:void 0,maximum:c?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(Re(t,{code:ve.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(Re(t,{code:ve.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((c,h)=>a.type._parseAsync(new Fa(t,c,t.path,h)))).then(c=>Pr.mergeArray(i,c));const l=[...t.data].map((c,h)=>a.type._parseSync(new Fa(t,c,t.path,h)));return Pr.mergeArray(i,l)}get element(){return this._def.type}min(e,t){return new Ji({...this._def,minLength:{value:e,message:ze.toString(t)}})}max(e,t){return new Ji({...this._def,maxLength:{value:e,message:ze.toString(t)}})}length(e,t){return new Ji({...this._def,exactLength:{value:e,message:ze.toString(t)}})}nonempty(e){return this.min(1,e)}}Ji.create=(n,e)=>new Ji({type:n,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...ft(e)});function Fl(n){if(n instanceof dn){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=Oa.create(Fl(i))}return new dn({...n._def,shape:()=>e})}else return n instanceof Ji?new Ji({...n._def,type:Fl(n.element)}):n instanceof Oa?Oa.create(Fl(n.unwrap())):n instanceof lu?lu.create(Fl(n.unwrap())):n instanceof qo?qo.create(n.items.map(e=>Fl(e))):n}class dn extends wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=At.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ue.object){const p=this._getOrReturnCtx(e);return Re(p,{code:ve.invalid_type,expected:Ue.object,received:p.parsedType}),nt}const{status:i,ctx:a}=this._processInputParams(e),{shape:l,keys:c}=this._getCached(),h=[];if(!(this._def.catchall instanceof qa&&this._def.unknownKeys==="strip"))for(const p in a.data)c.includes(p)||h.push(p);const m=[];for(const p of c){const y=l[p],T=a.data[p];m.push({key:{status:"valid",value:p},value:y._parse(new Fa(a,T,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof qa){const p=this._def.unknownKeys;if(p==="passthrough")for(const y of h)m.push({key:{status:"valid",value:y},value:{status:"valid",value:a.data[y]}});else if(p==="strict")h.length>0&&(Re(a,{code:ve.unrecognized_keys,keys:h}),i.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const y of h){const T=a.data[y];m.push({key:{status:"valid",value:y},value:p._parse(new Fa(a,T,a.path,y)),alwaysSet:y in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const y of m){const T=await y.key,b=await y.value;p.push({key:T,value:b,alwaysSet:y.alwaysSet})}return p}).then(p=>Pr.mergeObjectSync(i,p)):Pr.mergeObjectSync(i,m)}get shape(){return this._def.shape()}strict(e){return ze.errToObj,new dn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{const a=this._def.errorMap?.(t,i).message??i.defaultError;return t.code==="unrecognized_keys"?{message:ze.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new dn({...this._def,unknownKeys:"strip"})}passthrough(){return new dn({...this._def,unknownKeys:"passthrough"})}extend(e){return new dn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new dn({...this._def,catchall:e})}pick(e){const t={};for(const i of At.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new dn({...this._def,shape:()=>t})}omit(e){const t={};for(const i of At.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new dn({...this._def,shape:()=>t})}deepPartial(){return Fl(this)}partial(e){const t={};for(const i of At.objectKeys(this.shape)){const a=this.shape[i];e&&!e[i]?t[i]=a:t[i]=a.optional()}return new dn({...this._def,shape:()=>t})}required(e){const t={};for(const i of At.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let l=this.shape[i];for(;l instanceof Oa;)l=l._def.innerType;t[i]=l}return new dn({...this._def,shape:()=>t})}keyof(){return gC(At.objectKeys(this.shape))}}dn.create=(n,e)=>new dn({shape:()=>n,unknownKeys:"strip",catchall:qa.create(),typeName:rt.ZodObject,...ft(e)});dn.strictCreate=(n,e)=>new dn({shape:()=>n,unknownKeys:"strict",catchall:qa.create(),typeName:rt.ZodObject,...ft(e)});dn.lazycreate=(n,e)=>new dn({shape:n,unknownKeys:"strip",catchall:qa.create(),typeName:rt.ZodObject,...ft(e)});class Bd extends wt{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function a(l){for(const h of l)if(h.result.status==="valid")return h.result;for(const h of l)if(h.result.status==="dirty")return t.common.issues.push(...h.ctx.common.issues),h.result;const c=l.map(h=>new zs(h.ctx.common.issues));return Re(t,{code:ve.invalid_union,unionErrors:c}),nt}if(t.common.async)return Promise.all(i.map(async l=>{const c={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(a);{let l;const c=[];for(const m of i){const p={...t,common:{...t.common,issues:[]},parent:null},y=m._parseSync({data:t.data,path:t.path,parent:p});if(y.status==="valid")return y;y.status==="dirty"&&!l&&(l={result:y,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const h=c.map(m=>new zs(m));return Re(t,{code:ve.invalid_union,unionErrors:h}),nt}}get options(){return this._def.options}}Bd.create=(n,e)=>new Bd({options:n,typeName:rt.ZodUnion,...ft(e)});function Yy(n,e){const t=Ea(n),i=Ea(e);if(n===e)return{valid:!0,data:n};if(t===Ue.object&&i===Ue.object){const a=At.objectKeys(e),l=At.objectKeys(n).filter(h=>a.indexOf(h)!==-1),c={...n,...e};for(const h of l){const m=Yy(n[h],e[h]);if(!m.valid)return{valid:!1};c[h]=m.data}return{valid:!0,data:c}}else if(t===Ue.array&&i===Ue.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let l=0;l<n.length;l++){const c=n[l],h=e[l],m=Yy(c,h);if(!m.valid)return{valid:!1};a.push(m.data)}return{valid:!0,data:a}}else return t===Ue.date&&i===Ue.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Fd extends wt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),a=(l,c)=>{if(TS(l)||TS(c))return nt;const h=Yy(l.value,c.value);return h.valid?((bS(l)||bS(c))&&t.dirty(),{status:t.value,value:h.data}):(Re(i,{code:ve.invalid_intersection_types}),nt)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([l,c])=>a(l,c)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Fd.create=(n,e,t)=>new Fd({left:n,right:e,typeName:rt.ZodIntersection,...ft(t)});class qo extends wt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ue.array)return Re(i,{code:ve.invalid_type,expected:Ue.array,received:i.parsedType}),nt;if(i.data.length<this._def.items.length)return Re(i,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),nt;!this._def.rest&&i.data.length>this._def.items.length&&(Re(i,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...i.data].map((c,h)=>{const m=this._def.items[h]||this._def.rest;return m?m._parse(new Fa(i,c,i.path,h)):null}).filter(c=>!!c);return i.common.async?Promise.all(l).then(c=>Pr.mergeArray(t,c)):Pr.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new qo({...this._def,rest:e})}}qo.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qo({items:n,typeName:rt.ZodTuple,rest:null,...ft(e)})};class xS extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ue.map)return Re(i,{code:ve.invalid_type,expected:Ue.map,received:i.parsedType}),nt;const a=this._def.keyType,l=this._def.valueType,c=[...i.data.entries()].map(([h,m],p)=>({key:a._parse(new Fa(i,h,i.path,[p,"key"])),value:l._parse(new Fa(i,m,i.path,[p,"value"]))}));if(i.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const m of c){const p=await m.key,y=await m.value;if(p.status==="aborted"||y.status==="aborted")return nt;(p.status==="dirty"||y.status==="dirty")&&t.dirty(),h.set(p.value,y.value)}return{status:t.value,value:h}})}else{const h=new Map;for(const m of c){const p=m.key,y=m.value;if(p.status==="aborted"||y.status==="aborted")return nt;(p.status==="dirty"||y.status==="dirty")&&t.dirty(),h.set(p.value,y.value)}return{status:t.value,value:h}}}}xS.create=(n,e,t)=>new xS({valueType:e,keyType:n,typeName:rt.ZodMap,...ft(t)});class tf extends wt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ue.set)return Re(i,{code:ve.invalid_type,expected:Ue.set,received:i.parsedType}),nt;const a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(Re(i,{code:ve.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(Re(i,{code:ve.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const l=this._def.valueType;function c(m){const p=new Set;for(const y of m){if(y.status==="aborted")return nt;y.status==="dirty"&&t.dirty(),p.add(y.value)}return{status:t.value,value:p}}const h=[...i.data.values()].map((m,p)=>l._parse(new Fa(i,m,i.path,p)));return i.common.async?Promise.all(h).then(m=>c(m)):c(h)}min(e,t){return new tf({...this._def,minSize:{value:e,message:ze.toString(t)}})}max(e,t){return new tf({...this._def,maxSize:{value:e,message:ze.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}tf.create=(n,e)=>new tf({valueType:n,minSize:null,maxSize:null,typeName:rt.ZodSet,...ft(e)});class DS extends wt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}DS.create=(n,e)=>new DS({getter:n,typeName:rt.ZodLazy,...ft(e)});class OS extends wt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Re(t,{received:t.data,code:ve.invalid_literal,expected:this._def.value}),nt}return{status:"valid",value:e.data}}get value(){return this._def.value}}OS.create=(n,e)=>new OS({value:n,typeName:rt.ZodLiteral,...ft(e)});function gC(n,e){return new au({values:n,typeName:rt.ZodEnum,...ft(e)})}class au extends wt{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return Re(t,{expected:At.joinValues(i),received:t.parsedType,code:ve.invalid_type}),nt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return Re(t,{received:t.data,code:ve.invalid_enum_value,options:i}),nt}return si(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return au.create(e,{...this._def,...t})}exclude(e,t=this._def){return au.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}au.create=gC;class kS extends wt{_parse(e){const t=At.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Ue.string&&i.parsedType!==Ue.number){const a=At.objectValues(t);return Re(i,{expected:At.joinValues(a),received:i.parsedType,code:ve.invalid_type}),nt}if(this._cache||(this._cache=new Set(At.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=At.objectValues(t);return Re(i,{received:i.data,code:ve.invalid_enum_value,options:a}),nt}return si(e.data)}get enum(){return this._def.values}}kS.create=(n,e)=>new kS({values:n,typeName:rt.ZodNativeEnum,...ft(e)});class qd extends wt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.promise&&t.common.async===!1)return Re(t,{code:ve.invalid_type,expected:Ue.promise,received:t.parsedType}),nt;const i=t.parsedType===Ue.promise?t.data:Promise.resolve(t.data);return si(i.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}qd.create=(n,e)=>new qd({type:n,typeName:rt.ZodPromise,...ft(e)});class ou extends wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),a=this._def.effect||null,l={addIssue:c=>{Re(i,c),c.fatal?t.abort():t.dirty()},get path(){return i.path}};if(l.addIssue=l.addIssue.bind(l),a.type==="preprocess"){const c=a.transform(i.data,l);if(i.common.async)return Promise.resolve(c).then(async h=>{if(t.value==="aborted")return nt;const m=await this._def.schema._parseAsync({data:h,path:i.path,parent:i});return m.status==="aborted"?nt:m.status==="dirty"||t.value==="dirty"?xc(m.value):m});{if(t.value==="aborted")return nt;const h=this._def.schema._parseSync({data:c,path:i.path,parent:i});return h.status==="aborted"?nt:h.status==="dirty"||t.value==="dirty"?xc(h.value):h}}if(a.type==="refinement"){const c=h=>{const m=a.refinement(h,l);if(i.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(i.common.async===!1){const h=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return h.status==="aborted"?nt:(h.status==="dirty"&&t.dirty(),c(h.value),{status:t.value,value:h.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(h=>h.status==="aborted"?nt:(h.status==="dirty"&&t.dirty(),c(h.value).then(()=>({status:t.value,value:h.value}))))}if(a.type==="transform")if(i.common.async===!1){const c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!iu(c))return nt;const h=a.transform(c.value,l);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:h}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>iu(c)?Promise.resolve(a.transform(c.value,l)).then(h=>({status:t.value,value:h})):nt);At.assertNever(a)}}ou.create=(n,e,t)=>new ou({schema:n,typeName:rt.ZodEffects,effect:e,...ft(t)});ou.createWithPreprocess=(n,e,t)=>new ou({schema:e,effect:{type:"preprocess",transform:n},typeName:rt.ZodEffects,...ft(t)});class Oa extends wt{_parse(e){return this._getType(e)===Ue.undefined?si(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Oa.create=(n,e)=>new Oa({innerType:n,typeName:rt.ZodOptional,...ft(e)});class lu extends wt{_parse(e){return this._getType(e)===Ue.null?si(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lu.create=(n,e)=>new lu({innerType:n,typeName:rt.ZodNullable,...ft(e)});class Qy extends wt{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===Ue.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Qy.create=(n,e)=>new Qy({innerType:n,typeName:rt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ft(e)});class Xy extends wt{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return jd(a)?a.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new zs(i.common.issues)},input:i.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new zs(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Xy.create=(n,e)=>new Xy({innerType:n,typeName:rt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ft(e)});class MS extends wt{_parse(e){if(this._getType(e)!==Ue.nan){const i=this._getOrReturnCtx(e);return Re(i,{code:ve.invalid_type,expected:Ue.nan,received:i.parsedType}),nt}return{status:"valid",value:e.data}}}MS.create=n=>new MS({typeName:rt.ZodNaN,...ft(n)});class A9 extends wt{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class Tv extends wt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?nt:l.status==="dirty"?(t.dirty(),xc(l.value)):this._def.out._parseAsync({data:l.value,path:i.path,parent:i})})();{const a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?nt:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(e,t){return new Tv({in:e,out:t,typeName:rt.ZodPipeline})}}class Zy extends wt{_parse(e){const t=this._def.innerType._parse(e),i=a=>(iu(a)&&(a.value=Object.freeze(a.value)),a);return jd(t)?t.then(a=>i(a)):i(t)}unwrap(){return this._def.innerType}}Zy.create=(n,e)=>new Zy({innerType:n,typeName:rt.ZodReadonly,...ft(e)});var rt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(rt||(rt={}));const PS=Is.create;Bo.create;Fo.create;zd.create;su.create;qa.create;Ji.create;const R9=dn.create;Bd.create;Fd.create;qo.create;const C9=au.create;qd.create;Oa.create;lu.create;const I9={string:(n=>Is.create({...n,coerce:!0})),number:(n=>Bo.create({...n,coerce:!0})),boolean:(n=>zd.create({...n,coerce:!0})),bigint:(n=>Fo.create({...n,coerce:!0})),date:(n=>su.create({...n,coerce:!0}))},VS=(n,e,t)=>{if(n&&"reportValidity"in n){const i=Oe(t,e);n.setCustomValidity(i&&i.message||""),n.reportValidity()}},yC=(n,e)=>{for(const t in e.fields){const i=e.fields[t];i&&i.ref&&"reportValidity"in i.ref?VS(i.ref,t,n):i.refs&&i.refs.forEach(a=>VS(a,t,n))}},N9=(n,e)=>{e.shouldUseNativeValidation&&yC(n,e);const t={};for(const i in n){const a=Oe(e.fields,i),l=Object.assign(n[i]||{},{ref:a&&a.ref});if(x9(e.names||Object.keys(n),i)){const c=Object.assign({},Oe(t,i));Bt(c,"root",l),Bt(t,i,c)}else Bt(t,i,l)}return t},x9=(n,e)=>n.some(t=>t.startsWith(e+"."));var D9=function(n,e){for(var t={};n.length;){var i=n[0],a=i.code,l=i.message,c=i.path.join(".");if(!t[c])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];t[c]={message:h.message,type:h.code}}else t[c]={message:l,type:a};if("unionErrors"in i&&i.unionErrors.forEach(function(y){return y.errors.forEach(function(T){return n.push(T)})}),e){var m=t[c].types,p=m&&m[i.code];t[c]=oC(c,e,t,a,p?[].concat(p,i.message):i.message)}n.shift()}return t},O9=function(n,e,t){return t===void 0&&(t={}),function(i,a,l){try{return Promise.resolve((function(c,h){try{var m=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](i,e)).then(function(p){return l.shouldUseNativeValidation&&yC({},l),{errors:{},values:t.raw?i:p}})}catch(p){return h(p)}return m&&m.then?m.then(void 0,h):m})(0,function(c){if((function(h){return Array.isArray(h?.errors)})(c))return{values:{},errors:N9(D9(c.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw c}))}catch(c){return Promise.reject(c)}}};const k9=R9({title:PS().min(2,"Название слишком короткое"),city:PS().min(2,"Укажите город"),days:I9.number().int().min(1).max(60),visibility:C9(["public","unlisted"])});function M9(){const n=Or(h=>h.user.current),e=cu(),{register:t,handleSubmit:i,formState:{errors:a,isSubmitting:l}}=JU({resolver:O9(k9),defaultValues:{visibility:"public",days:3},mode:"onSubmit"}),c=async h=>{if(n)try{const m=await uU({title:h.title,city:h.city,days:h.days,visibility:h.visibility,ownerId:n.uid});e(`/route/${m}`)}catch(m){const p=m instanceof Error?m.message:String(m);alert("Не удалось создать маршрут: "+p),console.error("[Create] createRoute failed:",m)}};return N.jsxs("div",{className:"create-wrap",children:[N.jsx("h1",{className:"create-title",children:"Создать маршрут"}),N.jsxs("form",{className:"create-form",onSubmit:i(c),children:[N.jsx("label",{className:"f-label",children:"Название"}),N.jsx("input",{className:"f-input",...t("title"),placeholder:"Тур 3 дня в Стокгольме"}),a.title&&N.jsx("div",{className:"f-err",children:a.title.message}),N.jsxs("div",{className:"grid2",children:[N.jsxs("div",{children:[N.jsx("label",{className:"f-label",children:"Город"}),N.jsx("input",{className:"f-input",...t("city"),placeholder:"Стокгольм"}),a.city&&N.jsx("div",{className:"f-err",children:a.city.message})]}),N.jsxs("div",{children:[N.jsx("label",{className:"f-label",children:"Дней"}),N.jsx("input",{className:"f-input",type:"number",step:1,min:1,max:60,...t("days")}),a.days&&N.jsx("div",{className:"f-err",children:a.days.message})]})]}),N.jsxs("fieldset",{className:"vis-fieldset",children:[N.jsx("legend",{children:"Видимость"}),N.jsxs("label",{className:"vis-option",children:[N.jsx("input",{type:"radio",value:"public",...t("visibility")}),N.jsxs("div",{children:[N.jsx("div",{className:"vis-title",children:"Публичный"}),N.jsx("div",{className:"vis-desc",children:"Показывается в общем списке на главной странице."})]})]}),N.jsxs("label",{className:"vis-option",children:[N.jsx("input",{type:"radio",value:"unlisted",...t("visibility")}),N.jsxs("div",{children:[N.jsx("div",{className:"vis-title",children:"Приватный"}),N.jsx("div",{className:"vis-desc",children:"Доступен только по ссылке."})]})]})]}),N.jsx("div",{className:"actions",children:N.jsx("button",{className:"btn btn-primary",disabled:l,type:"submit",children:"Создать"})})]})]})}const xm="routes",Dm="points";function P9(n){const e=n.data();return{id:n.id,order:Number(e.order),category:String(e.category),title:String(e.title),description:e.description?String(e.description):void 0,address:e.address?String(e.address):void 0,lat:Number(e.lat),lng:Number(e.lng),photoUrl:e.photoUrl?String(e.photoUrl):void 0,createdAt:e.createdAt,updatedAt:e.updatedAt}}async function _C(n){const e=ru(ni(bn,xm,n,Dm),Am("order","asc"));return(await js(e)).docs.map(P9)}async function V9(n,e){const t=Qo(),i={title:e.title,order:e.order,category:e.category,lat:e.lat,lng:e.lng,createdAt:t,updatedAt:t};return e.address&&e.address.trim()&&(i.address=e.address.trim()),e.description&&e.description.trim()&&(i.description=e.description.trim()),e.photoUrl&&e.photoUrl.trim()&&(i.photoUrl=e.photoUrl.trim()),(await hv(ni(bn,xm,n,Dm),i)).id}async function ay(n,e,t){const i={updatedAt:Qo()};t.title!==void 0&&(i.title=t.title),t.order!==void 0&&(i.order=t.order),t.category!==void 0&&(i.category=t.category),t.lat!==void 0&&(i.lat=t.lat),t.lng!==void 0&&(i.lng=t.lng),typeof t.address=="string"&&t.address.trim()&&(i.address=t.address.trim()),typeof t.description=="string"&&t.description.trim()&&(i.description=t.description.trim()),typeof t.photoUrl=="string"&&t.photoUrl.trim()&&(i.photoUrl=t.photoUrl.trim());const a=ii(bn,xm,n,Dm,e);await I4(a,i)}async function L9(n,e){const t=ii(bn,xm,n,Dm,e);await yu(t)}const U9={architecture:"islands#lightBlueLeisureIcon",bar:"islands#pinkBarIcon",history:"islands#nightLeisureIcon",cafe:"islands#darkOrangeFoodIcon",picnic:"islands#oliveVegetationIcon",cuisine:"islands#darkBlueFoodIcon",museum:"islands#brownLeisureIcon",park:"islands#greenVegetationIcon",beach:"islands#yellowBeachIcon",restaurant:"islands#blueFoodIcon",theater:"islands#orangeTheaterIcon",photo:"islands#darkGreenObservationIcon",other:"islands#grayGovernmentIcon"};function LS(n){return!!n&&typeof n.getType=="function"&&n.getType()==="Point"}function j9(n){const e=Date.now();return new Promise(t=>{const i=setInterval(()=>{typeof window<"u"&&window.ymaps&&typeof window.ymaps.ready=="function"?(clearInterval(i),t(!0)):Date.now()-e>n&&(clearInterval(i),t(!1))},50)})}function vC({points:n,onMapClick:e,onMarkerClick:t,height:i=360,zoom:a=13,city:l,center:c,preserveViewport:h=!1,onViewportChange:m}){const p=k.useRef(null),y=k.useRef(null),T=k.useRef(null),b=k.useRef(null),A=k.useRef(null),D=k.useRef(n);D.current=n;const V=k.useRef(e);V.current=e;const z=k.useRef(t);z.current=t;const U=k.useRef(m);U.current=m;const Z=k.useRef(!1),H=k.useRef(!1);function ne(){const K=y.current,M=T.current;if(!K||!M)return;M.removeAll();const C=D.current;for(const R of C){const x={hintContent:R.title??"",iconCaption:typeof R.order=="number"?`#${R.order}`:void 0},B=U9[R.category??"other"],L=new window.ymaps.Placemark([R.lat,R.lng],x,{preset:B});L.events.add("click",()=>{z.current?.(R)}),M.add(L)}if(b.current&&(K.geoObjects.remove(b.current),b.current=null),C.length>=2){const x=[...C].sort((L,P)=>(L.order??0)-(P.order??0)).map(L=>[L.lat,L.lng]),B=new window.ymaps.Polyline(x,{},{strokeColor:"#2f8cf0",strokeWidth:4,strokeOpacity:.9});b.current=B,K.geoObjects.add(B)}if(!h&&!Z.current){const R=K.geoObjects.getBounds();R?(K.setBounds(R,{checkZoomRange:!0,zoomMargin:[24,24,24,24]}),H.current=!0):C.length===1&&!H.current&&(K.setCenter([C[0].lat,C[0].lng],Math.max(a,13),{}),H.current=!0)}}return k.useEffect(()=>{let K=!1;return(async()=>!await j9(4e3)||!p.current||window.ymaps.ready(()=>{if(K||!p.current)return;const C=new window.ymaps.Map(p.current,{center:[55.751244,37.618423],zoom:a,controls:[]},{suppressMapOpenBlock:!0});C.controls.add("zoomControl"),y.current=C;const R=new window.ymaps.GeoObjectCollection;T.current=R,C.geoObjects.add(R);const x=()=>{const L=y.current;if(!L)return;const P=L.getCenter(),I=L.getZoom();U.current?.({center:{lat:P[0],lng:P[1]},zoom:I})},B=L=>{const P=L.get("coords");if(P)if(V.current?.({lat:P[0],lng:P[1]}),A.current){const I=A.current.geometry;LS(I)&&I.setCoordinates(P)}else{const I=new window.ymaps.Placemark(P,{},{preset:"islands#blueIcon"});A.current=I,C.geoObjects.add(I)}};if(C.events.add("click",B),C.events.add("tap",B),C.events.add("actionend",()=>{Z.current=!0,x()}),C.events.add("boundschange",()=>{Z.current=!0,x()}),c)C.setCenter([c.lat,c.lng],a,{}),H.current=!0;else{const L=D.current;L.length===0&&l&&l.trim()?window.ymaps.geocode(l.trim(),{results:1,kind:"locality"}).then(P=>{if(K||!y.current)return;const I=P.geoObjects.get(0);if(!I)return;const xe=I.geometry;if(LS(xe)){const Fe=xe.getCoordinates();y.current.setCenter(Fe,Math.max(a,13),{})}else{const Fe=P.geoObjects.getBounds();Fe&&y.current.setBounds(Fe,{checkZoomRange:!0,zoomMargin:[24,24,24,24]})}H.current=!0}).catch(()=>{}):L.length>0&&(C.setCenter([L[0].lat,L[0].lng],a,{}),H.current=!0)}return ne(),()=>{C.events.remove("click",B),C.events.remove("tap",B)}}))(),()=>{K=!0,y.current&&(y.current.destroy(),y.current=null),T.current=null,b.current=null,A.current=null}},[]),k.useEffect(()=>{const K=y.current;!K||!c||K.setCenter([c.lat,c.lng],a,{})},[c,a]),k.useEffect(()=>{y.current&&T.current&&ne()},[n,h]),N.jsx("div",{ref:p,className:"ymap",style:{height:i}})}const z9=[{value:"architecture",label:"Архитектура"},{value:"bar",label:"Бар"},{value:"history",label:"Историческое место"},{value:"cafe",label:"Кофейня"},{value:"picnic",label:"Пикник"},{value:"cuisine",label:"Местная кухня"},{value:"museum",label:"Музей"},{value:"park",label:"Парк"},{value:"beach",label:"Пляж"},{value:"restaurant",label:"Ресторан"},{value:"theater",label:"Театр"},{value:"photo",label:"Фотозона"},{value:"other",label:"Другое"}];function B9({initialOrder:n,mode:e="create",initialValues:t,onSubmitPoint:i,onSaveEdit:a,onCancelEdit:l}){const[c,h]=k.useState(t?.title??""),[m,p]=k.useState(t?.address??""),[y,T]=k.useState(t?.description??""),[b,A]=k.useState(t?.category??"other"),[D,V]=k.useState(t?.order??n),[z,U]=k.useState(!1),[Z,H]=k.useState(!1);k.useEffect(()=>{t&&(h(t.title??""),p(t.address??""),T(t.description??""),A(t.category??"other"),V(t.order??n))},[t,n]);const ne=Z&&!c.trim();async function K(M){if(M.preventDefault(),!c.trim()){H(!0);return}const C={title:c.trim(),address:m.trim()||void 0,description:y.trim()||void 0,category:b,order:D};U(!0);try{e==="edit"?await a?.(C):(await i(C),h(""),p(""),T(""),A("other"),V(n),H(!1))}finally{U(!1)}}return N.jsxs("form",{className:"pf-form",onSubmit:K,children:[N.jsx("label",{className:`pf-label ${ne?"is-error":""}`,children:ne?"Введите название":"Название"}),N.jsx("input",{className:`pf-input ${ne?"is-invalid":""}`,placeholder:"Эрмитаж",value:c,onChange:M=>h(M.target.value),onBlur:()=>H(!0),"aria-invalid":ne||void 0}),N.jsx("label",{className:"pf-label",children:"Адрес (необязательно)"}),N.jsx("input",{className:"pf-input",placeholder:"Адрес или ориентир",value:m,onChange:M=>p(M.target.value)}),N.jsx("label",{className:"pf-label",children:"Описание (необязательно)"}),N.jsx("textarea",{className:"pf-input",rows:3,placeholder:"Краткие рекомендации…",value:y,onChange:M=>T(M.target.value)}),N.jsx("label",{className:"pf-label",children:"Категория"}),N.jsx("div",{className:"pf-tags pf-tags--chips",children:z9.map(M=>N.jsx("button",{type:"button",className:`tag chip ${b===M.value?"is-active":""}`,onClick:()=>A(M.value),"aria-pressed":b===M.value,children:N.jsx("span",{children:M.label})},M.value))}),N.jsxs("div",{className:"pf-row",children:[N.jsxs("div",{className:"pf-col",children:[N.jsx("label",{className:"pf-label",children:"Порядок"}),N.jsx("input",{className:"pf-input",type:"number",min:1,step:1,value:D,onChange:M=>V(parseInt(M.target.value||"1",10))})]}),N.jsxs("div",{className:"pf-col pf-actions",children:[e==="edit"&&l&&N.jsx("button",{type:"button",className:"btn",onClick:l,disabled:z,style:{marginRight:8},children:"Отмена"}),N.jsx("button",{className:"btn btn-primary",disabled:z,type:"submit",children:e==="edit"?"Сохранить":"Добавить место"})]})]})]})}const Om="/marker_Map/assets/trash-C1BnTQwy.png",F9="/marker_Map/assets/edit-ZjIHkIBQ.png",q9={architecture:"Архитектура",bar:"Бар",history:"Историческое место",cafe:"Кофейня",picnic:"Пикник",cuisine:"Местная кухня",museum:"Музей",park:"Парк",beach:"Пляж",restaurant:"Ресторан",theater:"Театр",photo:"Фотозона",other:"Другое"};function H9({items:n,onMoveUp:e,onMoveDown:t,onDelete:i,onEdit:a}){return n.length===0?N.jsx("div",{className:"pl-panel",children:N.jsxs("div",{className:"pl-empty",children:[N.jsx("div",{className:"pl-empty-title",children:"Точек пока нет"}),N.jsx("div",{className:"pl-empty-desc",children:"Кликните по карте, затем заполните форму слева."})]})}):N.jsx("div",{className:"pl-panel",children:N.jsx("ul",{className:"pl-list",children:n.sort((l,c)=>l.order-c.order).map((l,c)=>N.jsxs("li",{className:"pl-item",children:[N.jsx("div",{className:"pl-order",children:l.order}),N.jsxs("div",{className:"pl-body",children:[N.jsx("div",{className:"pl-title",children:l.title}),N.jsx("div",{className:"pl-meta",children:N.jsx("span",{className:"pl-tag",children:q9[l.category]})})]}),N.jsxs("div",{className:"pl-actions",children:[N.jsx("button",{className:"btn",disabled:c===0,onClick:()=>e(l.id),title:"Вверх",children:"↑"}),N.jsx("button",{className:"btn",disabled:c===n.length-1,onClick:()=>t(l.id),title:"Вниз",children:"↓"}),N.jsx("button",{className:"icon-btn edit",onClick:()=>a(l.id),title:"Изменить",children:N.jsx("img",{className:"icon",src:F9,alt:""})}),N.jsx("button",{className:"icon-btn trash",onClick:()=>i(l.id),title:"Удалить",children:N.jsx("img",{className:"icon",src:Om,alt:""})})]})]},l.id))})})}function G9({routeId:n,city:e}){const[t,i]=k.useState([]),[a,l]=k.useState(!0),[c,h]=k.useState(null),[m,p]=k.useState(null),y=k.useCallback(async()=>{l(!0);const U=await _C(n);i(U),l(!1)},[n]);k.useEffect(()=>{y()},[y]);const T=k.useMemo(()=>t.length===0?1:t.reduce((Z,H)=>H.order>Z?H.order:Z,t[0].order)+1,[t]);async function b(U){const Z=typeof U.lat=="number"&&Number.isFinite(U.lat)?U.lat:c?.lat,H=typeof U.lng=="number"&&Number.isFinite(U.lng)?U.lng:c?.lng;if(Z==null||H==null){alert("Сначала кликните по карте, чтобы выбрать место.");return}await V9(n,{...U,lat:Z,lng:H}),h(null),await y()}async function A(U){m&&(await ay(n,m.id,{title:U.title,description:U.description,address:U.address,category:U.category,order:U.order}),p(null),await y())}async function D(U){await L9(n,U),await y()}async function V(U,Z){const H=t.findIndex(C=>C.id===U);if(H<0)return;const ne=H+Z;if(ne<0||ne>=t.length)return;const K=t[H],M=t[ne];await ay(n,K.id,{order:M.order}),await ay(n,M.id,{order:K.order}),await y()}const z=m==null?void 0:{title:m.title,address:m.address,description:m.description,category:m.category,order:m.order};return N.jsxs("div",{className:"pe-wrap",children:[N.jsx("h3",{children:"Точки маршрута"}),a?N.jsx("p",{children:"Загрузка..."}):N.jsxs(N.Fragment,{children:[N.jsx(vC,{points:t.map(U=>({lat:U.lat,lng:U.lng,title:U.title,order:U.order,category:U.category})),onMapClick:U=>{m||h(U)},city:e,zoom:13}),m===null&&N.jsxs("div",{className:"pe-hint",children:["Кликните по карте, чтобы выбрать координаты для новой точки.",c&&N.jsxs("span",{className:"pe-picked",children:["Выбрано: ",c.lat.toFixed(5),","," ",c.lng.toFixed(5)," ",N.jsx("button",{type:"button",className:"pe-clear",onClick:()=>h(null),title:"Сбросить выбор",children:"✕"})]})]}),N.jsxs("div",{className:"pe-grid",children:[N.jsxs("div",{children:[N.jsx("h4",{children:m?"Изменить место":"Добавить место"}),N.jsx(B9,{mode:m?"edit":"create",initialOrder:T,initialValues:z,onSubmitPoint:b,onSaveEdit:A,onCancelEdit:()=>{p(null)}})]}),N.jsxs("div",{children:[N.jsx("h4",{children:"Список"}),N.jsx(H9,{items:t,onMoveUp:U=>void V(U,-1),onMoveDown:U=>void V(U,1),onDelete:U=>void D(U),onEdit:U=>{const Z=t.find(H=>H.id===U)??null;p(Z),h(null)}})]})]})]})]})}const bv="routes",wv="comments";function $9(n){const e=n.data();return{id:n.id,userId:String(e.userId),userName:e.userName??null,userPhotoUrl:e.userPhotoUrl??null,text:String(e.text),createdAt:e.createdAt}}async function K9(n,e){return(await hv(ni(bn,bv,n,wv),{...e,createdAt:Qo()})).id}async function Y9(n,e){await yu(ii(bn,bv,n,wv,e))}async function Q9(n){const e=ru(ni(bn,bv,n,wv),Am("createdAt","asc"));return(await js(e)).docs.map($9)}function X9({routeId:n,commentId:e}){const t=Or(y=>y.user.current),[i,a]=k.useState(0),[l,c]=k.useState(!1),[h,m]=k.useState(!1);k.useEffect(()=>{let y=null;return(async()=>{try{a(await yU(n,e))}catch(T){console.error("[CommentLike] fetch count failed:",T),a(0)}if(t?.uid)try{c(await vU(n,e,t.uid))}catch(T){console.error("[CommentLike] isLiked failed:",T),c(!1)}else c(!1);y=_U(n,e,T=>a(T))})(),()=>y?.()},[n,e,t?.uid]);async function p(){if(!t?.uid||h)return;m(!0);const y=l;c(!y),a(T=>Math.max(0,T+(y?-1:1)));try{await EU(n,e,t.uid)}catch(T){console.error("[CommentLike] toggle failed:",T),c(y),a(b=>Math.max(0,b+(y?1:-1)))}finally{m(!1)}}return N.jsxs("button",{className:`icon-btn like-btn${l?" is-active":""}`,onClick:p,"aria-label":l?"Убрать лайк":"Поставить лайк",title:l?"Убрать лайк":"Поставить лайк",disabled:!t||h,children:[N.jsx("img",{src:l?rC:nC,alt:"",className:"icon-img",draggable:!1}),N.jsx("span",{className:"like-count","aria-label":`Лайков: ${i}`,children:i})]})}function Z9(n){return typeof n=="object"&&n!==null&&"toDate"in n&&typeof n.toDate=="function"}function W9(n){try{if(Z9(n))return n.toDate().toLocaleString();if(n instanceof Date)return n.toLocaleString();if(typeof n=="number"||typeof n=="string"){const e=new Date(n);if(!Number.isNaN(e.getTime()))return e.toLocaleString()}}catch{}return""}function J9({routeId:n,ownerId:e}){const t=Or(A=>A.user.current),[i,a]=k.useState([]),[l,c]=k.useState(""),[h,m]=k.useState(!0),p=(A,D)=>!!A&&!!D&&(A===D||A===e),y=k.useCallback(async()=>{m(!0);try{const A=await Q9(n);a(A)}finally{m(!1)}},[n]);k.useEffect(()=>{y()},[y]);async function T(){const A=l.trim();!t||!A||(await K9(n,{userId:t.uid,userName:t.displayName??t.email,userPhotoUrl:t.photoURL??null,text:A}),c(""),await y())}async function b(A,D){const V=t?.uid;!V||!p(V,D)||confirm("Удалить комментарий?")&&(await Y9(n,A),await y())}return N.jsxs("div",{className:"c-wrap",children:[N.jsx("h3",{children:"Комментарии"}),h?N.jsx("p",{children:"Загрузка..."}):N.jsxs(N.Fragment,{children:[N.jsx("ul",{className:"c-list",children:i.map(A=>{const D=A.userId??A.authorId??"",V=p(t?.uid,D);return N.jsxs("li",{className:"c-item",children:[N.jsx("img",{className:"c-ava",src:A.userPhotoUrl||"https://dummyimage.com/32x32/ddd/fff.png&text=U",alt:""}),N.jsxs("div",{className:"c-body",children:[N.jsxs("div",{className:"c-head",children:[N.jsx("span",{className:"c-name",children:A.userName||"Гость"}),N.jsx("span",{className:"c-date",children:W9(A.createdAt)}),N.jsxs("div",{className:"c-actions",children:[N.jsx(X9,{routeId:n,commentId:A.id}),V&&N.jsx("button",{type:"button",className:"icon-btn trash",onClick:()=>void b(A.id,D),"aria-label":"Удалить",title:"Удалить",children:N.jsx("img",{className:"icon",src:Om,alt:""})})]})]}),N.jsx("div",{className:"c-text",children:A.text})]})]},A.id)})}),t?N.jsxs("div",{className:"c-form",children:[N.jsx("textarea",{rows:3,maxLength:2e3,placeholder:"Написать комментарий...",value:l,onChange:A=>c(A.target.value)}),N.jsx("div",{className:"c-actions-row",children:N.jsx("button",{className:"btn",disabled:!l.trim(),onClick:()=>void T(),children:"Отправить"})})]}):N.jsx("p",{className:"c-note",children:"Войдите, чтобы оставить комментарий."})]})]})}function e6({open:n,point:e,onClose:t}){if(k.useEffect(()=>{if(!n)return;function l(c){c.key==="Escape"&&t()}return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[n,t]),!n||!e)return null;const a=[{label:"Адрес",value:e.address??""},{label:"Описание",value:e.description??""}].filter(l=>typeof l.value=="string"&&l.value.trim().length>0);return N.jsxs("div",{className:"pim-overlay",role:"dialog","aria-modal":"true",children:[N.jsxs("div",{className:"pim-card",children:[N.jsxs("div",{className:"pim-head",children:[N.jsx("div",{className:"pim-title",children:"Место"}),N.jsx("button",{type:"button",className:"pim-close","aria-label":"Закрыть",onClick:t,children:"✕"})]}),N.jsx("div",{className:"pim-body",children:a.length===0?N.jsx("div",{className:"pim-empty",children:"Нет дополнительной информации."}):N.jsx("dl",{className:"pim-dl",children:a.map(l=>N.jsxs("div",{className:"pim-row",children:[N.jsx("dt",{className:"pim-dt",children:l.label}),N.jsx("dd",{className:"pim-dd",children:l.value})]},l.label))})})]}),N.jsx("button",{type:"button",className:"pim-backdrop","aria-label":"Закрыть окно",onClick:t})]})}function t6(){const e=Nx().id??"",t=Or(H=>H.user.current),i=cu(),[a,l]=k.useState(null),[c,h]=k.useState([]),[m,p]=k.useState(!0),[y,T]=k.useState(null),[b,A]=k.useState(null),[D,V]=k.useState(!1);if(k.useEffect(()=>{if(!e)return;let H=!0;return(async()=>{try{p(!0),T(null);const ne=await fU(e),K=await _C(e);if(!H)return;l(ne),h(K)}catch(ne){const K=ne instanceof Error?ne.message:String(ne);H&&T(K)}finally{H&&p(!1)}})(),()=>{H=!1}},[e]),!e)return N.jsx("p",{className:"rd-wrap",children:"Маршрут не найден"});if(m)return N.jsx("p",{className:"rd-wrap",children:"Загрузка..."});if(y)return N.jsxs("p",{className:"rd-wrap",style:{color:"#c62828"},children:["Ошибка: ",y]});if(!a)return N.jsx("p",{className:"rd-wrap",children:"Маршрут не найден"});const z=!!t&&t.uid===a.ownerId;async function U(){const H=window.location.href;try{await navigator.clipboard.writeText(H),alert("Ссылка скопирована")}catch{prompt("Скопируйте ссылку:",H)}}async function Z(){z&&confirm("Удалить маршрут?")&&(await tC(e),i("/"))}return N.jsxs("div",{className:"rd-wrap",children:[N.jsxs("div",{className:"rd-header",children:[N.jsxs("div",{children:[N.jsx("h1",{className:"rd-title",children:a.title}),N.jsxs("div",{className:"rd-meta",children:[a.city," • ",a.days," дн.",N.jsx("span",{className:`rd-badge rd-${a.visibility}`,children:a.visibility==="public"?"Публичный":a.visibility==="unlisted"?"По ссылке":"Приватный"})]})]}),N.jsxs("div",{className:"rd-head-actions",children:[N.jsx("button",{type:"button",className:"btn rd-share",onClick:()=>void U(),children:"Поделиться"}),N.jsxs("div",{className:"rd-icons-row",children:[N.jsx(iC,{routeId:a.id}),N.jsx(sC,{routeId:a.id}),z&&N.jsx("button",{type:"button",className:"icon-btn trash",onClick:()=>void Z(),title:"Удалить маршрут","aria-label":"Удалить маршрут",children:N.jsx("img",{className:"icon",src:Om,alt:""})})]})]})]}),a.coverPhotoUrl&&N.jsx("img",{className:"rd-cover",src:a.coverPhotoUrl,alt:a.title}),z?N.jsx(G9,{routeId:e,city:a.city}):N.jsx("div",{className:"rd-map",children:N.jsx(vC,{points:c.map(H=>({id:H.id,lat:H.lat,lng:H.lng,title:H.title??"",address:H.address??"",description:H.description??"",category:H.category??"other"})),city:a.city,onMarkerClick:H=>{A(H),V(!0)}})}),N.jsx(e6,{open:D,point:b,onClose:()=>V(!1)}),N.jsx(J9,{routeId:e,ownerId:a.ownerId})]})}async function n6(n){const e=Wi.currentUser;if(!e)throw new Error("Пользователь не авторизован");const t=n.displayName??e.displayName??null,i=e.photoURL??null;return await oR(e,{displayName:t??void 0,photoURL:i??void 0}),{displayName:t,photoURL:i}}function r6(n){if(!n)return null;if(n instanceof Date)return n;if(typeof n=="number")return new Date(n);if(typeof n=="string"){const t=new Date(n);return Number.isNaN(t.getTime())?null:t}const e=n;if(typeof e?.toDate=="function")try{return e.toDate()}catch{return null}return null}const i6=n=>{const e=r6(n);return e?e.toLocaleDateString():""};function s6(){const n=Or(C=>C.user.current),e=Or(C=>C.user.loading),t=Jy(),i=cu(),[a,l]=k.useState(!1),[c,h]=k.useState(n?.displayName??""),[m,p]=k.useState(!1),[y,T]=k.useState(null),[b,A]=k.useState([]),[D,V]=k.useState(!1),[z,U]=k.useState(null),Z=k.useCallback(async()=>{if(n?.uid){V(!0),U(null);try{const C=await hU(n.uid);A(C)}catch(C){const R=C instanceof Error?C.message:String(C);U(R),A([]),console.error("[Profile] listUserRoutes failed:",C)}finally{V(!1)}}},[n?.uid]);if(k.useEffect(()=>{Z()},[Z]),e)return N.jsx("div",{className:"profile-wrap",children:N.jsx("div",{className:"spinner"})});if(!n)return N.jsx("div",{className:"profile-wrap",children:"Не авторизован"});async function H(C){if(C.preventDefault(),!m){p(!0),T(null);try{const R=await n6({displayName:c.trim()||void 0});t(Hl({uid:n.uid,email:n.email??null,displayName:R.displayName,photoURL:R.photoURL})),l(!1)}catch(R){const x=R?.message??"Не удалось сохранить профиль.";T(x)}finally{p(!1)}}}async function ne(){if(!m){p(!0);try{await oU(),i("/",{replace:!0})}finally{p(!1)}}}async function K(C){const R=`${location.origin}/route/${C}`;try{await navigator.clipboard.writeText(R),alert("Ссылка скопирована")}catch{prompt("Скопируйте ссылку:",R)}}async function M(C){confirm("Удалить маршрут?")&&(await tC(C),await Z())}return N.jsxs("div",{className:"profile-wrap",children:[N.jsxs("div",{className:"profile-card",children:[N.jsxs("div",{className:"profile-head",children:[N.jsx("div",{className:"avatar",children:N.jsx("img",{src:n.photoURL??J1,alt:"Аватар",className:"avatar__img"})}),N.jsxs("div",{className:"head-info",children:[N.jsx("h1",{className:"title",children:n.displayName??"Без имени"}),N.jsx("div",{className:"muted",children:n.email??"—"})]}),N.jsx("div",{className:"head-actions",children:a?null:N.jsxs(N.Fragment,{children:[N.jsx("button",{className:"btn btn-primary",onClick:()=>l(!0),children:"Изменить профиль"}),N.jsx("button",{className:"btn",onClick:()=>void ne(),children:"Выйти"})]})})]}),a&&N.jsxs("form",{className:"edit-form",onSubmit:H,children:[N.jsxs("div",{className:"form-row",children:[N.jsx("label",{className:"label",htmlFor:"displayName",children:"Имя"}),N.jsx("input",{id:"displayName",className:"input",value:c,onChange:C=>h(C.target.value),placeholder:"Введите имя"})]}),y&&N.jsx("div",{className:"form-error",children:y}),N.jsxs("div",{className:"form-actions",children:[N.jsx("button",{className:"btn btn-primary",type:"submit",disabled:m,children:m?"Сохранение…":"Сохранить"}),N.jsx("button",{className:"btn",type:"button",onClick:()=>{l(!1),h(n.displayName??""),T(null)},children:"Отмена"})]})]})]}),N.jsxs("section",{className:"myroutes",children:[N.jsx("div",{className:"myroutes__head",children:N.jsx("h2",{className:"myroutes__title",children:"Мои маршруты"})}),D&&N.jsx("p",{className:"muted",children:"Загрузка…"}),!D&&z&&N.jsxs("p",{className:"err",children:["Ошибка: ",z]}),!D&&!z&&b.length===0&&N.jsxs("div",{className:"empty-box",children:[N.jsx("div",{className:"empty-title",children:"У вас ещё нет маршрутов"}),N.jsx("div",{className:"empty-sub",children:"Создайте первый — нажмите «Создать маршрут» в шапке."})]}),!D&&!z&&b.length>0&&N.jsx("ul",{className:"my-grid",children:b.map(C=>N.jsxs("li",{className:"my-card",children:[C.coverPhotoUrl&&N.jsx("img",{className:"my-cover",src:C.coverPhotoUrl,alt:C.title}),N.jsxs("div",{className:"my-body",children:[N.jsx(Ns,{to:`/route/${C.id}`,className:"my-title",children:C.title}),N.jsxs("div",{className:"my-list",children:[N.jsxs("div",{className:"my-list__row",children:[N.jsx("span",{className:"my-list__label",children:"Город"}),N.jsx("span",{className:"my-list__value",children:C.city||"—"})]}),N.jsxs("div",{className:"my-list__row",children:[N.jsx("span",{className:"my-list__label",children:"Дней"}),N.jsx("span",{className:"my-list__value",children:C.days})]}),N.jsxs("div",{className:"my-list__row",children:[N.jsx("span",{className:"my-list__label",children:"Создан"}),N.jsx("span",{className:"my-list__value",children:i6(C.createdAt)})]})]}),N.jsxs("div",{className:"my-actions",children:[N.jsx(Ns,{className:"btn btn-solid",to:`/route/${C.id}`,children:"Открыть"}),N.jsx("button",{className:"btn",onClick:()=>void K(C.id),children:"Поделиться"}),N.jsx("button",{className:"icon-btn trash",title:"Удалить","aria-label":"Удалить",onClick:()=>void M(C.id),children:N.jsx("img",{className:"icon",src:Om,alt:""})})]})]})]},C.id))})]})]})}function a6(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.trim())}function o6(){const[n,e]=k.useState("signin"),[t,i]=k.useState(""),[a,l]=k.useState(""),[c,h]=k.useState(""),[m,p]=k.useState(""),[y,T]=k.useState(!1),[b,A]=k.useState(null),D=cu(),V=wi(),z=Jy(),U=k.useMemo(()=>new URLSearchParams(V.search).get("next")??"/",[V.search]);k.useEffect(()=>Z1(K=>{K&&D(U,{replace:!0})}),[D,U]);async function Z(ne){ne.preventDefault(),A(null);const K=t.trim();if(!a6(K)){A("Введите корректный e-mail.");return}if(n==="signin"){if(c.length<6){A("Пароль должен быть не короче 6 символов.");return}T(!0);try{const M=await W2(Wi,K,c);await M.user.reload(),z(Hl({uid:M.user.uid,email:M.user.email??null,displayName:M.user.displayName??null,photoURL:M.user.photoURL??null})),D(U,{replace:!0})}catch(M){A(oy(M))}finally{T(!1)}return}if(a.trim().length<2){A("Введите имя (минимум 2 символа).");return}if(c.length<6){A("Пароль должен быть не короче 6 символов.");return}if(c!==m){A("Пароли не совпадают.");return}T(!0);try{const M=await Z2(Wi,K,c),C=a.trim();await oR(M.user,{displayName:C}),await M.user.reload(),z(Hl({uid:M.user.uid,email:M.user.email??null,displayName:M.user.displayName??C,photoURL:M.user.photoURL??null})),D(U,{replace:!0})}catch(M){A(oy(M))}finally{T(!1)}}async function H(){A(null),T(!0);try{const ne=new qi,K=await wM(Wi,ne);await K.user.reload(),z(Hl({uid:K.user.uid,email:K.user.email??null,displayName:K.user.displayName??null,photoURL:K.user.photoURL??null})),D(U,{replace:!0})}catch(ne){A(oy(ne))}finally{T(!1)}}return N.jsx("div",{className:"auth",children:N.jsxs("div",{className:"auth-card",children:[N.jsxs("div",{className:"auth-tabs",role:"tablist","aria-label":"Режим входа",children:[N.jsx("button",{role:"tab","aria-selected":n==="signin",className:`auth-tab ${n==="signin"?"is-active":""}`,onClick:()=>e("signin"),children:"Войти"}),N.jsx("button",{role:"tab","aria-selected":n==="signup",className:`auth-tab ${n==="signup"?"is-active":""}`,onClick:()=>e("signup"),children:"Зарегистрироваться"})]}),N.jsxs("form",{className:"auth-form",onSubmit:Z,noValidate:!0,children:[n==="signup"&&N.jsxs(N.Fragment,{children:[N.jsx("label",{className:"auth-label",htmlFor:"name",children:"Имя"}),N.jsx("input",{id:"name",className:"auth-input",value:a,onChange:ne=>l(ne.target.value),placeholder:"Введите ваше имя",autoComplete:"name"})]}),N.jsx("label",{className:"auth-label",htmlFor:"email",children:"E-mail"}),N.jsx("input",{id:"email",className:"auth-input",type:"email",inputMode:"email",value:t,onChange:ne=>i(ne.target.value),placeholder:"you@example.com",autoComplete:n==="signin"?"username":"email"}),N.jsxs("label",{className:"auth-label",htmlFor:"pass1",children:["Пароль ",n==="signup"?"(мин. 6 символов)":""]}),N.jsx("input",{id:"pass1",className:"auth-input",type:"password",value:c,onChange:ne=>h(ne.target.value),placeholder:"••••••••",autoComplete:n==="signin"?"current-password":"new-password"}),n==="signup"&&N.jsxs(N.Fragment,{children:[N.jsx("label",{className:"auth-label",htmlFor:"pass2",children:"Повторите пароль"}),N.jsx("input",{id:"pass2",className:"auth-input",type:"password",value:m,onChange:ne=>p(ne.target.value),placeholder:"••••••••",autoComplete:"new-password"})]}),b&&N.jsx("div",{className:"auth-error",children:b}),N.jsx("button",{className:"btn btn-primary",type:"submit",disabled:y,children:y?"Подождите…":n==="signin"?"Войти":"Создать аккаунт"}),N.jsx("div",{className:"auth-sep",role:"separator","aria-label":"или"}),N.jsx("button",{className:"btn btn-google",type:"button",onClick:H,disabled:y,children:"Продолжить через Google"})]})]})})}function oy(n){const e=n?.code??n?.message??"";return e.includes("auth/email-already-in-use")?"Этот e-mail уже используется.":e.includes("auth/invalid-email")?"Некорректный e-mail.":e.includes("auth/weak-password")?"Слишком простой пароль (минимум 6 символов).":e.includes("auth/user-not-found")||e.includes("auth/wrong-password")?"Неверный e-mail или пароль.":e.includes("auth/popup-closed-by-user")?"Окно входа было закрыто.":"Ошибка. Попробуйте ещё раз."}function US({children:n}){const e=Or(a=>a.user.current),t=Or(a=>a.user.loading),i=wi();if(t)return N.jsx("div",{style:{display:"grid",placeItems:"center",padding:"24px"},children:N.jsx("div",{className:"spinner","aria-label":"Загрузка…"})});if(!e){const a=encodeURIComponent(i.pathname+i.search);return N.jsx(hy,{to:`/auth?next=${a}`,replace:!0})}return n}const l6=_D([{path:"/",element:N.jsx(lU,{}),children:[{index:!0,element:N.jsx(DU,{})},{path:"auth",element:N.jsx(o6,{})},{path:"create",element:N.jsx(US,{children:N.jsx(M9,{})})},{path:"profile",element:N.jsx(US,{children:N.jsx(s6,{})})},{path:"route/:id",element:N.jsx(t6,{})},{path:"route",element:N.jsx(hy,{to:"/",replace:!0})},{path:"*",element:N.jsx(hy,{to:"/",replace:!0})}]}]);JI.createRoot(document.getElementById("root")).render(N.jsx(hr.StrictMode,{children:N.jsxs(gN,{store:yO,children:[N.jsx(W1,{}),N.jsx(xD,{router:l6})]})}));
